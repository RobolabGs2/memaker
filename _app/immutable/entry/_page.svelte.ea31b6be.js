var Wa=Object.defineProperty;var Va=(i,e,t)=>e in i?Wa(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Re=(i,e,t)=>(Va(i,typeof e!="symbol"?e+"":e,t),t);import{S as ke,i as Ae,s as Ee,C as Me,J as he,K as ys,e as Ze,L as Es,m as ie,h as E,M as Vn,b as O,G as V,D as ze,E as De,F as Ue,N as je,g as w,d as y,O as kn,P as si,Q as Ce,y as B,z as M,A as z,R as He,B as D,k as J,l as Q,n as G,T as qn,U as it,V as Pe,W as ft,X as ye,v as Ve,f as qe,Y as qa,Z as Et,o as cn,a as oe,c as le,_ as Za,q as ue,r as fe,$ as yn,p as _t,a0 as Xa,a1 as Ka,H as nt,w as ge,u as ut,a2 as gt,a3 as Xe,a4 as $e,a5 as ve,a6 as ht,I as St,t as Er,a7 as Ya}from"../chunks/index.3e313f67.js";import{w as An}from"../chunks/index.16fc6c0a.js";var ai={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function oi(i,e,t){const n=i.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function mr(i){let e,t=[i[10]],n={};for(let r=0;r<t.length;r+=1)n=he(n,t[r]);return{c(){e=ys(i[9]),this.h()},l(r){e=Es(r,i[9],{}),ie(e).forEach(E),this.h()},h(){Vn(e,n)},m(r,s){O(r,e,s)},p(r,s){n=je(t,[s&16&&r[10]]),Vn(e,n)},d(r){r&&E(e)}}}function li(i){let e=i[9],t,n=i[9]&&mr(i);return{c(){n&&n.c(),t=Ze()},l(r){n&&n.l(r),t=Ze()},m(r,s){n&&n.m(r,s),O(r,t,s)},p(r,s){r[9]?e?Ee(e,r[9])?(n.d(1),n=mr(r),n.c(),n.m(t.parentNode,t)):n.p(r,s):(n=mr(r),n.c(),n.m(t.parentNode,t)):e&&(n.d(1),n=null),e=r[9]},d(r){r&&E(t),n&&n.d(r)}}}function Ja(i){let e,t,n,r,s=i[4],a=[];for(let c=0;c<s.length;c+=1)a[c]=li(oi(i,s,c));const o=i[8].default,l=Me(o,i,i[7],null);let u=[ai,i[5],{width:i[2]},{height:i[2]},{stroke:i[1]},{"stroke-width":i[3]},{class:n=`tabler-icon tabler-icon-${i[0]} ${i[6].class??""}`}],f={};for(let c=0;c<u.length;c+=1)f=he(f,u[c]);return{c(){e=ys("svg");for(let c=0;c<a.length;c+=1)a[c].c();t=Ze(),l&&l.c(),this.h()},l(c){e=Es(c,"svg",{width:!0,height:!0,stroke:!0,"stroke-width":!0,class:!0});var h=ie(e);for(let m=0;m<a.length;m+=1)a[m].l(h);t=Ze(),l&&l.l(h),h.forEach(E),this.h()},h(){Vn(e,f)},m(c,h){O(c,e,h);for(let m=0;m<a.length;m+=1)a[m].m(e,null);V(e,t),l&&l.m(e,null),r=!0},p(c,[h]){if(h&16){s=c[4];let m;for(m=0;m<s.length;m+=1){const d=oi(c,s,m);a[m]?a[m].p(d,h):(a[m]=li(d),a[m].c(),a[m].m(e,t))}for(;m<a.length;m+=1)a[m].d(1);a.length=s.length}l&&l.p&&(!r||h&128)&&ze(l,o,c,c[7],r?Ue(o,c[7],h,null):De(c[7]),null),Vn(e,f=je(u,[ai,h&32&&c[5],(!r||h&4)&&{width:c[2]},(!r||h&4)&&{height:c[2]},(!r||h&2)&&{stroke:c[1]},(!r||h&8)&&{"stroke-width":c[3]},(!r||h&65&&n!==(n=`tabler-icon tabler-icon-${c[0]} ${c[6].class??""}`))&&{class:n}]))},i(c){r||(w(l,c),r=!0)},o(c){y(l,c),r=!1},d(c){c&&E(e),kn(a,c),l&&l.d(c)}}}function Qa(i,e,t){const n=["name","color","size","stroke","iconNode"];let r=si(e,n),{$$slots:s={},$$scope:a}=e,{name:o}=e,{color:l="currentColor"}=e,{size:u=24}=e,{stroke:f=2}=e,{iconNode:c}=e;return i.$$set=h=>{t(6,e=he(he({},e),Ce(h))),t(5,r=si(e,n)),"name"in h&&t(0,o=h.name),"color"in h&&t(1,l=h.color),"size"in h&&t(2,u=h.size),"stroke"in h&&t(3,f=h.stroke),"iconNode"in h&&t(4,c=h.iconNode),"$$scope"in h&&t(7,a=h.$$scope)},e=Ce(e),[o,l,u,f,c,r,e,a,s]}class eo extends ke{constructor(e){super(),Ae(this,e,Qa,Ja,Ee,{name:0,color:1,size:2,stroke:3,iconNode:4})}}const We=eo;function to(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function no(i){let e,t;const n=[{name:"align-box-bottom-center"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[to]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function ro(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}],["path",{d:"M9 15v2"}],["path",{d:"M12 11v6"}],["path",{d:"M15 13v4"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class io extends ke{constructor(e){super(),Ae(this,e,ro,no,Ee,{})}}const so=io;function ao(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function oo(i){let e,t;const n=[{name:"align-box-center-middle"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[ao]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function lo(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M3 19v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}],["path",{d:"M11 15h2"}],["path",{d:"M9 12h6"}],["path",{d:"M10 9h4"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class uo extends ke{constructor(e){super(),Ae(this,e,lo,oo,Ee,{})}}const fo=uo;function co(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function ho(i){let e,t;const n=[{name:"align-box-top-center"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[co]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function mo(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}],["path",{d:"M9 9v-2"}],["path",{d:"M12 13v-6"}],["path",{d:"M15 11v-4"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class po extends ke{constructor(e){super(),Ae(this,e,mo,ho,Ee,{})}}const _o=po;function go(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function bo(i){let e,t;const n=[{name:"align-center"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[go]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function $o(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M4 6l16 0"}],["path",{d:"M8 12l8 0"}],["path",{d:"M6 18l12 0"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class vo extends ke{constructor(e){super(),Ae(this,e,$o,bo,Ee,{})}}const wo=vo;function yo(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Eo(i){let e,t;const n=[{name:"align-left"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[yo]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function ko(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M4 6l16 0"}],["path",{d:"M4 12l10 0"}],["path",{d:"M4 18l14 0"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Ao extends ke{constructor(e){super(),Ae(this,e,ko,Eo,Ee,{})}}const So=Ao;function To(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Io(i){let e,t;const n=[{name:"align-right"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[To]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Co(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M4 6l16 0"}],["path",{d:"M10 12l10 0"}],["path",{d:"M6 18l14 0"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Fo extends ke{constructor(e){super(),Ae(this,e,Co,Io,Ee,{})}}const Ro=Fo;function Po(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function No(i){let e,t;const n=[{name:"arrow-down"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Po]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Bo(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M12 5l0 14"}],["path",{d:"M18 13l-6 6"}],["path",{d:"M6 13l6 6"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Mo extends ke{constructor(e){super(),Ae(this,e,Bo,No,Ee,{})}}const zo=Mo;function Do(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Uo(i){let e,t;const n=[{name:"arrow-up"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Do]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Lo(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M12 5l0 14"}],["path",{d:"M18 11l-6 -6"}],["path",{d:"M6 11l6 -6"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Oo extends ke{constructor(e){super(),Ae(this,e,Lo,Uo,Ee,{})}}const xo=Oo;function Go(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function jo(i){let e,t;const n=[{name:"bold"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Go]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Ho(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z"}],["path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Wo extends ke{constructor(e){super(),Ae(this,e,Ho,jo,Ee,{})}}const Vo=Wo;function qo(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Zo(i){let e,t;const n=[{name:"box-align-bottom"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[qo]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Xo(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M4 14h16v5a1 1 0 0 1 -1 1h-14a1 1 0 0 1 -1 -1v-5z"}],["path",{d:"M4 9v.01"}],["path",{d:"M4 4v.01"}],["path",{d:"M9 4v.01"}],["path",{d:"M15 4v.01"}],["path",{d:"M20 4v.01"}],["path",{d:"M20 9v.01"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Ko extends ke{constructor(e){super(),Ae(this,e,Xo,Zo,Ee,{})}}const Yo=Ko;function Jo(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Qo(i){let e,t;const n=[{name:"box-align-top"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Jo]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function el(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M4 9.505h16v-5a1 1 0 0 0 -1 -1h-14a1 1 0 0 0 -1 1v5z"}],["path",{d:"M4 14.505v-.01"}],["path",{d:"M4 19.505v-.01"}],["path",{d:"M9 19.505v-.01"}],["path",{d:"M15 19.505v-.01"}],["path",{d:"M20 19.505v-.01"}],["path",{d:"M20 14.505v-.01"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class tl extends ke{constructor(e){super(),Ae(this,e,el,Qo,Ee,{})}}const nl=tl;function rl(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function il(i){let e,t;const n=[{name:"brand-github-filled"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[rl]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function sl(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M5.315 2.1c.791 -.113 1.9 .145 3.333 .966l.272 .161l.16 .1l.397 -.083a13.3 13.3 0 0 1 4.59 -.08l.456 .08l.396 .083l.161 -.1c1.385 -.84 2.487 -1.17 3.322 -1.148l.164 .008l.147 .017l.076 .014l.05 .011l.144 .047a1 1 0 0 1 .53 .514a5.2 5.2 0 0 1 .397 2.91l-.047 .267l-.046 .196l.123 .163c.574 .795 .93 1.728 1.03 2.707l.023 .295l.007 .272c0 3.855 -1.659 5.883 -4.644 6.68l-.245 .061l-.132 .029l.014 .161l.008 .157l.004 .365l-.002 .213l-.003 3.834a1 1 0 0 1 -.883 .993l-.117 .007h-6a1 1 0 0 1 -.993 -.883l-.007 -.117v-.734c-1.818 .26 -3.03 -.424 -4.11 -1.878l-.535 -.766c-.28 -.396 -.455 -.579 -.589 -.644l-.048 -.019a1 1 0 0 1 .564 -1.918c.642 .188 1.074 .568 1.57 1.239l.538 .769c.76 1.079 1.36 1.459 2.609 1.191l.001 -.678l-.018 -.168a5.03 5.03 0 0 1 -.021 -.824l.017 -.185l.019 -.12l-.108 -.024c-2.976 -.71 -4.703 -2.573 -4.875 -6.139l-.01 -.31l-.004 -.292a5.6 5.6 0 0 1 .908 -3.051l.152 -.222l.122 -.163l-.045 -.196a5.2 5.2 0 0 1 .145 -2.642l.1 -.282l.106 -.253a1 1 0 0 1 .529 -.514l.144 -.047l.154 -.03z","stroke-width":"0",fill:"currentColor"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class al extends ke{constructor(e){super(),Ae(this,e,sl,il,Ee,{})}}const ol=al;function ll(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function ul(i){let e,t;const n=[{name:"brand-vk"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[ll]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function fl(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M14 19h-4a8 8 0 0 1 -8 -8v-5h4v5a4 4 0 0 0 4 4h0v-9h4v4.5l.03 0a4.531 4.531 0 0 0 3.97 -4.496h4l-.342 1.711a6.858 6.858 0 0 1 -3.658 4.789h0a5.34 5.34 0 0 1 3.566 4.111l.434 2.389h0h-4a4.531 4.531 0 0 0 -3.97 -4.496v4.5z"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class cl extends ke{constructor(e){super(),Ae(this,e,fl,ul,Ee,{})}}const hl=cl;function ml(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function dl(i){let e,t;const n=[{name:"chevron-down"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[ml]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function pl(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M6 9l6 6l6 -6"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class _l extends ke{constructor(e){super(),Ae(this,e,pl,dl,Ee,{})}}const gl=_l;function bl(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function $l(i){let e,t;const n=[{name:"copy"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[bl]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function vl(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}],["path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class wl extends ke{constructor(e){super(),Ae(this,e,vl,$l,Ee,{})}}const ks=wl;function yl(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function El(i){let e,t;const n=[{name:"device-floppy"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[yl]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function kl(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}],["path",{d:"M14 4l0 4l-6 0l0 -4"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Al extends ke{constructor(e){super(),Ae(this,e,kl,El,Ee,{})}}const Sl=Al;function Tl(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Il(i){let e,t;const n=[{name:"help"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Tl]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Cl(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}],["path",{d:"M12 17l0 .01"}],["path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Fl extends ke{constructor(e){super(),Ae(this,e,Cl,Il,Ee,{})}}const Rl=Fl;function Pl(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Nl(i){let e,t;const n=[{name:"history"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Pl]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Bl(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M12 8l0 4l2 2"}],["path",{d:"M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Ml extends ke{constructor(e){super(),Ae(this,e,Bl,Nl,Ee,{})}}const zl=Ml;function Dl(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Ul(i){let e,t;const n=[{name:"info-circle"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Dl]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Ll(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"}],["path",{d:"M12 9h.01"}],["path",{d:"M11 12h1v4h1"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Ol extends ke{constructor(e){super(),Ae(this,e,Ll,Ul,Ee,{})}}const xl=Ol;function Gl(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function jl(i){let e,t;const n=[{name:"italic"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Gl]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Hl(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M11 5l6 0"}],["path",{d:"M7 19l6 0"}],["path",{d:"M14 5l-4 14"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Wl extends ke{constructor(e){super(),Ae(this,e,Hl,jl,Ee,{})}}const Vl=Wl;function ql(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Zl(i){let e,t;const n=[{name:"line-height"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[ql]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Xl(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M3 8l3 -3l3 3"}],["path",{d:"M3 16l3 3l3 -3"}],["path",{d:"M6 5l0 14"}],["path",{d:"M13 6l7 0"}],["path",{d:"M13 12l7 0"}],["path",{d:"M13 18l7 0"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Kl extends ke{constructor(e){super(),Ae(this,e,Xl,Zl,Ee,{})}}const Yl=Kl;function Jl(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Ql(i){let e,t;const n=[{name:"minus"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Jl]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function eu(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M5 12l14 0"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class tu extends ke{constructor(e){super(),Ae(this,e,eu,Ql,Ee,{})}}const nu=tu;function ru(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function iu(i){let e,t;const n=[{name:"new-section"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[ru]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function su(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M9 12l6 0"}],["path",{d:"M12 9l0 6"}],["path",{d:"M4 6v-1a1 1 0 0 1 1 -1h1m5 0h2m5 0h1a1 1 0 0 1 1 1v1m0 5v2m0 5v1a1 1 0 0 1 -1 1h-1m-5 0h-2m-5 0h-1a1 1 0 0 1 -1 -1v-1m0 -5v-2m0 -5"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class au extends ke{constructor(e){super(),Ae(this,e,su,iu,Ee,{})}}const As=au;function ou(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function lu(i){let e,t;const n=[{name:"photo-down"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[ou]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function uu(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M15 8h.01"}],["path",{d:"M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l4 4"}],["path",{d:"M14 14l1 -1c.653 -.629 1.413 -.815 2.13 -.559"}],["path",{d:"M19 16v6"}],["path",{d:"M22 19l-3 3l-3 -3"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class fu extends ke{constructor(e){super(),Ae(this,e,uu,lu,Ee,{})}}const cu=fu;function hu(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function mu(i){let e,t;const n=[{name:"photo-up"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[hu]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function du(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M15 8h.01"}],["path",{d:"M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l3.5 3.5"}],["path",{d:"M14 14l1 -1c.679 -.653 1.473 -.829 2.214 -.526"}],["path",{d:"M19 22v-6"}],["path",{d:"M22 19l-3 -3l-3 3"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class pu extends ke{constructor(e){super(),Ae(this,e,du,mu,Ee,{})}}const _u=pu;function gu(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function bu(i){let e,t;const n=[{name:"photo"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[gu]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function $u(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M15 8h.01"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class vu extends ke{constructor(e){super(),Ae(this,e,$u,bu,Ee,{})}}const wu=vu;function yu(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Eu(i){let e,t;const n=[{name:"plus"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[yu]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function ku(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M12 5l0 14"}],["path",{d:"M5 12l14 0"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Au extends ke{constructor(e){super(),Ae(this,e,ku,Eu,Ee,{})}}const Ss=Au;function Su(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Tu(i){let e,t;const n=[{name:"rectangle"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Su]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Iu(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M3 5m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Cu extends ke{constructor(e){super(),Ae(this,e,Iu,Tu,Ee,{})}}const Fu=Cu;function Ru(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Pu(i){let e,t;const n=[{name:"settings"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Ru]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Nu(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Bu extends ke{constructor(e){super(),Ae(this,e,Nu,Pu,Ee,{})}}const Mu=Bu;function zu(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Du(i){let e,t;const n=[{name:"trash"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[zu]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Uu(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M4 7l16 0"}],["path",{d:"M10 11l0 6"}],["path",{d:"M14 11l0 6"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Lu extends ke{constructor(e){super(),Ae(this,e,Uu,Du,Ee,{})}}const Ou=Lu;function xu(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Gu(i){let e,t;const n=[{name:"upload"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[xu]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function ju(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}],["path",{d:"M7 9l5 -5l5 5"}],["path",{d:"M12 4l0 12"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Hu extends ke{constructor(e){super(),Ae(this,e,ju,Gu,Ee,{})}}const Wu=Hu;function Vu(i){let e;const t=i[2].default,n=Me(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?Ue(t,r[3],s,null):De(r[3]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function qu(i){let e,t;const n=[{name:"x"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Vu]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=he(r,n[s]);return e=new We({props:r}),{c(){B(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,a){z(e,s,a),t=!0},p(s,[a]){const o=a&3?je(n,[n[0],a&2&&He(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Zu(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M18 6l-12 12"}],["path",{d:"M6 6l12 12"}]];return i.$$set=a=>{t(1,e=he(he({},e),Ce(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ce(e),[s,e,n,r]}class Xu extends ke{constructor(e){super(),Ae(this,e,Zu,qu,Ee,{})}}const Ku=Xu;function Yu(i){let e,t,n,r,s,a;const o=i[11].default,l=Me(o,i,i[10],null);return{c(){e=J("main"),l&&l.c(),this.h()},l(u){e=Q(u,"MAIN",{role:!0,tabindex:!0,title:!0,class:!0,style:!0});var f=ie(e);l&&l.l(f),f.forEach(E),this.h()},h(){G(e,"role","button"),G(e,"tabindex",1),G(e,"title",i[4]),G(e,"class",t=qn(i[2])+" svelte-1nn75kw"),G(e,"style",n=`justify-content:${i[6]};width:${i[8]};${i[9]?`${i[9]};`:""}${i[3]};`),it(e,"active",i[0]),it(e,"disabled",i[1]),it(e,"disablePadding",i[5]),it(e,"border",i[7])},m(u,f){O(u,e,f),l&&l.m(e,null),r=!0,s||(a=[Pe(e,"click",i[12]),Pe(e,"mousemove",i[13]),Pe(e,"mouseout",i[14]),Pe(e,"mouseover",i[15]),Pe(e,"mouseup",i[16]),Pe(e,"mousedown",i[17]),Pe(e,"mouseenter",i[18]),Pe(e,"mouseleave",i[19]),Pe(e,"touchstart",i[20],{passive:!0}),Pe(e,"touchmove",i[21],{passive:!0}),Pe(e,"touchcancel",i[22],{passive:!0}),Pe(e,"touchend",i[23],{passive:!0}),Pe(e,"keydown",i[24]),Pe(e,"keyup",i[25]),Pe(e,"focus",i[26]),Pe(e,"focusin",i[27]),Pe(e,"focusout",i[28]),Pe(e,"blur",i[29])],s=!0)},p(u,[f]){l&&l.p&&(!r||f&1024)&&ze(l,o,u,u[10],r?Ue(o,u[10],f,null):De(u[10]),null),(!r||f&16)&&G(e,"title",u[4]),(!r||f&4&&t!==(t=qn(u[2])+" svelte-1nn75kw"))&&G(e,"class",t),(!r||f&840&&n!==(n=`justify-content:${u[6]};width:${u[8]};${u[9]?`${u[9]};`:""}${u[3]};`))&&G(e,"style",n),(!r||f&5)&&it(e,"active",u[0]),(!r||f&6)&&it(e,"disabled",u[1]),(!r||f&36)&&it(e,"disablePadding",u[5]),(!r||f&132)&&it(e,"border",u[7])},i(u){r||(w(l,u),r=!0)},o(u){y(l,u),r=!1},d(u){u&&E(e),l&&l.d(u),s=!1,ft(a)}}}function Ju(i,e,t){let{$$slots:n={},$$scope:r}=e,{active:s=!1}=e,{disabled:a=!1}=e,{type:o="default"}=e,{style:l=""}=e,{title:u=""}=e,{disablePadding:f=!1}=e,{justifyContent:c="center"}=e,{border:h=!0}=e,{width:m="100%"}=e,{height:d=""}=e;function p(x){ye.call(this,i,x)}function _(x){ye.call(this,i,x)}function b(x){ye.call(this,i,x)}function v(x){ye.call(this,i,x)}function A(x){ye.call(this,i,x)}function k(x){ye.call(this,i,x)}function N(x){ye.call(this,i,x)}function T(x){ye.call(this,i,x)}function F(x){ye.call(this,i,x)}function L(x){ye.call(this,i,x)}function P(x){ye.call(this,i,x)}function U(x){ye.call(this,i,x)}function ae(x){ye.call(this,i,x)}function I(x){ye.call(this,i,x)}function C(x){ye.call(this,i,x)}function $(x){ye.call(this,i,x)}function Z(x){ye.call(this,i,x)}function we(x){ye.call(this,i,x)}return i.$$set=x=>{"active"in x&&t(0,s=x.active),"disabled"in x&&t(1,a=x.disabled),"type"in x&&t(2,o=x.type),"style"in x&&t(3,l=x.style),"title"in x&&t(4,u=x.title),"disablePadding"in x&&t(5,f=x.disablePadding),"justifyContent"in x&&t(6,c=x.justifyContent),"border"in x&&t(7,h=x.border),"width"in x&&t(8,m=x.width),"height"in x&&t(9,d=x.height),"$$scope"in x&&t(10,r=x.$$scope)},[s,a,o,l,u,f,c,h,m,d,r,n,p,_,b,v,A,k,N,T,F,L,P,U,ae,I,C,$,Z,we]}class st extends ke{constructor(e){super(),Ae(this,e,Ju,Yu,Ee,{active:0,disabled:1,type:2,style:3,title:4,disablePadding:5,justifyContent:6,border:7,width:8,height:9})}}const Qu=i=>({}),ui=i=>({}),ef=i=>({}),fi=i=>({});function ci(i){let e,t,n,r,s,a,o,l,u,f,c=i[4].title&&hi(i);const h=i[5].default,m=Me(h,i,i[8],null);let d=i[4].footer&&di(i);return{c(){e=J("button"),t=oe(),n=J("div"),r=J("article"),c&&c.c(),s=oe(),a=J("main"),m&&m.c(),o=oe(),d&&d.c(),this.h()},l(p){e=Q(p,"BUTTON",{class:!0}),ie(e).forEach(E),t=le(p),n=Q(p,"DIV",{class:!0});var _=ie(n);r=Q(_,"ARTICLE",{class:!0});var b=ie(r);c&&c.l(b),s=le(b),a=Q(b,"MAIN",{class:!0});var v=ie(a);m&&m.l(v),v.forEach(E),o=le(b),d&&d.l(b),b.forEach(E),_.forEach(E),this.h()},h(){G(e,"class","backdrop fixed svelte-1fd19w4"),G(a,"class","svelte-1fd19w4"),G(r,"class","svelte-1fd19w4"),G(n,"class","container fixed svelte-1fd19w4")},m(p,_){O(p,e,_),O(p,t,_),O(p,n,_),V(n,r),c&&c.m(r,null),V(r,s),V(r,a),m&&m.m(a,null),V(r,o),d&&d.m(r,null),l=!0,u||(f=[Pe(e,"click",i[6]),Pe(n,"keypress",i[3])],u=!0)},p(p,_){p[4].title?c?(c.p(p,_),_&16&&w(c,1)):(c=hi(p),c.c(),w(c,1),c.m(r,s)):c&&(Ve(),y(c,1,1,()=>{c=null}),qe()),m&&m.p&&(!l||_&256)&&ze(m,h,p,p[8],l?Ue(h,p[8],_,null):De(p[8]),null),p[4].footer?d?(d.p(p,_),_&16&&w(d,1)):(d=di(p),d.c(),w(d,1),d.m(r,null)):d&&(Ve(),y(d,1,1,()=>{d=null}),qe())},i(p){l||(w(c),w(m,p),w(d),l=!0)},o(p){y(c),y(m,p),y(d),l=!1},d(p){p&&E(e),p&&E(t),p&&E(n),c&&c.d(),m&&m.d(p),d&&d.d(),u=!1,ft(f)}}}function hi(i){let e,t,n;const r=i[5].title,s=Me(r,i,i[8],fi);let a=i[1]&&mi(i);return{c(){e=J("header"),s&&s.c(),t=oe(),a&&a.c(),this.h()},l(o){e=Q(o,"HEADER",{class:!0});var l=ie(e);s&&s.l(l),t=le(l),a&&a.l(l),l.forEach(E),this.h()},h(){G(e,"class","svelte-1fd19w4")},m(o,l){O(o,e,l),s&&s.m(e,null),V(e,t),a&&a.m(e,null),n=!0},p(o,l){s&&s.p&&(!n||l&256)&&ze(s,r,o,o[8],n?Ue(r,o[8],l,ef):De(o[8]),fi),o[1]?a?(a.p(o,l),l&2&&w(a,1)):(a=mi(o),a.c(),w(a,1),a.m(e,null)):a&&(Ve(),y(a,1,1,()=>{a=null}),qe())},i(o){n||(w(s,o),w(a),n=!0)},o(o){y(s,o),y(a),n=!1},d(o){o&&E(e),s&&s.d(o),a&&a.d()}}}function mi(i){let e,t;return e=new st({props:{title:"Закрыть",width:"auto",border:!1,$$slots:{default:[tf]},$$scope:{ctx:i}}}),e.$on("click",i[7]),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&256&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function tf(i){let e,t;return e=new Ku({}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function di(i){let e,t;const n=i[5].footer,r=Me(n,i,i[8],ui);return{c(){e=J("footer"),r&&r.c(),this.h()},l(s){e=Q(s,"FOOTER",{class:!0});var a=ie(e);r&&r.l(a),a.forEach(E),this.h()},h(){G(e,"class","svelte-1fd19w4")},m(s,a){O(s,e,a),r&&r.m(e,null),t=!0},p(s,a){r&&r.p&&(!t||a&256)&&ze(r,n,s,s[8],t?Ue(n,s[8],a,Qu):De(s[8]),ui)},i(s){t||(w(r,s),t=!0)},o(s){y(r,s),t=!1},d(s){s&&E(e),r&&r.d(s)}}}function nf(i){let e,t,n=i[0]&&ci(i);return{c(){n&&n.c(),e=Ze()},l(r){n&&n.l(r),e=Ze()},m(r,s){n&&n.m(r,s),O(r,e,s),t=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&w(n,1)):(n=ci(r),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(Ve(),y(n,1,1,()=>{n=null}),qe())},i(r){t||(w(n),t=!0)},o(r){y(n),t=!1},d(r){n&&n.d(r),r&&E(e)}}}function rf(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=qa(n);let{open:a=!0}=e,{closable:o=!0}=e;const l=Et();function u(d="cancel"){o&&l("close",{action:d},{cancelable:!0})&&t(0,a=!1)}function f(d){a&&d.key==="Escape"&&u("cancel")}function c(d){a&&(l("paste",{event:d}),d.stopPropagation())}cn(()=>(document.addEventListener("keyup",f),document.addEventListener("paste",c,{capture:!0}),()=>{document.removeEventListener("paste",c),document.removeEventListener("keyup",f)}));const h=()=>u("cancel"),m=()=>u("cancel");return i.$$set=d=>{"open"in d&&t(0,a=d.open),"closable"in d&&t(1,o=d.closable),"$$scope"in d&&t(8,r=d.$$scope)},[a,o,u,f,s,n,h,m,r]}class on extends ke{constructor(e){super(),Ae(this,e,rf,nf,Ee,{open:0,closable:1})}}const sf=""+new URL("../assets/firefox_copy_helper.d346afe2.webp",import.meta.url).href;function af(i){let e,t,n,r,s,a,o,l,u,f,c,h,m,d,p,_,b,v;return{c(){e=J("main"),t=J("p"),n=ue(`Ваш браузер отключил или не поддерживает копирование изображений из скриптов. Вы можете
			скопировать эту копию фрейма вручную с помощью ПКМ.`),r=oe(),s=J("img"),o=oe(),l=J("p"),u=ue("Если это Firefox версии 87 и выше, вы можете включить опцию "),f=J("span"),c=ue("dom.events.asyncClipboard.clipboardItem"),h=ue(", открыв в новой вкладке страницу "),m=J("span"),d=ue("about:config"),p=ue(`. Тогда вы перестанете видеть это
			окно, а функционал копирования заработает корректно.`),_=oe(),b=J("img"),this.h()},l(A){e=Q(A,"MAIN",{class:!0});var k=ie(e);t=Q(k,"P",{});var N=ie(t);n=fe(N,`Ваш браузер отключил или не поддерживает копирование изображений из скриптов. Вы можете
			скопировать эту копию фрейма вручную с помощью ПКМ.`),N.forEach(E),r=le(k),s=Q(k,"IMG",{src:!0,alt:!0,class:!0}),o=le(k),l=Q(k,"P",{});var T=ie(l);u=fe(T,"Если это Firefox версии 87 и выше, вы можете включить опцию "),f=Q(T,"SPAN",{class:!0});var F=ie(f);c=fe(F,"dom.events.asyncClipboard.clipboardItem"),F.forEach(E),h=fe(T,", открыв в новой вкладке страницу "),m=Q(T,"SPAN",{class:!0});var L=ie(m);d=fe(L,"about:config"),L.forEach(E),p=fe(T,`. Тогда вы перестанете видеть это
			окно, а функционал копирования заработает корректно.`),T.forEach(E),_=le(k),b=Q(k,"IMG",{src:!0,alt:!0,class:!0}),k.forEach(E),this.h()},h(){yn(s.src,a=i[1])||G(s,"src",a),G(s,"alt","Копия фрейма"),G(s,"class","svelte-1qucpf4"),G(f,"class","svelte-1qucpf4"),G(m,"class","svelte-1qucpf4"),yn(b.src,v=sf)||G(b,"src",v),G(b,"alt","Скриншот страницы about:config"),G(b,"class","svelte-1qucpf4"),G(e,"class","svelte-1qucpf4")},m(A,k){O(A,e,k),V(e,t),V(t,n),V(e,r),V(e,s),V(e,o),V(e,l),V(l,u),V(l,f),V(f,c),V(l,h),V(l,m),V(m,d),V(l,p),V(e,_),V(e,b)},p(A,k){k&2&&!yn(s.src,a=A[1])&&G(s,"src",a)},d(A){A&&E(e)}}}function of(i){let e;return{c(){e=ue("Ваш браузер не поддерживает копирование")},l(t){e=fe(t,"Ваш браузер не поддерживает копирование")},m(t,n){O(t,e,n)},d(t){t&&E(e)}}}function lf(i){let e,t;return e=new on({props:{open:i[0]!=null,$$slots:{title:[of],default:[af]},$$scope:{ctx:i}}}),e.$on("close",i[3]),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&1&&(s.open=n[0]!=null),r&18&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function uf(i,e,t){let{fallbackBlob:n=null}=e,r=n,s="";Za(()=>{s&&URL.revokeObjectURL(s)});const a=()=>t(0,n=null);return i.$$set=o=>{"fallbackBlob"in o&&t(0,n=o.fallbackBlob)},i.$$.update=()=>{i.$$.dirty&7&&n!=r&&(s&&URL.revokeObjectURL(s),t(2,r=n),t(1,s=r?URL.createObjectURL(r):""))},[n,s,r,a]}class ff extends ke{constructor(e){super(),Ae(this,e,uf,lf,Ee,{fallbackBlob:0})}}function pi(i,e,t){const n=i.slice();return n[5]=e[t],n}const cf=i=>({tab:i&2}),_i=i=>({tab:i[5]});function gi(i,e,t){const n=i.slice();return n[5]=e[t],n}const hf=i=>({tab:i&2}),bi=i=>({tab:i[5]});function $i(i){let e,t,n,r,s;const a=i[3].default,o=Me(a,i,i[2],bi);function l(){return i[4](i[5])}return{c(){e=J("section"),o&&o.c(),t=oe(),this.h()},l(u){e=Q(u,"SECTION",{class:!0});var f=ie(e);o&&o.l(f),t=le(f),f.forEach(E),this.h()},h(){G(e,"class","tab svelte-lu853g"),it(e,"active",i[0]===i[5])},m(u,f){O(u,e,f),o&&o.m(e,null),V(e,t),n=!0,r||(s=Pe(e,"click",l),r=!0)},p(u,f){i=u,o&&o.p&&(!n||f&6)&&ze(o,a,i,i[2],n?Ue(a,i[2],f,hf):De(i[2]),bi),(!n||f&3)&&it(e,"active",i[0]===i[5])},i(u){n||(w(o,u),n=!0)},o(u){y(o,u),n=!1},d(u){u&&E(e),o&&o.d(u),r=!1,s()}}}function vi(i){let e,t,n;const r=i[3].content,s=Me(r,i,i[2],_i);return{c(){e=J("section"),s&&s.c(),t=oe(),this.h()},l(a){e=Q(a,"SECTION",{class:!0});var o=ie(e);s&&s.l(o),t=le(o),o.forEach(E),this.h()},h(){G(e,"class","content svelte-lu853g"),it(e,"hide",i[0]!==i[5])},m(a,o){O(a,e,o),s&&s.m(e,null),V(e,t),n=!0},p(a,o){s&&s.p&&(!n||o&6)&&ze(s,r,a,a[2],n?Ue(r,a[2],o,cf):De(a[2]),_i),(!n||o&3)&&it(e,"hide",a[0]!==a[5])},i(a){n||(w(s,a),n=!0)},o(a){y(s,a),n=!1},d(a){a&&E(e),s&&s.d(a)}}}function mf(i){let e,t,n,r,s=i[1],a=[];for(let c=0;c<s.length;c+=1)a[c]=$i(gi(i,s,c));const o=c=>y(a[c],1,1,()=>{a[c]=null});let l=i[1],u=[];for(let c=0;c<l.length;c+=1)u[c]=vi(pi(i,l,c));const f=c=>y(u[c],1,1,()=>{u[c]=null});return{c(){e=J("article"),t=J("header");for(let c=0;c<a.length;c+=1)a[c].c();n=oe();for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){e=Q(c,"ARTICLE",{class:!0});var h=ie(e);t=Q(h,"HEADER",{class:!0});var m=ie(t);for(let d=0;d<a.length;d+=1)a[d].l(m);m.forEach(E),n=le(h);for(let d=0;d<u.length;d+=1)u[d].l(h);h.forEach(E),this.h()},h(){G(t,"class","svelte-lu853g"),G(e,"class","svelte-lu853g")},m(c,h){O(c,e,h),V(e,t);for(let m=0;m<a.length;m+=1)a[m].m(t,null);V(e,n);for(let m=0;m<u.length;m+=1)u[m].m(e,null);r=!0},p(c,[h]){if(h&7){s=c[1];let m;for(m=0;m<s.length;m+=1){const d=gi(c,s,m);a[m]?(a[m].p(d,h),w(a[m],1)):(a[m]=$i(d),a[m].c(),w(a[m],1),a[m].m(t,null))}for(Ve(),m=s.length;m<a.length;m+=1)o(m);qe()}if(h&7){l=c[1];let m;for(m=0;m<l.length;m+=1){const d=pi(c,l,m);u[m]?(u[m].p(d,h),w(u[m],1)):(u[m]=vi(d),u[m].c(),w(u[m],1),u[m].m(e,null))}for(Ve(),m=l.length;m<u.length;m+=1)f(m);qe()}},i(c){if(!r){for(let h=0;h<s.length;h+=1)w(a[h]);for(let h=0;h<l.length;h+=1)w(u[h]);r=!0}},o(c){a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)y(a[h]);u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)y(u[h]);r=!1},d(c){c&&E(e),kn(a,c),kn(u,c)}}}function df(i,e,t){let{$$slots:n={},$$scope:r}=e,{tabs:s}=e,{activeTab:a=s[0]}=e;const o=l=>t(0,a=l);return i.$$set=l=>{"tabs"in l&&t(1,s=l.tabs),"activeTab"in l&&t(0,a=l.activeTab),"$$scope"in l&&t(2,r=l.$$scope)},i.$$.update=()=>{i.$$.dirty&3&&(s.includes(a)||t(0,a=s[0]))},[a,s,r,n,o]}class Ts extends ke{constructor(e){super(),Ae(this,e,df,mf,Ee,{tabs:1,activeTab:0})}}function wi(i,e,t){const n=i.slice();return n[9]=e[t],n[11]=t,n}const pf=i=>({item:i&2,index:i&2}),yi=i=>({item:i[9],index:i[11]});function Ei(i,e){let t,n,r,s,a;const o=e[5].default,l=Me(o,e,e[4],yi);function u(){return e[8](e[9])}return{key:i,first:null,c(){t=J("article"),l&&l.c(),n=oe(),this.h()},l(f){t=Q(f,"ARTICLE",{class:!0});var c=ie(t);l&&l.l(c),n=le(c),c.forEach(E),this.h()},h(){G(t,"class","item svelte-xsb8mb"),it(t,"active",e[9].id===e[0].id),this.first=t},m(f,c){O(f,t,c),l&&l.m(t,null),V(t,n),r=!0,s||(a=Pe(t,"click",u),s=!0)},p(f,c){e=f,l&&l.p&&(!r||c&18)&&ze(l,o,e,e[4],r?Ue(o,e[4],c,pf):De(e[4]),yi),(!r||c&3)&&it(t,"active",e[9].id===e[0].id)},i(f){r||(w(l,f),r=!0)},o(f){y(l,f),r=!1},d(f){f&&E(t),l&&l.d(f),s=!1,a()}}}function _f(i){let e,t=[],n=new Map,r,s,a,o=i[1];const l=u=>u[9].id;for(let u=0;u<o.length;u+=1){let f=wi(i,o,u),c=l(f);n.set(c,t[u]=Ei(c,f))}return{c(){e=J("main");for(let u=0;u<t.length;u+=1)t[u].c();this.h()},l(u){e=Q(u,"MAIN",{style:!0,class:!0});var f=ie(e);for(let c=0;c<t.length;c+=1)t[c].l(f);f.forEach(E),this.h()},h(){_t(e,"height",i[3]),_t(e,"min-height",i[3]),_t(e,"max-height",i[3]),G(e,"class","svelte-xsb8mb"),it(e,"reverse",i[2])},m(u,f){O(u,e,f);for(let c=0;c<t.length;c+=1)t[c].m(e,null);r=!0,s||(a=[Pe(e,"drop",i[6]),Pe(e,"dragover",i[7])],s=!0)},p(u,[f]){f&19&&(o=u[1],Ve(),t=Xa(t,f,l,1,u,o,n,e,Ka,Ei,null,wi),qe()),(!r||f&8)&&_t(e,"height",u[3]),(!r||f&8)&&_t(e,"min-height",u[3]),(!r||f&8)&&_t(e,"max-height",u[3]),(!r||f&4)&&it(e,"reverse",u[2])},i(u){if(!r){for(let f=0;f<o.length;f+=1)w(t[f]);r=!0}},o(u){for(let f=0;f<t.length;f+=1)y(t[f]);r=!1},d(u){u&&E(e);for(let f=0;f<t.length;f+=1)t[f].d();s=!1,ft(a)}}}function gf(i,e,t){let{$$slots:n={},$$scope:r}=e,{items:s}=e,{active:a}=e,{reverse:o=!1}=e,{height:l="100%"}=e;function u(h){ye.call(this,i,h)}function f(h){ye.call(this,i,h)}const c=h=>t(0,a=h);return i.$$set=h=>{"items"in h&&t(1,s=h.items),"active"in h&&t(0,a=h.active),"reverse"in h&&t(2,o=h.reverse),"height"in h&&t(3,l=h.height),"$$scope"in h&&t(4,r=h.$$scope)},[a,s,o,l,r,n,u,f,c]}class kr extends ke{constructor(e){super(),Ae(this,e,gf,_f,Ee,{items:1,active:0,reverse:2,height:3})}}function bf(i){let e,t,n,r,s,a;return{c(){e=J("article"),t=J("canvas"),n=oe(),r=J("canvas"),this.h()},l(o){e=Q(o,"ARTICLE",{class:!0});var l=ie(e);t=Q(l,"CANVAS",{class:!0}),ie(t).forEach(E),n=le(l),r=Q(l,"CANVAS",{class:!0}),ie(r).forEach(E),l.forEach(E),this.h()},h(){G(t,"class","svelte-flcf9e"),G(r,"class","svelte-flcf9e"),G(e,"class","svelte-flcf9e")},m(o,l){O(o,e,l),V(e,t),i[4](t),V(e,n),V(e,r),i[5](r),s||(a=[Pe(e,"dragover",i[2]),Pe(e,"drop",i[3])],s=!0)},p:nt,i:nt,o:nt,d(o){o&&E(e),i[4](null),i[5](null),s=!1,ft(a)}}}function $f(i,e,t){let{webgl:n}=e,{ui:r}=e;function s(u){ye.call(this,i,u)}function a(u){ye.call(this,i,u)}function o(u){ge[u?"unshift":"push"](()=>{n=u,t(0,n)})}function l(u){ge[u?"unshift":"push"](()=>{r=u,t(1,r)})}return i.$$set=u=>{"webgl"in u&&t(0,n=u.webgl),"ui"in u&&t(1,r=u.ui)},[n,r,s,a,o,l]}class vf extends ke{constructor(e){super(),Ae(this,e,$f,bf,Ee,{webgl:0,ui:1})}}function ki(i){let e,t;return{c(){e=J("div"),t=ue(i[0]),this.h()},l(n){e=Q(n,"DIV",{class:!0});var r=ie(e);t=fe(r,i[0]),r.forEach(E),this.h()},h(){G(e,"class","svelte-1q2eol")},m(n,r){O(n,e,r),V(e,t)},p(n,r){r&1&&ut(t,n[0])},d(n){n&&E(e)}}}function wf(i){let e,t,n;const r=i[3].default,s=Me(r,i,i[2],null);let a=i[0]&&ki(i);return{c(){e=J("label"),s&&s.c(),t=oe(),a&&a.c(),this.h()},l(o){e=Q(o,"LABEL",{for:!0,class:!0});var l=ie(e);s&&s.l(l),t=le(l),a&&a.l(l),l.forEach(E),this.h()},h(){G(e,"for",i[1]),G(e,"class","svelte-1q2eol"),it(e,"error",i[0])},m(o,l){O(o,e,l),s&&s.m(e,null),V(e,t),a&&a.m(e,null),n=!0},p(o,[l]){s&&s.p&&(!n||l&4)&&ze(s,r,o,o[2],n?Ue(r,o[2],l,null):De(o[2]),null),o[0]?a?a.p(o,l):(a=ki(o),a.c(),a.m(e,null)):a&&(a.d(1),a=null),(!n||l&2)&&G(e,"for",o[1]),(!n||l&1)&&it(e,"error",o[0])},i(o){n||(w(s,o),n=!0)},o(o){y(s,o),n=!1},d(o){o&&E(e),s&&s.d(o),a&&a.d()}}}function yf(i,e,t){let{$$slots:n={},$$scope:r}=e,{error:s=""}=e,{for:a=void 0}=e;return i.$$set=o=>{"error"in o&&t(0,s=o.error),"for"in o&&t(1,a=o.for),"$$scope"in o&&t(2,r=o.$$scope)},[s,a,r,n]}class Oe extends ke{constructor(e){super(),Ae(this,e,yf,wf,Ee,{error:0,for:1})}}function Ef(i){let e,t;return e=new nu({}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function kf(i){let e,t;return e=new Ss({}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Af(i){let e,t,n,r,s,a,o,l,u,f,c;return a=new st({props:{disablePadding:!0,title:i[9],$$slots:{default:[Ef]},$$scope:{ctx:i}}}),a.$on("mousedown",i[14]),a.$on("mouseup",i[15]),l=new st({props:{disablePadding:!0,title:i[9],$$slots:{default:[kf]},$$scope:{ctx:i}}}),l.$on("mousedown",i[16]),l.$on("mouseup",i[17]),{c(){e=J("main"),t=J("input"),r=oe(),s=J("footer"),B(a.$$.fragment),o=oe(),B(l.$$.fragment),this.h()},l(h){e=Q(h,"MAIN",{class:!0});var m=ie(e);t=Q(m,"INPUT",{class:!0}),r=le(m),s=Q(m,"FOOTER",{class:!0});var d=ie(s);M(a.$$.fragment,d),o=le(d),M(l.$$.fragment,d),d.forEach(E),m.forEach(E),this.h()},h(){t.value=n=i[0].toString(),G(t,"class","svelte-bxcbqd"),G(s,"class","svelte-bxcbqd"),G(e,"class","svelte-bxcbqd")},m(h,m){O(h,e,m),V(e,t),V(e,r),V(e,s),z(a,s,null),V(s,o),z(l,s,null),u=!0,f||(c=[Pe(t,"input",i[12]),Pe(t,"change",i[13])],f=!0)},p(h,[m]){(!u||m&1&&n!==(n=h[0].toString())&&t.value!==n)&&(t.value=n);const d={};m&1048576&&(d.$$scope={dirty:m,ctx:h}),a.$set(d);const p={};m&1048576&&(p.$$scope={dirty:m,ctx:h}),l.$set(p)},i(h){u||(w(a.$$.fragment,h),w(l.$$.fragment,h),u=!0)},o(h){y(a.$$.fragment,h),y(l.$$.fragment,h),u=!1},d(h){h&&E(e),D(a),D(l),f=!1,ft(c)}}}function Sf(i,e,t){let{value:n}=e,{min:r=-1/0}=e,{max:s=1/0}=e,{step:a=1}=e,{ctrlMultiplier:o=2}=e,{shiftMultiplier:l=5}=e;const u=Et();let f=-1,c=!1;function h(F){(!F||F.button===0)&&f!==-1&&(clearInterval(f),t(4,c=!1))}function m(F){let L=1;return F.ctrlKey&&(L*=o),F.shiftKey&&(L*=l),L}function d(F){t(0,n=+Math.min(s,Math.max(r,n+F)).toFixed(2)),u("input",n),u("change",n)}function p(F){h(),f=setInterval(()=>{t(4,c=!0),d(F)},100)}cn(()=>(document.addEventListener("mouseup",h),()=>document.removeEventListener("mouseup",h)));const _=`Шаг: ${a}
Ctrl: x${o}
Shift: x${l}`,b=F=>{const L=Number(F.currentTarget.value);if(Number.isNaN(L)){F.currentTarget.value=n.toString();return}t(0,n=Math.min(s,Math.max(r,L))),u("input",n)},v=F=>u("change",Number(F.currentTarget.value)),A=F=>{F.button==0&&p(-m(F)*a)},k=F=>{F.button==0&&(c||d(-m(F)*a))},N=F=>{F.button==0&&p(+m(F)*a)},T=F=>{F.button==0&&(c||d(+m(F)*a))};return i.$$set=F=>{"value"in F&&t(0,n=F.value),"min"in F&&t(1,r=F.min),"max"in F&&t(2,s=F.max),"step"in F&&t(3,a=F.step),"ctrlMultiplier"in F&&t(10,o=F.ctrlMultiplier),"shiftMultiplier"in F&&t(11,l=F.shiftMultiplier)},[n,r,s,a,c,u,m,d,p,_,o,l,b,v,A,k,N,T]}class Je extends ke{constructor(e){super(),Ae(this,e,Sf,Af,Ee,{value:0,min:1,max:2,step:3,ctrlMultiplier:10,shiftMultiplier:11})}}function Tf(i){const e=i-1;return e*e*e+1}function Ke(i,{delay:e=0,duration:t=400,easing:n=Tf}={}){const r=getComputedStyle(i),s=+r.opacity,a=parseFloat(r.height),o=parseFloat(r.paddingTop),l=parseFloat(r.paddingBottom),u=parseFloat(r.marginTop),f=parseFloat(r.marginBottom),c=parseFloat(r.borderTopWidth),h=parseFloat(r.borderBottomWidth);return{delay:e,duration:t,easing:n,css:m=>`overflow: hidden;opacity: ${Math.min(m*20,1)*s};height: ${m*a}px;padding-top: ${m*o}px;padding-bottom: ${m*l}px;margin-top: ${m*u}px;margin-bottom: ${m*f}px;border-top-width: ${m*c}px;border-bottom-width: ${m*h}px;`}}const If=i=>({}),Ai=i=>({}),Cf=i=>({}),Si=i=>({});function Ff(i){let e,t,n;const r=i[10].header,s=Me(r,i,i[15],Si);return t=new gl({}),{c(){s&&s.c(),e=oe(),B(t.$$.fragment)},l(a){s&&s.l(a),e=le(a),M(t.$$.fragment,a)},m(a,o){s&&s.m(a,o),O(a,e,o),z(t,a,o),n=!0},p(a,o){s&&s.p&&(!n||o&32768)&&ze(s,r,a,a[15],n?Ue(r,a[15],o,Cf):De(a[15]),Si)},i(a){n||(w(s,a),w(t.$$.fragment,a),n=!0)},o(a){y(s,a),y(t.$$.fragment,a),n=!1},d(a){s&&s.d(a),a&&E(e),D(t,a)}}}function Ti(i){let e,t,n,r,s,a;const o=i[10].content,l=Me(o,i,i[15],Ai);return{c(){e=J("article"),l&&l.c(),this.h()},l(u){e=Q(u,"ARTICLE",{style:!0,class:!0});var f=ie(e);l&&l.l(f),f.forEach(E),this.h()},h(){G(e,"style",t=`max-height:${i[7]}px;width:${i[6]}px;left:${i[9]}px;top:${i[8]}px;`),G(e,"class","svelte-1rlf41s")},m(u,f){O(u,e,f),l&&l.m(e,null),r=!0,s||(a=[Pe(e,"mouseover",i[13]),Pe(e,"mouseout",i[14])],s=!0)},p(u,f){l&&l.p&&(!r||f&32768)&&ze(l,o,u,u[15],r?Ue(o,u[15],f,If):De(u[15]),Ai),(!r||f&960&&t!==(t=`max-height:${u[7]}px;width:${u[6]}px;left:${u[9]}px;top:${u[8]}px;`))&&G(e,"style",t)},i(u){r||(w(l,u),gt(()=>{n||(n=Xe(e,Ke,{duration:150},!0)),n.run(1)}),r=!0)},o(u){y(l,u),n||(n=Xe(e,Ke,{duration:150},!1)),n.run(0),r=!1},d(u){u&&E(e),l&&l.d(u),u&&n&&n.end(),s=!1,ft(a)}}}function Rf(i){let e,t,n,r,s;t=new st({props:{title:i[0],type:i[1],style:`height:${i[3].height};width:${i[3].width};`,justifyContent:"space-between",$$slots:{default:[Ff]},$$scope:{ctx:i}}}),t.$on("click",i[11]),t.$on("focusout",i[12]);let a=(i[5]&&!i[2]||i[4])&&Ti(i);return{c(){e=J("main"),B(t.$$.fragment),n=oe(),a&&a.c(),this.h()},l(o){e=Q(o,"MAIN",{style:!0,class:!0});var l=ie(e);M(t.$$.fragment,l),n=le(l),a&&a.l(l),l.forEach(E),this.h()},h(){G(e,"style",r=`height:${i[3].height};width:${i[3].width};${i[3].main}`),G(e,"class","svelte-1rlf41s")},m(o,l){O(o,e,l),z(t,e,null),V(e,n),a&&a.m(e,null),s=!0},p(o,[l]){const u={};l&1&&(u.title=o[0]),l&2&&(u.type=o[1]),l&8&&(u.style=`height:${o[3].height};width:${o[3].width};`),l&32768&&(u.$$scope={dirty:l,ctx:o}),t.$set(u),o[5]&&!o[2]||o[4]?a?(a.p(o,l),l&52&&w(a,1)):(a=Ti(o),a.c(),w(a,1),a.m(e,null)):a&&(Ve(),y(a,1,1,()=>{a=null}),qe()),(!s||l&8&&r!==(r=`height:${o[3].height};width:${o[3].width};${o[3].main}`))&&G(e,"style",r)},i(o){s||(w(t.$$.fragment,o),w(a),s=!0)},o(o){y(t.$$.fragment,o),y(a),s=!1},d(o){o&&E(e),D(t),a&&a.d()}}}function Pf(i,e,t){let{$$slots:n={},$$scope:r}=e,{title:s=""}=e,{type:a="default"}=e,{hideOnClick:o=!1}=e,{css:l={height:"48px",width:"100%",main:""}}=e,u=!1,f=!1,c=0,h=0,m=0,d=0;const p=A=>{const k=A.currentTarget;if(!k)throw new Error("Not found target for button in drop down");if(!(k instanceof HTMLElement))throw new Error("Target for button is not html element");const N=k.getBoundingClientRect(),T=(visualViewport==null?void 0:visualViewport.height)||720;t(6,c=N.width),t(8,m=N.bottom),t(9,d=N.left),t(7,h=T-m),t(4,u=!u)},_=()=>setTimeout(()=>t(4,u=!1),100),b=()=>t(5,f=!0),v=()=>t(5,f=!1);return i.$$set=A=>{"title"in A&&t(0,s=A.title),"type"in A&&t(1,a=A.type),"hideOnClick"in A&&t(2,o=A.hideOnClick),"css"in A&&t(3,l=A.css),"$$scope"in A&&t(15,r=A.$$scope)},[s,a,o,l,u,f,c,h,m,d,n,p,_,b,v,r]}class Is extends ke{constructor(e){super(),Ae(this,e,Pf,Rf,Ee,{title:0,type:1,hideOnClick:2,css:3})}}const Nf=i=>({item:i&1}),Ii=i=>({item:i[0]});function Ci(i,e,t){const n=i.slice();return n[13]=e[t],n}const Bf=i=>({item:i&2}),Fi=i=>({item:i[13]});function Mf(i){let e;return{c(){e=ue(i[0])},l(t){e=fe(t,i[0])},m(t,n){O(t,e,n)},p(t,n){n&1&&ut(e,t[0])},d(t){t&&E(e)}}}function zf(i){let e;const t=i[8].default,n=Me(t,i,i[12],Ii),r=n||Mf(i);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,a){r&&r.m(s,a),e=!0},p(s,a){n?n.p&&(!e||a&4097)&&ze(n,t,s,s[12],e?Ue(t,s[12],a,Nf):De(s[12]),Ii):r&&r.p&&(!e||a&1)&&r.p(s,e?a:-1)},i(s){e||(w(r,s),e=!0)},o(s){y(r,s),e=!1},d(s){r&&r.d(s)}}}function Ri(i){let e,t,n,r,s,a,o,l;function u(...m){return i[11](i[13],...m)}const f=i[8].default,c=Me(f,i,i[12],Fi),h=c||Df(i);return{c(){e=J("label"),t=J("input"),r=oe(),h&&h.c(),s=oe(),this.h()},l(m){e=Q(m,"LABEL",{class:!0});var d=ie(e);t=Q(d,"INPUT",{type:!0,class:!0}),r=le(d),h&&h.l(d),s=le(d),d.forEach(E),this.h()},h(){G(t,"type","radio"),t.__value=n=i[13],t.value=t.__value,G(t,"class","svelte-1plfxql"),i[10][0].push(t),G(e,"class","svelte-1plfxql"),it(e,"active",i[13]===i[0])},m(m,d){O(m,e,d),V(e,t),t.checked=t.__value===i[0],V(e,r),h&&h.m(e,null),V(e,s),a=!0,o||(l=[Pe(t,"change",i[9]),Pe(t,"change",u)],o=!0)},p(m,d){i=m,(!a||d&2&&n!==(n=i[13]))&&(t.__value=n,t.value=t.__value),d&1&&(t.checked=t.__value===i[0]),c?c.p&&(!a||d&4098)&&ze(c,f,i,i[12],a?Ue(f,i[12],d,Bf):De(i[12]),Fi):h&&h.p&&(!a||d&2)&&h.p(i,a?d:-1),(!a||d&3)&&it(e,"active",i[13]===i[0])},i(m){a||(w(h,m),a=!0)},o(m){y(h,m),a=!1},d(m){m&&E(e),i[10][0].splice(i[10][0].indexOf(t),1),h&&h.d(m),o=!1,ft(l)}}}function Df(i){let e=i[13]+"",t;return{c(){t=ue(e)},l(n){t=fe(n,e)},m(n,r){O(n,t,r)},p(n,r){r&2&&e!==(e=n[13]+"")&&ut(t,e)},d(n){n&&E(t)}}}function Pi(i){let e,t,n=i[13]!=i[2]&&Ri(i);return{c(){n&&n.c(),e=Ze()},l(r){n&&n.l(r),e=Ze()},m(r,s){n&&n.m(r,s),O(r,e,s),t=!0},p(r,s){r[13]!=r[2]?n?(n.p(r,s),s&6&&w(n,1)):(n=Ri(r),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(Ve(),y(n,1,1,()=>{n=null}),qe())},i(r){t||(w(n),t=!0)},o(r){y(n),t=!1},d(r){n&&n.d(r),r&&E(e)}}}function Uf(i){let e,t,n=i[1],r=[];for(let a=0;a<n.length;a+=1)r[a]=Pi(Ci(i,n,a));const s=a=>y(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Ze()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Ze()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);O(a,e,o),t=!0},p(a,o){if(o&4231){n=a[1];let l;for(l=0;l<n.length;l+=1){const u=Ci(a,n,l);r[l]?(r[l].p(u,o),w(r[l],1)):(r[l]=Pi(u),r[l].c(),w(r[l],1),r[l].m(e.parentNode,e))}for(Ve(),l=n.length;l<r.length;l+=1)s(l);qe()}},i(a){if(!t){for(let o=0;o<n.length;o+=1)w(r[o]);t=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)y(r[o]);t=!1},d(a){kn(r,a),a&&E(e)}}}function Lf(i){let e,t;return e=new Is({props:{css:i[3],hideOnClick:i[4],type:i[5],title:i[6],$$slots:{content:[Uf],header:[zf]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&8&&(s.css=n[3]),r&16&&(s.hideOnClick=n[4]),r&32&&(s.type=n[5]),r&64&&(s.title=n[6]),r&4103&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Of(i,e,t){let{$$slots:n={},$$scope:r}=e,{value:s}=e,{items:a}=e,{placeholder:o=void 0}=e,{css:l={height:"48px",width:"100%",main:""}}=e,{hideOnClick:u=!1}=e,{type:f="default"}=e,{title:c=""}=e;const h=Et(),m=[[]];function d(){s=this.__value,t(0,s)}const p=(_,b)=>{b.currentTarget.checked&&h("change",{value:_})};return i.$$set=_=>{"value"in _&&t(0,s=_.value),"items"in _&&t(1,a=_.items),"placeholder"in _&&t(2,o=_.placeholder),"css"in _&&t(3,l=_.css),"hideOnClick"in _&&t(4,u=_.hideOnClick),"type"in _&&t(5,f=_.type),"title"in _&&t(6,c=_.title),"$$scope"in _&&t(12,r=_.$$scope)},[s,a,o,l,u,f,c,h,n,d,m,p,r]}class Tt extends ke{constructor(e){super(),Ae(this,e,Of,Lf,Ee,{value:0,items:1,placeholder:2,css:3,hideOnClick:4,type:5,title:6})}}const xf={width:220,height:220},Gf={width:660,height:440},jf={fill:{x:0,y:0},stroke:{x:1,y:0},shadow:{x:2,y:0},gear:{x:0,y:1},redo:{x:1,y:1},undo:{x:2,y:1}},Hf={cell:xf,atlas:Gf,images:jf},Wf=""+new URL("../assets/atlas.27b53d5d.webp",import.meta.url).href;function Vf(i){let e,t;return{c(){e=J("main"),this.h()},l(n){e=Q(n,"MAIN",{style:!0,class:!0}),ie(e).forEach(E),this.h()},h(){G(e,"style",t=`
width: ${i[1]}px;
height: ${i[1]}px;
background-image: url(${i[0]});
background-size: ${i[2]}px ${i[3]}px;
background-position: -${i[4]}px ${i[5]}px;
`),G(e,"class","svelte-1b6vt1p")},m(n,r){O(n,e,r)},p(n,[r]){r&63&&t!==(t=`
width: ${n[1]}px;
height: ${n[1]}px;
background-image: url(${n[0]});
background-size: ${n[2]}px ${n[3]}px;
background-position: -${n[4]}px ${n[5]}px;
`)&&G(e,"style",t)},i:nt,o:nt,d(n){n&&E(e)}}}function qf(i,e,t){let{atlasURL:n}=e,{atlasDescription:r}=e,{name:s}=e,{size:a}=e,o,l,u,f,c;return i.$$set=h=>{"atlasURL"in h&&t(0,n=h.atlasURL),"atlasDescription"in h&&t(6,r=h.atlasDescription),"name"in h&&t(7,s=h.name),"size"in h&&t(1,a=h.size)},i.$$.update=()=>{i.$$.dirty&450&&(t(8,o=r.images[s]),t(2,l=r.atlas.width/r.cell.width*a),t(3,u=r.atlas.height/r.cell.height*a),t(4,f=a*o.x),t(5,c=a*o.y))},[n,a,l,u,f,c,r,s,o]}class Zf extends ke{constructor(e){super(),Ae(this,e,qf,Vf,Ee,{atlasURL:0,atlasDescription:6,name:7,size:1})}}function Xf(i){let e,t;const n=i[1].default,r=Me(n,i,i[0],null);return{c(){e=J("article"),r&&r.c(),this.h()},l(s){e=Q(s,"ARTICLE",{class:!0});var a=ie(e);r&&r.l(a),a.forEach(E),this.h()},h(){G(e,"class","svelte-i0r9v3")},m(s,a){O(s,e,a),r&&r.m(e,null),t=!0},p(s,[a]){r&&r.p&&(!t||a&1)&&ze(r,n,s,s[0],t?Ue(n,s[0],a,null):De(s[0]),null)},i(s){t||(w(r,s),t=!0)},o(s){y(r,s),t=!1},d(s){s&&E(e),r&&r.d(s)}}}function Kf(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n]}class mt extends ke{constructor(e){super(),Ae(this,e,Kf,Xf,Ee,{})}}function Yf(i){let e,t,n,r;function s(o){i[2](o)}let a={step:i[1]};return i[0].x!==void 0&&(a.value=i[0].x),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[3]),{c(){e=ue("x "),B(t.$$.fragment)},l(o){e=fe(o,"x "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};l&2&&(u.step=o[1]),!n&&l&1&&(n=!0,u.value=o[0].x,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function Jf(i){let e,t,n,r;function s(o){i[4](o)}let a={step:i[1]};return i[0].y!==void 0&&(a.value=i[0].y),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[5]),{c(){e=ue("y "),B(t.$$.fragment)},l(o){e=fe(o,"y "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};l&2&&(u.step=o[1]),!n&&l&1&&(n=!0,u.value=o[0].y,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function Qf(i){let e,t,n,r;return e=new Oe({props:{$$slots:{default:[Yf]},$$scope:{ctx:i}}}),n=new Oe({props:{$$slots:{default:[Jf]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment),t=oe(),B(n.$$.fragment)},l(s){M(e.$$.fragment,s),t=le(s),M(n.$$.fragment,s)},m(s,a){z(e,s,a),O(s,t,a),z(n,s,a),r=!0},p(s,a){const o={};a&67&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&67&&(l.$$scope={dirty:a,ctx:s}),n.$set(l)},i(s){r||(w(e.$$.fragment,s),w(n.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),y(n.$$.fragment,s),r=!1},d(s){D(e,s),s&&E(t),D(n,s)}}}function ec(i){let e,t;return e=new mt({props:{$$slots:{default:[Qf]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&67&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function tc(i,e,t){let{value:n}=e,{step:r=1}=e;function s(u){i.$$.not_equal(n.x,u)&&(n.x=u,t(0,n))}function a(u){ye.call(this,i,u)}function o(u){i.$$.not_equal(n.y,u)&&(n.y=u,t(0,n))}function l(u){ye.call(this,i,u)}return i.$$set=u=>{"value"in u&&t(0,n=u.value),"step"in u&&t(1,r=u.step)},[n,r,s,a,o,l]}class Yt extends ke{constructor(e){super(),Ae(this,e,tc,ec,Ee,{value:0,step:1})}}function nc(i){let e,t,n,r;return{c(){e=ue("Цвет"),t=J("input"),this.h()},l(s){e=fe(s,"Цвет"),t=Q(s,"INPUT",{type:!0}),this.h()},h(){G(t,"type","color")},m(s,a){O(s,e,a),O(s,t,a),ht(t,i[0].color),n||(r=[Pe(t,"input",i[2]),Pe(t,"change",i[1])],n=!0)},p(s,a){a&1&&ht(t,s[0].color)},d(s){s&&E(e),s&&E(t),n=!1,ft(r)}}}function rc(i){let e,t,n,r;function s(o){i[3](o)}let a={};return i[0].offset!==void 0&&(a.value=i[0].offset),t=new Yt({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[4]),{c(){e=ue("Сдвиг"),B(t.$$.fragment)},l(o){e=fe(o,"Сдвиг"),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].offset,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function ic(i){let e,t,n,r;function s(o){i[5](o)}let a={min:0,max:1e3};return i[0].blur!==void 0&&(a.value=i[0].blur),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[6]),{c(){e=ue("Размытие"),B(t.$$.fragment)},l(o){e=fe(o,"Размытие"),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].blur,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function sc(i){let e,t,n,r,s,a;return e=new Oe({props:{$$slots:{default:[nc]},$$scope:{ctx:i}}}),n=new Oe({props:{$$slots:{default:[rc]},$$scope:{ctx:i}}}),s=new Oe({props:{$$slots:{default:[ic]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment),t=oe(),B(n.$$.fragment),r=oe(),B(s.$$.fragment)},l(o){M(e.$$.fragment,o),t=le(o),M(n.$$.fragment,o),r=le(o),M(s.$$.fragment,o)},m(o,l){z(e,o,l),O(o,t,l),z(n,o,l),O(o,r,l),z(s,o,l),a=!0},p(o,l){const u={};l&129&&(u.$$scope={dirty:l,ctx:o}),e.$set(u);const f={};l&129&&(f.$$scope={dirty:l,ctx:o}),n.$set(f);const c={};l&129&&(c.$$scope={dirty:l,ctx:o}),s.$set(c)},i(o){a||(w(e.$$.fragment,o),w(n.$$.fragment,o),w(s.$$.fragment,o),a=!0)},o(o){y(e.$$.fragment,o),y(n.$$.fragment,o),y(s.$$.fragment,o),a=!1},d(o){D(e,o),o&&E(t),D(n,o),o&&E(r),D(s,o)}}}function ac(i){let e,t;return e=new mt({props:{$$slots:{default:[sc]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&129&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function oc(i,e,t){let{value:n}=e;function r(f){ye.call(this,i,f)}function s(){n.color=this.value,t(0,n)}function a(f){i.$$.not_equal(n.offset,f)&&(n.offset=f,t(0,n))}function o(f){ye.call(this,i,f)}function l(f){i.$$.not_equal(n.blur,f)&&(n.blur=f,t(0,n))}function u(f){ye.call(this,i,f)}return i.$$set=f=>{"value"in f&&t(0,n=f.value)},[n,r,s,a,o,l,u]}class lc extends ke{constructor(e){super(),Ae(this,e,oc,ac,Ee,{value:0})}}function uc(i){let e,t,n,r;return{c(){e=ue("Цвет"),t=J("input"),this.h()},l(s){e=fe(s,"Цвет"),t=Q(s,"INPUT",{type:!0}),this.h()},h(){G(t,"type","color")},m(s,a){O(s,e,a),O(s,t,a),ht(t,i[0].value),n||(r=[Pe(t,"input",i[2]),Pe(t,"change",i[1])],n=!0)},p(s,a){a&1&&ht(t,s[0].value)},d(s){s&&E(e),s&&E(t),n=!1,ft(r)}}}function fc(i){let e,t;return e=new Oe({props:{$$slots:{default:[uc]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&9&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function cc(i){let e,t;return e=new mt({props:{$$slots:{default:[fc]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&9&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function hc(i,e,t){let{value:n}=e;function r(a){ye.call(this,i,a)}function s(){n.value=this.value,t(0,n)}return i.$$set=a=>{"value"in a&&t(0,n=a.value)},[n,r,s]}class mc extends ke{constructor(e){super(),Ae(this,e,hc,cc,Ee,{value:0})}}function dc(i){let e;const t=i[4].default,n=Me(t,i,i[6],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&64)&&ze(n,t,r,r[6],e?Ue(t,r[6],s,null):De(r[6]),null)},i(r){e||(w(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function pc(i){let e,t;return e=new st({props:{title:i[2],active:i[0],width:i[1],$$slots:{default:[dc]},$$scope:{ctx:i}}}),e.$on("click",i[5]),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&4&&(s.title=n[2]),r&1&&(s.active=n[0]),r&2&&(s.width=n[1]),r&64&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function _c(i,e,t){let{$$slots:n={},$$scope:r}=e,{value:s}=e,{width:a=""}=e,{title:o=""}=e;const l=Et(),u=()=>l("change",t(0,s=!s));return i.$$set=f=>{"value"in f&&t(0,s=f.value),"width"in f&&t(1,a=f.width),"title"in f&&t(2,o=f.title),"$$scope"in f&&t(6,r=f.$$scope)},[s,a,o,l,n,u,r]}class jn extends ke{constructor(e){super(),Ae(this,e,_c,pc,Ee,{value:0,width:1,title:2})}}function gc(i){let e;return{c(){e=ue("Выбрать файл...")},l(t){e=fe(t,"Выбрать файл...")},m(t,n){O(t,e,n)},d(t){t&&E(e)}}}function bc(i){let e,t,n,r,s,a,o;const l=i[5].default,u=Me(l,i,i[4],null),f=u||gc();return{c(){e=J("label"),f&&f.c(),t=oe(),n=J("input"),this.h()},l(c){e=Q(c,"LABEL",{class:!0});var h=ie(e);f&&f.l(h),t=le(h),n=Q(h,"INPUT",{accept:!0,type:!0,class:!0}),h.forEach(E),this.h()},h(){G(n,"accept",i[0]),G(n,"type","file"),G(n,"class","svelte-187m8cr"),G(e,"class",r=qn(i[2])+" svelte-187m8cr")},m(c,h){O(c,e,h),f&&f.m(e,null),V(e,t),V(e,n),s=!0,a||(o=Pe(n,"change",i[6]),a=!0)},p(c,[h]){u&&u.p&&(!s||h&16)&&ze(u,l,c,c[4],s?Ue(l,c[4],h,null):De(c[4]),null),(!s||h&1)&&G(n,"accept",c[0]),(!s||h&4&&r!==(r=qn(c[2])+" svelte-187m8cr"))&&G(e,"class",r)},i(c){s||(w(f,c),s=!0)},o(c){y(f,c),s=!1},d(c){c&&E(e),f&&f.d(c),a=!1,o()}}}function $c(i,e,t){let{$$slots:n={},$$scope:r}=e,{accept:s=void 0}=e,{typeFilter:a=/.*/}=e,{class:o=""}=e;const l=Et(),u=f=>{const c=f.currentTarget.files;if(!c||c.length===0)return;const h=Array.from(c).filter(m=>{var d;return(d=m.type)==null?void 0:d.match(a)});h.length!==0&&(l("change",h),f.currentTarget.value="")};return i.$$set=f=>{"accept"in f&&t(0,s=f.accept),"typeFilter"in f&&t(1,a=f.typeFilter),"class"in f&&t(2,o=f.class),"$$scope"in f&&t(4,r=f.$$scope)},[s,a,o,l,r,n,u]}class Ar extends ke{constructor(e){super(),Ae(this,e,$c,bc,Ee,{accept:0,typeFilter:1,class:2})}}function vc(i){let e;return{c(){e=ue("Выберите файл")},l(t){e=fe(t,"Выберите файл")},m(t,n){O(t,e,n)},d(t){t&&E(e)}}}function wc(i){let e,t;return e=new st({props:{$$slots:{default:[vc]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&32&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function yc(i){let e,t,n,r,s,a,o,l;return t=new Ar({props:{accept:i[0],typeFilter:i[1],$$slots:{default:[wc]},$$scope:{ctx:i}}}),t.$on("change",i[3]),{c(){e=J("main"),B(t.$$.fragment),n=oe(),r=J("span"),s=ue("или перетащите сюда."),this.h()},l(u){e=Q(u,"MAIN",{class:!0});var f=ie(e);M(t.$$.fragment,f),n=le(f),r=Q(f,"SPAN",{class:!0});var c=ie(r);s=fe(c,"или перетащите сюда."),c.forEach(E),f.forEach(E),this.h()},h(){G(r,"class","svelte-e7qrnw"),G(e,"class","svelte-e7qrnw")},m(u,f){O(u,e,f),z(t,e,null),V(e,n),V(e,r),V(r,s),a=!0,o||(l=[Pe(e,"dragover",Ec),Pe(e,"drop",i[2])],o=!0)},p(u,[f]){const c={};f&1&&(c.accept=u[0]),f&2&&(c.typeFilter=u[1]),f&32&&(c.$$scope={dirty:f,ctx:u}),t.$set(c)},i(u){a||(w(t.$$.fragment,u),a=!0)},o(u){y(t.$$.fragment,u),a=!1},d(u){u&&E(e),D(t),o=!1,ft(l)}}}const Ec=i=>i.preventDefault();function kc(i,e,t){let{accept:n=void 0}=e,{typeFilter:r=/.*/g}=e;const s=Et();function a(l){var c;l.preventDefault();const u=(c=l.dataTransfer)==null?void 0:c.files;if(!u)return;const f=Array.from(u).filter(h=>{var m;return(m=h.type)==null?void 0:m.match(r)});f.length&&s("change",f)}function o(l){ye.call(this,i,l)}return i.$$set=l=>{"accept"in l&&t(0,n=l.accept),"typeFilter"in l&&t(1,r=l.typeFilter)},[n,r,a,o]}class Ac extends ke{constructor(e){super(),Ae(this,e,kc,yc,Ee,{accept:0,typeFilter:1})}}function Ni(i){let e,t,n,r,s,a,o,l;return n=new Oe({props:{error:i[1],$$slots:{default:[Sc]},$$scope:{ctx:i}}}),{c(){e=J("section"),t=J("section"),B(n.$$.fragment),r=oe(),s=J("section"),a=J("img"),this.h()},l(u){e=Q(u,"SECTION",{class:!0});var f=ie(e);t=Q(f,"SECTION",{class:!0});var c=ie(t);M(n.$$.fragment,c),c.forEach(E),r=le(f),s=Q(f,"SECTION",{class:!0});var h=ie(s);a=Q(h,"IMG",{src:!0,alt:!0,class:!0}),h.forEach(E),f.forEach(E),this.h()},h(){G(t,"class","svelte-n6jyo5"),yn(a.src,o=i[4])||G(a,"src",o),G(a,"alt",i[5]),G(a,"class","svelte-n6jyo5"),G(s,"class","svelte-n6jyo5"),G(e,"class","preview svelte-n6jyo5")},m(u,f){O(u,e,f),V(e,t),z(n,t,null),V(e,r),V(e,s),V(s,a),l=!0},p(u,f){const c={};f&2&&(c.error=u[1]),f&131110&&(c.$$scope={dirty:f,ctx:u}),n.$set(c),(!l||f&16&&!yn(a.src,o=u[4]))&&G(a,"src",o),(!l||f&32)&&G(a,"alt",u[5])},i(u){l||(w(n.$$.fragment,u),l=!0)},o(u){y(n.$$.fragment,u),l=!1},d(u){u&&E(e),D(n)}}}function Sc(i){let e,t,n,r;return{c(){e=ue("Название "),t=J("input"),this.h()},l(s){e=fe(s,"Название "),t=Q(s,"INPUT",{class:!0}),this.h()},h(){G(t,"class","svelte-n6jyo5")},m(s,a){O(s,e,a),O(s,t,a),ht(t,i[5]),n||(r=[Pe(t,"input",i[11]),Pe(t,"input",i[12])],n=!0)},p(s,a){a&32&&t.value!==s[5]&&ht(t,s[5])},d(s){s&&E(e),s&&E(t),n=!1,ft(r)}}}function Tc(i){let e,t,n,r;e=new Ac({props:{accept:"image/*",typeFilter:/^image\//}}),e.$on("change",i[7]);let s=i[3]&&Ni(i);return{c(){B(e.$$.fragment),t=oe(),s&&s.c(),n=Ze()},l(a){M(e.$$.fragment,a),t=le(a),s&&s.l(a),n=Ze()},m(a,o){z(e,a,o),O(a,t,o),s&&s.m(a,o),O(a,n,o),r=!0},p(a,o){a[3]?s?(s.p(a,o),o&8&&w(s,1)):(s=Ni(a),s.c(),w(s,1),s.m(n.parentNode,n)):s&&(Ve(),y(s,1,1,()=>{s=null}),qe())},i(a){r||(w(e.$$.fragment,a),w(s),r=!0)},o(a){y(e.$$.fragment,a),y(s),r=!1},d(a){D(e,a),a&&E(t),s&&s.d(a),a&&E(n)}}}function Ic(i){let e,t,n,r,s,a;return t=new mt({props:{$$slots:{default:[Tc]},$$scope:{ctx:i}}}),{c(){e=J("article"),B(t.$$.fragment),n=oe(),r=J("section"),s=ue(`Добавленные паттерны пропадут между перезагрузками страницы, но их можно сохранить в .meme
			файле.`),this.h()},l(o){e=Q(o,"ARTICLE",{class:!0});var l=ie(e);M(t.$$.fragment,l),n=le(l),r=Q(l,"SECTION",{});var u=ie(r);s=fe(u,`Добавленные паттерны пропадут между перезагрузками страницы, но их можно сохранить в .meme
			файле.`),u.forEach(E),l.forEach(E),this.h()},h(){G(e,"class","svelte-n6jyo5")},m(o,l){O(o,e,l),z(t,e,null),V(e,n),V(e,r),V(r,s),a=!0},p(o,l){const u={};l&131134&&(u.$$scope={dirty:l,ctx:o}),t.$set(u)},i(o){a||(w(t.$$.fragment,o),a=!0)},o(o){y(t.$$.fragment,o),a=!1},d(o){o&&E(e),D(t)}}}function Cc(i){let e,t;return{c(){e=J("header"),t=ue("Добавить паттерн"),this.h()},l(n){e=Q(n,"HEADER",{slot:!0});var r=ie(e);t=fe(r,"Добавить паттерн"),r.forEach(E),this.h()},h(){G(e,"slot","title")},m(n,r){O(n,e,r),V(e,t)},p:nt,d(n){n&&E(e)}}}function Fc(i){let e;return{c(){e=ue("Отмена")},l(t){e=fe(t,"Отмена")},m(t,n){O(t,e,n)},d(t){t&&E(e)}}}function Rc(i){let e;return{c(){e=ue("Добавить")},l(t){e=fe(t,"Добавить")},m(t,n){O(t,e,n)},d(t){t&&E(e)}}}function Pc(i){let e,t,n,r,s;return t=new st({props:{width:"128px",type:"danger",$$slots:{default:[Fc]},$$scope:{ctx:i}}}),t.$on("click",i[10]),r=new st({props:{width:"128px",type:"primary",style:"margin-left:16px;",disabled:!i[5],$$slots:{default:[Rc]},$$scope:{ctx:i}}}),r.$on("click",i[9]),{c(){e=J("footer"),B(t.$$.fragment),n=oe(),B(r.$$.fragment),this.h()},l(a){e=Q(a,"FOOTER",{slot:!0,class:!0});var o=ie(e);M(t.$$.fragment,o),n=le(o),M(r.$$.fragment,o),o.forEach(E),this.h()},h(){G(e,"slot","footer"),G(e,"class","svelte-n6jyo5")},m(a,o){O(a,e,o),z(t,e,null),V(e,n),z(r,e,null),s=!0},p(a,o){const l={};o&131072&&(l.$$scope={dirty:o,ctx:a}),t.$set(l);const u={};o&32&&(u.disabled=!a[5]),o&131072&&(u.$$scope={dirty:o,ctx:a}),r.$set(u)},i(a){s||(w(t.$$.fragment,a),w(r.$$.fragment,a),s=!0)},o(a){y(t.$$.fragment,a),y(r.$$.fragment,a),s=!1},d(a){a&&E(e),D(t),D(r)}}}function Nc(i){let e,t,n;function r(a){i[13](a)}let s={$$slots:{footer:[Pc],title:[Cc],default:[Ic]},$$scope:{ctx:i}};return i[0]!==void 0&&(s.open=i[0]),e=new on({props:s}),ge.push(()=>$e(e,"open",r)),e.$on("close",i[8]),e.$on("paste",i[14]),{c(){B(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,o){z(e,a,o),n=!0},p(a,[o]){const l={};o&131134&&(l.$$scope={dirty:o,ctx:a}),!t&&o&1&&(t=!0,l.open=a[0],ve(()=>t=!1)),e.$set(l)},i(a){n||(w(e.$$.fragment,a),n=!0)},o(a){y(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function Bc(i,e,t){let{open:n=!0}=e,{error:r=""}=e,{validateName:s=()=>""}=e,a=null,o="",l="";function u(k){a!=k&&(o&&(URL.revokeObjectURL(o),t(4,o="")),t(3,a=k),a&&(t(4,o=URL.createObjectURL(a)),t(5,l=a.name.substring(0,a.name.lastIndexOf(".")))))}function f(k){var F,L;const N=document.activeElement;if(N instanceof HTMLInputElement||N instanceof HTMLTextAreaElement)return;const T=(F=k.clipboardData)==null?void 0:F.items;if(T)for(let P=0;P<T.length;P++){const U=T[P];if(!((L=U.type)!=null&&L.match(/^image/)))continue;const ae=U.getAsFile();ae&&u(ae);return}}function c(k){u(k.detail[0])}const h=Et();function m(k){var N;if(h("close",{action:"cancel"},{cancelable:!0})){t(0,n=!1);return}(N=k==null?void 0:k.preventDefault)==null||N.call(k)}function d(){if(!a)return;const k=s(l);if(k){t(1,r=k);return}h("submit",{action:"submit",image:a,name:l},{cancelable:!0})&&(t(0,n=!1),t(3,a=null),t(5,l=""),URL.revokeObjectURL(o),t(4,o=""))}cn(()=>()=>{o&&URL.revokeObjectURL(o)});const p=()=>m();function _(){l=this.value,t(5,l)}const b=()=>{t(1,r=s(l))};function v(k){n=k,t(0,n)}const A=k=>f(k.detail.event);return i.$$set=k=>{"open"in k&&t(0,n=k.open),"error"in k&&t(1,r=k.error),"validateName"in k&&t(2,s=k.validateName)},[n,r,s,a,o,l,f,c,m,d,p,_,b,v,A]}class Mc extends ke{constructor(e){super(),Ae(this,e,Bc,Nc,Ee,{open:0,error:1,validateName:2})}}class zc{constructor(e=new Array){Re(this,"subscribers",new Set);this.patterns=e}subscribe(e){return this.subscribers.add(e),e(this.patterns),()=>{this.subscribers.delete(e)}}addPattern(...e){this.patterns=this.patterns.filter(t=>!e.find(n=>n.name==t.name)),this.patterns.push(...e),this.subscribers.forEach(t=>t(this.patterns))}getTexture(e){const t=this.patterns.find(n=>n.name==e);if(!t)throw new Error(`Not found pattern '${e}'`);return t.textureId}has(e){return this.patterns.find(n=>n.name==e)!=null}delete(e){this.patterns.splice(this.patterns.findIndex(t=>t.name==e),1),this.subscribers.forEach(t=>t(this.patterns))}clear(){this.patterns=[],this.subscribers.forEach(e=>e(this.patterns))}}const wt=new zc;function Dc(i){let e=i[17]+"",t;return{c(){t=ue(e)},l(n){t=fe(n,e)},m(n,r){O(n,t,r)},p(n,r){r&131072&&e!==(e=n[17]+"")&&ut(t,e)},d(n){n&&E(t)}}}function Uc(i){let e,t;return e=new Ss({props:{size:28}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p:nt,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Lc(i){let e,t,n,r,s,a;function o(u){i[5](u)}let l={items:i[2].map(Mi),$$slots:{default:[Dc,({item:u})=>({17:u}),({item:u})=>u?131072:0]},$$scope:{ctx:i}};return i[0].name!==void 0&&(l.value=i[0].name),t=new Tt({props:l}),ge.push(()=>$e(t,"value",o)),s=new st({props:{title:"Добавить изображение как паттерн",width:"fin-content",$$slots:{default:[Uc]},$$scope:{ctx:i}}}),s.$on("click",i[6]),{c(){e=ue("Паттерн "),B(t.$$.fragment),r=oe(),B(s.$$.fragment)},l(u){e=fe(u,"Паттерн "),M(t.$$.fragment,u),r=le(u),M(s.$$.fragment,u)},m(u,f){O(u,e,f),z(t,u,f),O(u,r,f),z(s,u,f),a=!0},p(u,f){const c={};f&4&&(c.items=u[2].map(Mi)),f&393216&&(c.$$scope={dirty:f,ctx:u}),!n&&f&1&&(n=!0,c.value=u[0].name,ve(()=>n=!1)),t.$set(c);const h={};f&262144&&(h.$$scope={dirty:f,ctx:u}),s.$set(h)},i(u){a||(w(t.$$.fragment,u),w(s.$$.fragment,u),a=!0)},o(u){y(t.$$.fragment,u),y(s.$$.fragment,u),a=!1},d(u){u&&E(e),D(t,u),u&&E(r),D(s,u)}}}function Oc(i){let e,t,n,r;function s(o){i[7](o)}let a={min:-360,max:360,step:.5};return i[0].rotate!==void 0&&(a.value=i[0].rotate),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[8]),{c(){e=ue("Поворот "),B(t.$$.fragment)},l(o){e=fe(o,"Поворот "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].rotate,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function xc(i){let e,t,n,r;function s(o){i[9](o)}let a={};return i[0].shift!==void 0&&(a.value=i[0].shift),t=new Yt({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[10]),{c(){e=ue("Сдвиг"),B(t.$$.fragment)},l(o){e=fe(o,"Сдвиг"),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].shift,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function Gc(i){let e;return{c(){e=ue("Авто")},l(t){e=fe(t,"Авто")},m(t,n){O(t,e,n)},d(t){t&&E(e)}}}function jc(i){let e,t,n;return t=new jn({props:{title:"Авто = растягивать по прямоугольнику",value:i[0].scale==="font",$$slots:{default:[Gc]},$$scope:{ctx:i}}}),t.$on("change",i[11]),t.$on("change",i[12]),{c(){e=ue("Масштаб "),B(t.$$.fragment)},l(r){e=fe(r,"Масштаб "),M(t.$$.fragment,r)},m(r,s){O(r,e,s),z(t,r,s),n=!0},p(r,s){const a={};s&1&&(a.value=r[0].scale==="font"),s&262144&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){n||(w(t.$$.fragment,r),n=!0)},o(r){y(t.$$.fragment,r),n=!1},d(r){r&&E(e),D(t,r)}}}function Bi(i){let e,t;return e=new mt({props:{$$slots:{default:[Hc]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&262145&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Hc(i){let e,t,n;function r(a){i[13](a)}let s={step:.1};return i[0].scale!==void 0&&(s.value=i[0].scale),e=new Yt({props:s}),ge.push(()=>$e(e,"value",r)),e.$on("change",i[14]),{c(){B(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,o){z(e,a,o),n=!0},p(a,o){const l={};!t&&o&1&&(t=!0,l.value=a[0].scale,ve(()=>t=!1)),e.$set(l)},i(a){n||(w(e.$$.fragment,a),n=!0)},o(a){y(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function Wc(i){let e,t,n,r,s,a,o,l,u,f,c,h;e=new Oe({props:{for:"ignore",$$slots:{default:[Lc]},$$scope:{ctx:i}}}),n=new Oe({props:{$$slots:{default:[Oc]},$$scope:{ctx:i}}}),s=new Oe({props:{$$slots:{default:[xc]},$$scope:{ctx:i}}}),o=new Oe({props:{$$slots:{default:[jc]},$$scope:{ctx:i}}});let m=i[0].scale!=="font"&&Bi(i);function d(_){i[15](_)}let p={validateName:i[3]};return i[1]!==void 0&&(p.open=i[1]),f=new Mc({props:p}),ge.push(()=>$e(f,"open",d)),f.$on("submit",i[4]),{c(){B(e.$$.fragment),t=oe(),B(n.$$.fragment),r=oe(),B(s.$$.fragment),a=oe(),B(o.$$.fragment),l=oe(),m&&m.c(),u=oe(),B(f.$$.fragment)},l(_){M(e.$$.fragment,_),t=le(_),M(n.$$.fragment,_),r=le(_),M(s.$$.fragment,_),a=le(_),M(o.$$.fragment,_),l=le(_),m&&m.l(_),u=le(_),M(f.$$.fragment,_)},m(_,b){z(e,_,b),O(_,t,b),z(n,_,b),O(_,r,b),z(s,_,b),O(_,a,b),z(o,_,b),O(_,l,b),m&&m.m(_,b),O(_,u,b),z(f,_,b),h=!0},p(_,b){const v={};b&262151&&(v.$$scope={dirty:b,ctx:_}),e.$set(v);const A={};b&262145&&(A.$$scope={dirty:b,ctx:_}),n.$set(A);const k={};b&262145&&(k.$$scope={dirty:b,ctx:_}),s.$set(k);const N={};b&262145&&(N.$$scope={dirty:b,ctx:_}),o.$set(N),_[0].scale!=="font"?m?(m.p(_,b),b&1&&w(m,1)):(m=Bi(_),m.c(),w(m,1),m.m(u.parentNode,u)):m&&(Ve(),y(m,1,1,()=>{m=null}),qe());const T={};!c&&b&2&&(c=!0,T.open=_[1],ve(()=>c=!1)),f.$set(T)},i(_){h||(w(e.$$.fragment,_),w(n.$$.fragment,_),w(s.$$.fragment,_),w(o.$$.fragment,_),w(m),w(f.$$.fragment,_),h=!0)},o(_){y(e.$$.fragment,_),y(n.$$.fragment,_),y(s.$$.fragment,_),y(o.$$.fragment,_),y(m),y(f.$$.fragment,_),h=!1},d(_){D(e,_),_&&E(t),D(n,_),_&&E(r),D(s,_),_&&E(a),D(o,_),_&&E(l),m&&m.d(_),_&&E(u),D(f,_)}}}function Vc(i){let e,t;return e=new mt({props:{$$slots:{default:[Wc]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&262151&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}const Mi=i=>i.name;function qc(i,e,t){let n;St(i,wt,k=>t(2,n=k));let{value:r}=e;const s=Et();function a(k){return wt.has(k)?"Это имя уже занято":""}function o(k){s("addPattern",k.detail),t(0,r.name=k.detail.name,r)}let l=!1;function u(k){i.$$.not_equal(r.name,k)&&(r.name=k,t(0,r))}const f=()=>t(1,l=!0);function c(k){i.$$.not_equal(r.rotate,k)&&(r.rotate=k,t(0,r))}function h(k){ye.call(this,i,k)}function m(k){i.$$.not_equal(r.shift,k)&&(r.shift=k,t(0,r))}function d(k){ye.call(this,i,k)}const p=k=>t(0,r.scale=k.detail?"font":{x:1,y:1},r);function _(k){ye.call(this,i,k)}function b(k){i.$$.not_equal(r.scale,k)&&(r.scale=k,t(0,r))}function v(k){ye.call(this,i,k)}function A(k){l=k,t(1,l)}return i.$$set=k=>{"value"in k&&t(0,r=k.value)},[r,l,n,a,o,u,f,c,h,m,d,p,_,b,v,A]}class Zc extends ke{constructor(e){super(),Ae(this,e,qc,Vc,Ee,{value:0})}}function Xc(i){let e,t,n,r;return{c(){e=ue("Слева"),t=J("input"),this.h()},l(s){e=fe(s,"Слева"),t=Q(s,"INPUT",{type:!0}),this.h()},h(){G(t,"type","color")},m(s,a){O(s,e,a),O(s,t,a),ht(t,i[0].color1),n||(r=[Pe(t,"input",i[5]),Pe(t,"change",i[4])],n=!0)},p(s,a){a&1&&ht(t,s[0].color1)},d(s){s&&E(e),s&&E(t),n=!1,ft(r)}}}function Kc(i){let e,t,n,r;return{c(){e=ue("Справа"),t=J("input"),this.h()},l(s){e=fe(s,"Справа"),t=Q(s,"INPUT",{type:!0}),this.h()},h(){G(t,"type","color")},m(s,a){O(s,e,a),O(s,t,a),ht(t,i[0].color2),n||(r=[Pe(t,"input",i[6]),Pe(t,"change",i[3])],n=!0)},p(s,a){a&1&&ht(t,s[0].color2)},d(s){s&&E(e),s&&E(t),n=!1,ft(r)}}}function Yc(i){let e,t,n,r;return{c(){e=ue("Сверху"),t=J("input"),this.h()},l(s){e=fe(s,"Сверху"),t=Q(s,"INPUT",{type:!0}),this.h()},h(){G(t,"type","color")},m(s,a){O(s,e,a),O(s,t,a),ht(t,i[0].color3),n||(r=[Pe(t,"input",i[7]),Pe(t,"change",i[2])],n=!0)},p(s,a){a&1&&ht(t,s[0].color3)},d(s){s&&E(e),s&&E(t),n=!1,ft(r)}}}function Jc(i){let e,t,n,r;return{c(){e=ue("Снизу"),t=J("input"),this.h()},l(s){e=fe(s,"Снизу"),t=Q(s,"INPUT",{type:!0}),this.h()},h(){G(t,"type","color")},m(s,a){O(s,e,a),O(s,t,a),ht(t,i[0].color4),n||(r=[Pe(t,"input",i[8]),Pe(t,"change",i[1])],n=!0)},p(s,a){a&1&&ht(t,s[0].color4)},d(s){s&&E(e),s&&E(t),n=!1,ft(r)}}}function Qc(i){let e,t,n,r,s,a,o,l;return e=new Oe({props:{$$slots:{default:[Xc]},$$scope:{ctx:i}}}),n=new Oe({props:{$$slots:{default:[Kc]},$$scope:{ctx:i}}}),s=new Oe({props:{$$slots:{default:[Yc]},$$scope:{ctx:i}}}),o=new Oe({props:{$$slots:{default:[Jc]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment),t=oe(),B(n.$$.fragment),r=oe(),B(s.$$.fragment),a=oe(),B(o.$$.fragment)},l(u){M(e.$$.fragment,u),t=le(u),M(n.$$.fragment,u),r=le(u),M(s.$$.fragment,u),a=le(u),M(o.$$.fragment,u)},m(u,f){z(e,u,f),O(u,t,f),z(n,u,f),O(u,r,f),z(s,u,f),O(u,a,f),z(o,u,f),l=!0},p(u,f){const c={};f&513&&(c.$$scope={dirty:f,ctx:u}),e.$set(c);const h={};f&513&&(h.$$scope={dirty:f,ctx:u}),n.$set(h);const m={};f&513&&(m.$$scope={dirty:f,ctx:u}),s.$set(m);const d={};f&513&&(d.$$scope={dirty:f,ctx:u}),o.$set(d)},i(u){l||(w(e.$$.fragment,u),w(n.$$.fragment,u),w(s.$$.fragment,u),w(o.$$.fragment,u),l=!0)},o(u){y(e.$$.fragment,u),y(n.$$.fragment,u),y(s.$$.fragment,u),y(o.$$.fragment,u),l=!1},d(u){D(e,u),u&&E(t),D(n,u),u&&E(r),D(s,u),u&&E(a),D(o,u)}}}function eh(i){let e,t;return e=new mt({props:{$$slots:{default:[Qc]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&513&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function th(i,e,t){let{value:n}=e;function r(h){ye.call(this,i,h)}function s(h){ye.call(this,i,h)}function a(h){ye.call(this,i,h)}function o(h){ye.call(this,i,h)}function l(){n.color1=this.value,t(0,n)}function u(){n.color2=this.value,t(0,n)}function f(){n.color3=this.value,t(0,n)}function c(){n.color4=this.value,t(0,n)}return i.$$set=h=>{"value"in h&&t(0,n=h.value)},[n,r,s,a,o,l,u,f,c]}class nh extends ke{constructor(e){super(),Ae(this,e,th,eh,Ee,{value:0})}}function rh(i){let e,t,n,r;return{c(){e=J("textarea"),this.h()},l(s){e=Q(s,"TEXTAREA",{rows:!0,class:!0}),ie(e).forEach(E),this.h()},h(){var s,a;e.value=i[1],G(e,"rows",t=((a=(s=i[1])==null?void 0:s.split(`
`))==null?void 0:a.length)||1),G(e,"class","svelte-1g0ox8l")},m(s,a){O(s,e,a),n||(r=Pe(e,"change",i[2]),n=!0)},p(s,[a]){var o,l;a&2&&(e.value=s[1]),a&2&&t!==(t=((l=(o=s[1])==null?void 0:o.split(`
`))==null?void 0:l.length)||1)&&G(e,"rows",t)},i:nt,o:nt,d(s){s&&E(e),n=!1,r()}}}function ih(i,e,t){let{value:n}=e,r="";const s=a=>{try{t(0,n=JSON.parse(a.currentTarget.value))}catch(o){console.warn(o)}};return i.$$set=a=>{"value"in a&&t(0,n=a.value)},i.$$.update=()=>{i.$$.dirty&1&&t(1,r=JSON.stringify(n,void 0,4))},[n,r,s]}class Cs extends ke{constructor(e){super(),Ae(this,e,ih,rh,Ee,{value:0})}}function zi(i){const e=i[0].settings.type;i[19]=e}function sh(i){let e=i[2][i[20]]+"",t;return{c(){t=ue(e)},l(n){t=fe(n,e)},m(n,r){O(n,t,r)},p(n,r){r&1048576&&e!==(e=n[2][n[20]]+"")&&ut(t,e)},d(n){n&&E(t)}}}function Di(i){let e,t;return e=new mt({props:{$$slots:{default:[hh]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&2097153&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ah(i){let e,t,n,r,s;function a(l){i[13](l)}let o={};return i[0].settings!==void 0&&(o.value=i[0].settings),t=new Cs({props:o}),ge.push(()=>$e(t,"value",a)),{c(){e=J("div"),B(t.$$.fragment)},l(l){e=Q(l,"DIV",{});var u=ie(e);M(t.$$.fragment,u),u.forEach(E)},m(l,u){O(l,e,u),z(t,e,null),s=!0},p(l,u){const f={};!n&&u&1&&(n=!0,f.value=l[0].settings,ve(()=>n=!1)),t.$set(f)},i(l){s||(w(t.$$.fragment,l),l&&gt(()=>{r||(r=Xe(e,Ke,{},!0)),r.run(1)}),s=!0)},o(l){y(t.$$.fragment,l),l&&(r||(r=Xe(e,Ke,{},!1)),r.run(0)),s=!1},d(l){l&&E(e),D(t),l&&r&&r.end()}}}function oh(i){let e,t,n,r,s;function a(l){i[12](l)}let o={};return i[0].settings!==void 0&&(o.value=i[0].settings),t=new nh({props:o}),ge.push(()=>$e(t,"value",a)),{c(){e=J("div"),B(t.$$.fragment)},l(l){e=Q(l,"DIV",{});var u=ie(e);M(t.$$.fragment,u),u.forEach(E)},m(l,u){O(l,e,u),z(t,e,null),s=!0},p(l,u){const f={};!n&&u&1&&(n=!0,f.value=l[0].settings,ve(()=>n=!1)),t.$set(f)},i(l){s||(w(t.$$.fragment,l),l&&gt(()=>{r||(r=Xe(e,Ke,{},!0)),r.run(1)}),s=!0)},o(l){y(t.$$.fragment,l),l&&(r||(r=Xe(e,Ke,{},!1)),r.run(0)),s=!1},d(l){l&&E(e),D(t),l&&r&&r.end()}}}function lh(i){let e,t,n,r,s;function a(l){i[9](l)}let o={};return i[0].settings!==void 0&&(o.value=i[0].settings),t=new Zc({props:o}),ge.push(()=>$e(t,"value",a)),t.$on("change",i[10]),t.$on("addPattern",i[11]),{c(){e=J("div"),B(t.$$.fragment)},l(l){e=Q(l,"DIV",{});var u=ie(e);M(t.$$.fragment,u),u.forEach(E)},m(l,u){O(l,e,u),z(t,e,null),s=!0},p(l,u){const f={};!n&&u&1&&(n=!0,f.value=l[0].settings,ve(()=>n=!1)),t.$set(f)},i(l){s||(w(t.$$.fragment,l),l&&gt(()=>{r||(r=Xe(e,Ke,{},!0)),r.run(1)}),s=!0)},o(l){y(t.$$.fragment,l),l&&(r||(r=Xe(e,Ke,{},!1)),r.run(0)),s=!1},d(l){l&&E(e),D(t),l&&r&&r.end()}}}function uh(i){let e,t,n,r,s;function a(l){i[7](l)}let o={};return i[0].settings!==void 0&&(o.value=i[0].settings),t=new mc({props:o}),ge.push(()=>$e(t,"value",a)),t.$on("change",i[8]),{c(){e=J("div"),B(t.$$.fragment)},l(l){e=Q(l,"DIV",{});var u=ie(e);M(t.$$.fragment,u),u.forEach(E)},m(l,u){O(l,e,u),z(t,e,null),s=!0},p(l,u){const f={};!n&&u&1&&(n=!0,f.value=l[0].settings,ve(()=>n=!1)),t.$set(f)},i(l){s||(w(t.$$.fragment,l),l&&gt(()=>{r||(r=Xe(e,Ke,{},!0)),r.run(1)}),s=!0)},o(l){y(t.$$.fragment,l),l&&(r||(r=Xe(e,Ke,{},!1)),r.run(0)),s=!1},d(l){l&&E(e),D(t),l&&r&&r.end()}}}function fh(i){let e,t,n;return t=new Je({props:{min:0,max:100,step:1,value:100-i[0].alpha*100}}),t.$on("change",i[14]),t.$on("input",i[15]),{c(){e=ue("Прозрачность (%) "),B(t.$$.fragment)},l(r){e=fe(r,"Прозрачность (%) "),M(t.$$.fragment,r)},m(r,s){O(r,e,s),z(t,r,s),n=!0},p(r,s){const a={};s&1&&(a.value=100-r[0].alpha*100),t.$set(a)},i(r){n||(w(t.$$.fragment,r),n=!0)},o(r){y(t.$$.fragment,r),n=!1},d(r){r&&E(e),D(t,r)}}}function ch(i){let e,t,n,r,s;return{c(){e=ue("Тень "),t=J("input"),this.h()},l(a){e=fe(a,"Тень "),t=Q(a,"INPUT",{type:!0}),this.h()},h(){G(t,"type","checkbox"),t.checked=n=i[0].shadow!==void 0},m(a,o){O(a,e,o),O(a,t,o),r||(s=[Pe(t,"change",i[16]),Pe(t,"change",i[5])],r=!0)},p(a,o){o&1&&n!==(n=a[0].shadow!==void 0)&&(t.checked=n)},d(a){a&&E(e),a&&E(t),r=!1,ft(s)}}}function Ui(i){let e,t,n,r;function s(o){i[17](o)}let a={};return i[0].shadow!==void 0&&(a.value=i[0].shadow),t=new lc({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[18]),{c(){e=J("div"),B(t.$$.fragment)},l(o){e=Q(o,"DIV",{});var l=ie(e);M(t.$$.fragment,l),l.forEach(E)},m(o,l){O(o,e,l),z(t,e,null),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].shadow,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t)}}}function hh(i){zi(i);let e,t,n,r,s,a,o,l,u,f;const c=[uh,lh,oh,ah],h=[];function m(p,_){return p[19]==="color"?0:p[19]==="pattern"?1:p[19]==="gradient4"?2:3}e=m(i),t=h[e]=c[e](i),s=new Oe({props:{$$slots:{default:[fh]},$$scope:{ctx:i}}}),o=new Oe({props:{$$slots:{default:[ch]},$$scope:{ctx:i}}});let d=i[0].shadow&&Ui(i);return{c(){t.c(),n=oe(),r=J("div"),B(s.$$.fragment),a=oe(),B(o.$$.fragment),l=oe(),d&&d.c()},l(p){t.l(p),n=le(p),r=Q(p,"DIV",{});var _=ie(r);M(s.$$.fragment,_),a=le(_),M(o.$$.fragment,_),l=le(_),d&&d.l(_),_.forEach(E)},m(p,_){h[e].m(p,_),O(p,n,_),O(p,r,_),z(s,r,null),V(r,a),z(o,r,null),V(r,l),d&&d.m(r,null),f=!0},p(p,_){zi(p);let b=e;e=m(p),e===b?h[e].p(p,_):(Ve(),y(h[b],1,1,()=>{h[b]=null}),qe(),t=h[e],t?t.p(p,_):(t=h[e]=c[e](p),t.c()),w(t,1),t.m(n.parentNode,n));const v={};_&2097153&&(v.$$scope={dirty:_,ctx:p}),s.$set(v);const A={};_&2097153&&(A.$$scope={dirty:_,ctx:p}),o.$set(A),p[0].shadow?d?(d.p(p,_),_&1&&w(d,1)):(d=Ui(p),d.c(),w(d,1),d.m(r,null)):d&&(Ve(),y(d,1,1,()=>{d=null}),qe())},i(p){f||(w(t),w(s.$$.fragment,p),w(o.$$.fragment,p),w(d),p&&gt(()=>{u||(u=Xe(r,Ke,{},!0)),u.run(1)}),f=!0)},o(p){y(t),y(s.$$.fragment,p),y(o.$$.fragment,p),y(d),p&&(u||(u=Xe(r,Ke,{},!1)),u.run(0)),f=!1},d(p){h[e].d(p),p&&E(n),p&&E(r),D(s),D(o),d&&d.d(),p&&u&&u.end()}}}function mh(i){let e,t,n,r,s;n=new Tt({props:{value:i[0].settings.type,items:i[3],$$slots:{default:[sh,({item:o})=>({20:o}),({item:o})=>o?1048576:0]},$$scope:{ctx:i}}}),n.$on("change",i[1]),n.$on("change",i[6]);let a=i[0].settings.type!=="disabled"&&Di(i);return{c(){e=J("article"),t=J("header"),B(n.$$.fragment),r=oe(),a&&a.c(),this.h()},l(o){e=Q(o,"ARTICLE",{class:!0});var l=ie(e);t=Q(l,"HEADER",{});var u=ie(t);M(n.$$.fragment,u),u.forEach(E),r=le(l),a&&a.l(l),l.forEach(E),this.h()},h(){G(e,"class","svelte-1b7lwvz")},m(o,l){O(o,e,l),V(e,t),z(n,t,null),V(e,r),a&&a.m(e,null),s=!0},p(o,[l]){const u={};l&1&&(u.value=o[0].settings.type),l&3145728&&(u.$$scope={dirty:l,ctx:o}),n.$set(u),o[0].settings.type!=="disabled"?a?(a.p(o,l),l&1&&w(a,1)):(a=Di(o),a.c(),w(a,1),a.m(e,null)):a&&(Ve(),y(a,1,1,()=>{a=null}),qe())},i(o){s||(w(n.$$.fragment,o),w(a),s=!0)},o(o){y(n.$$.fragment,o),y(a),s=!1},d(o){o&&E(e),D(n),a&&a.d()}}}function dh(i,e,t){let{value:n}=e,{defaults:r}=e;function s(T){const F=r.find(L=>L.type===T.detail.value);if(!F)throw new Error(`Not found default value for type ${T.detail.value}`);t(0,n.settings=structuredClone(F),n)}const a={disabled:"Выключить",color:"Цвет",pattern:"Паттерн",gradient4:"Градиент (крестовой)"},o=Object.keys(a);function l(T){ye.call(this,i,T)}function u(T){ye.call(this,i,T)}function f(T){i.$$.not_equal(n.settings,T)&&(n.settings=T,t(0,n))}function c(T){ye.call(this,i,T)}function h(T){i.$$.not_equal(n.settings,T)&&(n.settings=T,t(0,n))}function m(T){ye.call(this,i,T)}function d(T){ye.call(this,i,T)}function p(T){i.$$.not_equal(n.settings,T)&&(n.settings=T,t(0,n))}function _(T){i.$$.not_equal(n.settings,T)&&(n.settings=T,t(0,n))}function b(T){ye.call(this,i,T)}const v=T=>{t(0,n.alpha=(100-T.detail)/100,n)},A=T=>{t(0,n.shadow=T.currentTarget.checked?{blur:10,color:"#000000",offset:{x:0,y:0}}:void 0,n)};function k(T){i.$$.not_equal(n.shadow,T)&&(n.shadow=T,t(0,n))}function N(T){ye.call(this,i,T)}return i.$$set=T=>{"value"in T&&t(0,n=T.value),"defaults"in T&&t(4,r=T.defaults)},[n,s,a,o,r,l,u,f,c,h,m,d,p,_,b,v,A,k,N]}class Fs extends ke{constructor(e){super(),Ae(this,e,dh,mh,Ee,{value:0,defaults:4})}}function Kt({italic:i,smallCaps:e,bold:t,family:n},r){return`${i?"italic":"normal"} ${e?"small-caps":"normal"} ${t?"bold":"normal"} ${r}px ${n}`}class Nn{constructor(e){Re(this,"subscribers",new Set);this.value=e}update(e){this.set(e(this.value))}subscribe(e){return e(this.value),this.subscribers.add(e),()=>{this.subscribers.delete(e)}}set(e){this.value=e,this.subscribers.forEach(t=>t(e))}}function an(i){return JSON.parse(JSON.stringify(i))}const Rs={case:"UPPER",align:"center",baseline:"middle",lineSpacing:-.125,fill:{settings:{type:"color",value:"#ffffff"},alpha:1},stroke:{settings:{type:"color",value:"#000000"},alpha:1},font:{bold:!1,family:"Impact",italic:!1,smallCaps:!1},strokeWidth:14,experimental:{}};function ph(i,e){return e.case=i.case,e.fill=an(i.fill),e.stroke=an(i.stroke),e.font=an(i.font),e}const _h=[{name:"TRUE IMPACT",case:"UPPER",fill:{settings:{type:"color",value:"#ffffff"},alpha:1},stroke:{settings:{type:"color",value:"#000000"},alpha:1},font:{bold:!1,family:"Impact",italic:!1,smallCaps:!1}},{name:"post-ironic lobster",case:"lower",fill:{settings:{type:"color",value:"#ffffff"},alpha:1,shadow:{color:"#000000",blur:15,offset:{x:0,y:0}}},stroke:{settings:{type:"disabled"},alpha:1},font:{bold:!1,family:"Lobster",italic:!1,smallCaps:!1}},{name:"Arial subtitles",case:"As is",fill:{settings:{type:"color",value:"#ffffff"},alpha:1},stroke:{settings:{type:"color",value:"#000000"},alpha:1},font:{bold:!1,family:"Arial",italic:!1,smallCaps:!1}},{name:"Arial bold subtitles",case:"As is",fill:{settings:{type:"color",value:"#ffffff"},alpha:1},stroke:{settings:{type:"color",value:"#000000"},alpha:1},font:{bold:!0,family:"Arial",italic:!1,smallCaps:!1}},{name:"Black Arial",case:"As is",fill:{settings:{type:"color",value:"#000000"},alpha:1},stroke:{settings:{type:"disabled"},alpha:1},font:{bold:!1,family:"Arial",italic:!1,smallCaps:!1}},{name:"Black Arial bold",case:"As is",fill:{settings:{type:"color",value:"#000000"},alpha:1},stroke:{settings:{type:"disabled"},alpha:1},font:{bold:!0,family:"Arial",italic:!1,smallCaps:!1}}],gh=An(_h);var Bn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mn(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ln={},bh={get exports(){return ln},set exports(i){ln=i}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(i,e){(function(t){i.exports=t()})(function(){return function t(n,r,s){function a(u,f){if(!r[u]){if(!n[u]){var c=typeof Mn=="function"&&Mn;if(!f&&c)return c(u,!0);if(o)return o(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var m=r[u]={exports:{}};n[u][0].call(m.exports,function(d){var p=n[u][1][d];return a(p||d)},m,m.exports,t,n,r,s)}return r[u].exports}for(var o=typeof Mn=="function"&&Mn,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(t,n,r){var s=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(l){for(var u,f,c,h,m,d,p,_=[],b=0,v=l.length,A=v,k=s.getTypeOf(l)!=="string";b<l.length;)A=v-b,c=k?(u=l[b++],f=b<v?l[b++]:0,b<v?l[b++]:0):(u=l.charCodeAt(b++),f=b<v?l.charCodeAt(b++):0,b<v?l.charCodeAt(b++):0),h=u>>2,m=(3&u)<<4|f>>4,d=1<A?(15&f)<<2|c>>6:64,p=2<A?63&c:64,_.push(o.charAt(h)+o.charAt(m)+o.charAt(d)+o.charAt(p));return _.join("")},r.decode=function(l){var u,f,c,h,m,d,p=0,_=0,b="data:";if(l.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var v,A=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&A--,l.charAt(l.length-2)===o.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=a.uint8array?new Uint8Array(0|A):new Array(0|A);p<l.length;)u=o.indexOf(l.charAt(p++))<<2|(h=o.indexOf(l.charAt(p++)))>>4,f=(15&h)<<4|(m=o.indexOf(l.charAt(p++)))>>2,c=(3&m)<<6|(d=o.indexOf(l.charAt(p++))),v[_++]=u,m!==64&&(v[_++]=f),d!==64&&(v[_++]=c);return v}},{"./support":30,"./utils":32}],2:[function(t,n,r){var s=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function u(f,c,h,m,d){this.compressedSize=f,this.uncompressedSize=c,this.crc32=h,this.compression=m,this.compressedContent=d}u.prototype={getContentWorker:function(){var f=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),c=this;return f.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(f,c,h){return f.pipe(new o).pipe(new l("uncompressedSize")).pipe(c.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",c)},n.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,r){var s=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,r){var s=t("./utils"),a=function(){for(var o,l=[],u=0;u<256;u++){o=u;for(var f=0;f<8;f++)o=1&o?3988292384^o>>>1:o>>>1;l[u]=o}return l}();n.exports=function(o,l){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(u,f,c,h){var m=a,d=h+c;u^=-1;for(var p=h;p<d;p++)u=u>>>8^m[255&(u^f[p])];return-1^u}(0|l,o,o.length,0):function(u,f,c,h){var m=a,d=h+c;u^=-1;for(var p=h;p<d;p++)u=u>>>8^m[255&(u^f.charCodeAt(p))];return-1^u}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(t,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,n,r){var s=null;s=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:s}},{lie:37}],7:[function(t,n,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),u=s?"uint8array":"array";function f(c,h){l.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=h,this.meta={}}r.magic="\b\0",o.inherits(f,l),f.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,c.data),!1)},f.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(h){c.push({data:h,meta:c.meta})}},r.compressWorker=function(c){return new f("Deflate",c)},r.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,r){function s(m,d){var p,_="";for(p=0;p<d;p++)_+=String.fromCharCode(255&m),m>>>=8;return _}function a(m,d,p,_,b,v){var A,k,N=m.file,T=m.compression,F=v!==u.utf8encode,L=o.transformTo("string",v(N.name)),P=o.transformTo("string",u.utf8encode(N.name)),U=N.comment,ae=o.transformTo("string",v(U)),I=o.transformTo("string",u.utf8encode(U)),C=P.length!==N.name.length,$=I.length!==U.length,Z="",we="",x="",de=N.dir,te=N.date,Te={crc32:0,compressedSize:0,uncompressedSize:0};d&&!p||(Te.crc32=m.crc32,Te.compressedSize=m.compressedSize,Te.uncompressedSize=m.uncompressedSize);var H=0;d&&(H|=8),F||!C&&!$||(H|=2048);var W=0,Y=0;de&&(W|=16),b==="UNIX"?(Y=798,W|=function(pe,se){var Se=pe;return pe||(Se=se?16893:33204),(65535&Se)<<16}(N.unixPermissions,de)):(Y=20,W|=function(pe){return 63&(pe||0)}(N.dosPermissions)),A=te.getUTCHours(),A<<=6,A|=te.getUTCMinutes(),A<<=5,A|=te.getUTCSeconds()/2,k=te.getUTCFullYear()-1980,k<<=4,k|=te.getUTCMonth()+1,k<<=5,k|=te.getUTCDate(),C&&(we=s(1,1)+s(f(L),4)+P,Z+="up"+s(we.length,2)+we),$&&(x=s(1,1)+s(f(ae),4)+I,Z+="uc"+s(x.length,2)+x);var ee="";return ee+=`
\0`,ee+=s(H,2),ee+=T.magic,ee+=s(A,2),ee+=s(k,2),ee+=s(Te.crc32,4),ee+=s(Te.compressedSize,4),ee+=s(Te.uncompressedSize,4),ee+=s(L.length,2),ee+=s(Z.length,2),{fileRecord:c.LOCAL_FILE_HEADER+ee+L+Z,dirRecord:c.CENTRAL_FILE_HEADER+s(Y,2)+ee+s(ae.length,2)+"\0\0\0\0"+s(W,4)+s(_,4)+L+Z+ae}}var o=t("../utils"),l=t("../stream/GenericWorker"),u=t("../utf8"),f=t("../crc32"),c=t("../signature");function h(m,d,p,_){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=d,this.zipPlatform=p,this.encodeFileName=_,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(h,l),h.prototype.push=function(m){var d=m.meta.percent||0,p=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:p?(d+100*(p-_-1))/p:100}}))},h.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var d=this.streamFiles&&!m.file.dir;if(d){var p=a(m,d,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(m){this.accumulate=!1;var d=this.streamFiles&&!m.file.dir,p=a(m,d,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),d)this.push({data:function(_){return c.DATA_DESCRIPTOR+s(_.crc32,4)+s(_.compressedSize,4)+s(_.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var m=this.bytesWritten,d=0;d<this.dirRecords.length;d++)this.push({data:this.dirRecords[d],meta:{percent:100}});var p=this.bytesWritten-m,_=function(b,v,A,k,N){var T=o.transformTo("string",N(k));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(b,2)+s(b,2)+s(v,4)+s(A,4)+s(T.length,2)+T}(this.dirRecords.length,p,m,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(m){this._sources.push(m);var d=this;return m.on("data",function(p){d.processChunk(p)}),m.on("end",function(){d.closedSource(d.previous.streamInfo),d._sources.length?d.prepareNextSource():d.end()}),m.on("error",function(p){d.error(p)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(m){var d=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var p=0;p<d.length;p++)try{d[p].error(m)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,d=0;d<m.length;d++)m[d].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,r){var s=t("../compressions"),a=t("./ZipFileWorker");r.generateWorker=function(o,l,u){var f=new a(l.streamFiles,u,l.platform,l.encodeFileName),c=0;try{o.forEach(function(h,m){c++;var d=function(v,A){var k=v||A,N=s[k];if(!N)throw new Error(k+" is not a valid compression method !");return N}(m.options.compression,l.compression),p=m.options.compressionOptions||l.compressionOptions||{},_=m.dir,b=m.date;m._compressWorker(d,p).withStreamInfo("file",{name:h,dir:_,date:b,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(f)}),f.entriesCount=c}catch(h){f.error(h)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=t("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,r){var s=t("./utils"),a=t("./external"),o=t("./utf8"),l=t("./zipEntries"),u=t("./stream/Crc32Probe"),f=t("./nodejsUtils");function c(h){return new a.Promise(function(m,d){var p=h.decompressed.getContentWorker().pipe(new u);p.on("error",function(_){d(_)}).on("end",function(){p.streamInfo.crc32!==h.decompressed.crc32?d(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}n.exports=function(h,m){var d=this;return m=s.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),f.isNode&&f.isStream(h)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,m.optimizedBinaryString,m.base64).then(function(p){var _=new l(m);return _.load(p),_}).then(function(p){var _=[a.Promise.resolve(p)],b=p.files;if(m.checkCRC32)for(var v=0;v<b.length;v++)_.push(c(b[v]));return a.Promise.all(_)}).then(function(p){for(var _=p.shift(),b=_.files,v=0;v<b.length;v++){var A=b[v],k=A.fileNameStr,N=s.resolve(A.fileNameStr);d.file(N,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:m.createFolders}),A.dir||(d.file(N).unsafeOriginalName=k)}return _.zipComment.length&&(d.comment=_.zipComment),d})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,r){var s=t("../utils"),a=t("../stream/GenericWorker");function o(l,u){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(o,a),o.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(f){u.push({data:f,meta:{percent:0}})}).on("error",function(f){u.isPaused?this.generatedError=f:u.error(f)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,r){var s=t("readable-stream").Readable;function a(o,l,u){s.call(this,l),this._helper=o;var f=this;o.on("data",function(c,h){f.push(c)||f._helper.pause(),u&&u(h)}).on("error",function(c){f.emit("error",c)}).on("end",function(){f.push(null)})}t("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,n,r){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,n,r){function s(N,T,F){var L,P=o.getTypeOf(T),U=o.extend(F||{},f);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(N=b(N)),U.createFolders&&(L=_(N))&&v.call(this,L,!0);var ae=P==="string"&&U.binary===!1&&U.base64===!1;F&&F.binary!==void 0||(U.binary=!ae),(T instanceof c&&T.uncompressedSize===0||U.dir||!T||T.length===0)&&(U.base64=!1,U.binary=!0,T="",U.compression="STORE",P="string");var I=null;I=T instanceof c||T instanceof l?T:d.isNode&&d.isStream(T)?new p(N,T):o.prepareContent(N,T,U.binary,U.optimizedBinaryString,U.base64);var C=new h(N,I,U);this.files[N]=C}var a=t("./utf8"),o=t("./utils"),l=t("./stream/GenericWorker"),u=t("./stream/StreamHelper"),f=t("./defaults"),c=t("./compressedObject"),h=t("./zipObject"),m=t("./generate"),d=t("./nodejsUtils"),p=t("./nodejs/NodejsStreamInputAdapter"),_=function(N){N.slice(-1)==="/"&&(N=N.substring(0,N.length-1));var T=N.lastIndexOf("/");return 0<T?N.substring(0,T):""},b=function(N){return N.slice(-1)!=="/"&&(N+="/"),N},v=function(N,T){return T=T!==void 0?T:f.createFolders,N=b(N),this.files[N]||s.call(this,N,null,{dir:!0,createFolders:T}),this.files[N]};function A(N){return Object.prototype.toString.call(N)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(N){var T,F,L;for(T in this.files)L=this.files[T],(F=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&N(F,L)},filter:function(N){var T=[];return this.forEach(function(F,L){N(F,L)&&T.push(L)}),T},file:function(N,T,F){if(arguments.length!==1)return N=this.root+N,s.call(this,N,T,F),this;if(A(N)){var L=N;return this.filter(function(U,ae){return!ae.dir&&L.test(U)})}var P=this.files[this.root+N];return P&&!P.dir?P:null},folder:function(N){if(!N)return this;if(A(N))return this.filter(function(P,U){return U.dir&&N.test(P)});var T=this.root+N,F=v.call(this,T),L=this.clone();return L.root=F.name,L},remove:function(N){N=this.root+N;var T=this.files[N];if(T||(N.slice(-1)!=="/"&&(N+="/"),T=this.files[N]),T&&!T.dir)delete this.files[N];else for(var F=this.filter(function(P,U){return U.name.slice(0,N.length)===N}),L=0;L<F.length;L++)delete this.files[F[L].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(N){var T,F={};try{if((F=o.extend(N||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=F.type.toLowerCase(),F.compression=F.compression.toUpperCase(),F.type==="binarystring"&&(F.type="string"),!F.type)throw new Error("No output type specified.");o.checkSupport(F.type),F.platform!=="darwin"&&F.platform!=="freebsd"&&F.platform!=="linux"&&F.platform!=="sunos"||(F.platform="UNIX"),F.platform==="win32"&&(F.platform="DOS");var L=F.comment||this.comment||"";T=m.generateWorker(this,F,L)}catch(P){(T=new l("error")).error(P)}return new u(T,F.type||"string",F.mimeType)},generateAsync:function(N,T){return this.generateInternalStream(N).accumulate(T)},generateNodeStream:function(N,T){return(N=N||{}).type||(N.type="nodebuffer"),this.generateInternalStream(N).toNodejsStream(T)}};n.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,r){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,r){var s=t("./DataReader");function a(o){s.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),u=o.charCodeAt(1),f=o.charCodeAt(2),c=o.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===u&&this.data[h+2]===f&&this.data[h+3]===c)return h-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),u=o.charCodeAt(1),f=o.charCodeAt(2),c=o.charCodeAt(3),h=this.readData(4);return l===h[0]&&u===h[1]&&f===h[2]&&c===h[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,n,r){var s=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,u=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=o,u},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=a},{"../utils":32}],19:[function(t,n,r){var s=t("./Uint8ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,r){var s=t("./DataReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,n,r){var s=t("./ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,r){var s=t("../utils"),a=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),u=t("./NodeBufferReader"),f=t("./Uint8ArrayReader");n.exports=function(c){var h=s.getTypeOf(c);return s.checkSupport(h),h!=="string"||a.uint8array?h==="nodebuffer"?new u(c):a.uint8array?new f(s.transformTo("uint8array",c)):new o(s.transformTo("array",c)):new l(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,r){var s=t("./GenericWorker"),a=t("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,r){var s=t("./GenericWorker"),a=t("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,s),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,r){var s=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,a),o.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}a.prototype.processChunk.call(this,l)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,r){var s=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(f){u.dataIsReady=!0,u.data=f,u.max=f&&f.length||0,u.type=s.getTypeOf(f),u.isPaused||u._tickAndRepeat()},function(f){u.error(f)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,r){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=s},{}],29:[function(t,n,r){var s=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),u=t("../support"),f=t("../external"),c=null;if(u.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(d,p){return new f.Promise(function(_,b){var v=[],A=d._internalType,k=d._outputType,N=d._mimeType;d.on("data",function(T,F){v.push(T),p&&p(F)}).on("error",function(T){v=[],b(T)}).on("end",function(){try{var T=function(F,L,P){switch(F){case"blob":return s.newBlob(s.transformTo("arraybuffer",L),P);case"base64":return l.encode(L);default:return s.transformTo(F,L)}}(k,function(F,L){var P,U=0,ae=null,I=0;for(P=0;P<L.length;P++)I+=L[P].length;switch(F){case"string":return L.join("");case"array":return Array.prototype.concat.apply([],L);case"uint8array":for(ae=new Uint8Array(I),P=0;P<L.length;P++)ae.set(L[P],U),U+=L[P].length;return ae;case"nodebuffer":return Buffer.concat(L);default:throw new Error("concat : unsupported type '"+F+"'")}}(A,v),N);_(T)}catch(F){b(F)}v=[]}).resume()})}function m(d,p,_){var b=p;switch(p){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=p,this._mimeType=_,s.checkSupport(b),this._worker=d.pipe(new a(b)),d.lock()}catch(v){this._worker=new o("error"),this._worker.error(v)}}m.prototype={accumulate:function(d){return h(this,d)},on:function(d,p){var _=this;return d==="data"?this._worker.on(d,function(b){p.call(_,b.data,b.meta)}):this._worker.on(d,function(){s.delay(p,arguments,_)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(d){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},d)}},n.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),r.blob=a.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,r){for(var s=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),u=new Array(256),f=0;f<256;f++)u[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;u[254]=u[254]=1;function c(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}r.utf8encode=function(m){return a.nodebuffer?o.newBufferFrom(m,"utf-8"):function(d){var p,_,b,v,A,k=d.length,N=0;for(v=0;v<k;v++)(64512&(_=d.charCodeAt(v)))==55296&&v+1<k&&(64512&(b=d.charCodeAt(v+1)))==56320&&(_=65536+(_-55296<<10)+(b-56320),v++),N+=_<128?1:_<2048?2:_<65536?3:4;for(p=a.uint8array?new Uint8Array(N):new Array(N),v=A=0;A<N;v++)(64512&(_=d.charCodeAt(v)))==55296&&v+1<k&&(64512&(b=d.charCodeAt(v+1)))==56320&&(_=65536+(_-55296<<10)+(b-56320),v++),_<128?p[A++]=_:(_<2048?p[A++]=192|_>>>6:(_<65536?p[A++]=224|_>>>12:(p[A++]=240|_>>>18,p[A++]=128|_>>>12&63),p[A++]=128|_>>>6&63),p[A++]=128|63&_);return p}(m)},r.utf8decode=function(m){return a.nodebuffer?s.transformTo("nodebuffer",m).toString("utf-8"):function(d){var p,_,b,v,A=d.length,k=new Array(2*A);for(p=_=0;p<A;)if((b=d[p++])<128)k[_++]=b;else if(4<(v=u[b]))k[_++]=65533,p+=v-1;else{for(b&=v===2?31:v===3?15:7;1<v&&p<A;)b=b<<6|63&d[p++],v--;1<v?k[_++]=65533:b<65536?k[_++]=b:(b-=65536,k[_++]=55296|b>>10&1023,k[_++]=56320|1023&b)}return k.length!==_&&(k.subarray?k=k.subarray(0,_):k.length=_),s.applyFromCharCode(k)}(m=s.transformTo(a.uint8array?"uint8array":"array",m))},s.inherits(c,l),c.prototype.processChunk=function(m){var d=s.transformTo(a.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var p=d;(d=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),d.set(p,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}var _=function(v,A){var k;for((A=A||v.length)>v.length&&(A=v.length),k=A-1;0<=k&&(192&v[k])==128;)k--;return k<0||k===0?A:k+u[v[k]]>A?k:A}(d),b=d;_!==d.length&&(a.uint8array?(b=d.subarray(0,_),this.leftOver=d.subarray(_,d.length)):(b=d.slice(0,_),this.leftOver=d.slice(_,d.length))),this.push({data:r.utf8decode(b),meta:m.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=c,s.inherits(h,l),h.prototype.processChunk=function(m){this.push({data:r.utf8encode(m.data),meta:m.meta})},r.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,r){var s=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),l=t("./external");function u(p){return p}function f(p,_){for(var b=0;b<p.length;++b)_[b]=255&p.charCodeAt(b);return _}t("setimmediate"),r.newBlob=function(p,_){r.checkSupport("blob");try{return new Blob([p],{type:_})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(p),b.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(p,_,b){var v=[],A=0,k=p.length;if(k<=b)return String.fromCharCode.apply(null,p);for(;A<k;)_==="array"||_==="nodebuffer"?v.push(String.fromCharCode.apply(null,p.slice(A,Math.min(A+b,k)))):v.push(String.fromCharCode.apply(null,p.subarray(A,Math.min(A+b,k)))),A+=b;return v.join("")},stringifyByChar:function(p){for(var _="",b=0;b<p.length;b++)_+=String.fromCharCode(p[b]);return _},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function h(p){var _=65536,b=r.getTypeOf(p),v=!0;if(b==="uint8array"?v=c.applyCanBeUsed.uint8array:b==="nodebuffer"&&(v=c.applyCanBeUsed.nodebuffer),v)for(;1<_;)try{return c.stringifyByChunk(p,b,_)}catch{_=Math.floor(_/2)}return c.stringifyByChar(p)}function m(p,_){for(var b=0;b<p.length;b++)_[b]=p[b];return _}r.applyFromCharCode=h;var d={};d.string={string:u,array:function(p){return f(p,new Array(p.length))},arraybuffer:function(p){return d.string.uint8array(p).buffer},uint8array:function(p){return f(p,new Uint8Array(p.length))},nodebuffer:function(p){return f(p,o.allocBuffer(p.length))}},d.array={string:h,array:u,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(p)}},d.arraybuffer={string:function(p){return h(new Uint8Array(p))},array:function(p){return m(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:u,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(new Uint8Array(p))}},d.uint8array={string:h,array:function(p){return m(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:u,nodebuffer:function(p){return o.newBufferFrom(p)}},d.nodebuffer={string:h,array:function(p){return m(p,new Array(p.length))},arraybuffer:function(p){return d.nodebuffer.uint8array(p).buffer},uint8array:function(p){return m(p,new Uint8Array(p.length))},nodebuffer:u},r.transformTo=function(p,_){if(_=_||"",!p)return _;r.checkSupport(p);var b=r.getTypeOf(_);return d[b][p](_)},r.resolve=function(p){for(var _=p.split("/"),b=[],v=0;v<_.length;v++){var A=_[v];A==="."||A===""&&v!==0&&v!==_.length-1||(A===".."?b.pop():b.push(A))}return b.join("/")},r.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(p)?"nodebuffer":s.uint8array&&p instanceof Uint8Array?"uint8array":s.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(p){if(!s[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(p){var _,b,v="";for(b=0;b<(p||"").length;b++)v+="\\x"+((_=p.charCodeAt(b))<16?"0":"")+_.toString(16).toUpperCase();return v},r.delay=function(p,_,b){setImmediate(function(){p.apply(b||null,_||[])})},r.inherits=function(p,_){function b(){}b.prototype=_.prototype,p.prototype=new b},r.extend=function(){var p,_,b={};for(p=0;p<arguments.length;p++)for(_ in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],_)&&b[_]===void 0&&(b[_]=arguments[p][_]);return b},r.prepareContent=function(p,_,b,v,A){return l.Promise.resolve(_).then(function(k){return s.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new l.Promise(function(N,T){var F=new FileReader;F.onload=function(L){N(L.target.result)},F.onerror=function(L){T(L.target.error)},F.readAsArrayBuffer(k)}):k}).then(function(k){var N=r.getTypeOf(k);return N?(N==="arraybuffer"?k=r.transformTo("uint8array",k):N==="string"&&(A?k=a.decode(k):b&&v!==!0&&(k=function(T){return f(T,s.uint8array?new Uint8Array(T.length):new Array(T.length))}(k))),k):l.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,r){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),l=t("./zipEntry"),u=t("./support");function f(c){this.files=[],this.loadOptions=c}f.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(h)+", expected "+a.pretty(c)+")")}},isSignature:function(c,h){var m=this.reader.index;this.reader.setIndex(c);var d=this.reader.readString(4)===h;return this.reader.setIndex(m),d},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),h=u.uint8array?"uint8array":"array",m=a.transformTo(h,c);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,h,m,d=this.zip64EndOfCentralSize-44;0<d;)c=this.reader.readInt(2),h=this.reader.readInt(4),m=this.reader.readData(h),this.zip64ExtensibleData[c]={id:c,length:h,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,h;for(c=0;c<this.files.length;c++)h=this.files[c],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(c=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var h=c;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var d=h-m;if(0<d)this.isSignature(h,o.CENTRAL_FILE_HEADER)||(this.reader.zero=d);else if(d<0)throw new Error("Corrupted zip: missing "+Math.abs(d)+" bytes.")},prepareReader:function(c){this.reader=s(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,r){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),u=t("./utf8"),f=t("./compressions"),c=t("./support");function h(m,d){this.options=m,this.loadOptions=d}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var d,p;if(m.skip(22),this.fileNameLength=m.readInt(2),p=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((d=function(_){for(var b in f)if(Object.prototype.hasOwnProperty.call(f,b)&&f[b].magic===_)return f[b];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,d,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var d=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(d),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var d,p,_,b=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<b;)d=m.readInt(2),p=m.readInt(2),_=m.readData(p),this.extraFields[d]={id:d,length:p,value:_};m.setIndex(b)},handleUTF8:function(){var m=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var d=this.findExtraFieldUnicodePath();if(d!==null)this.fileNameStr=d;else{var p=a.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var b=a.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var d=s(m.value);return d.readInt(1)!==1||l(this.fileName)!==d.readInt(4)?null:u.utf8decode(d.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var d=s(m.value);return d.readInt(1)!==1||l(this.fileComment)!==d.readInt(4)?null:u.utf8decode(d.readData(m.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,r){function s(d,p,_){this.name=d,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=p,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var a=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),l=t("./utf8"),u=t("./compressedObject"),f=t("./stream/GenericWorker");s.prototype={internalStream:function(d){var p=null,_="string";try{if(!d)throw new Error("No output type specified.");var b=(_=d.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),p=this._decompressWorker();var v=!this._dataBinary;v&&!b&&(p=p.pipe(new l.Utf8EncodeWorker)),!v&&b&&(p=p.pipe(new l.Utf8DecodeWorker))}catch(A){(p=new f("error")).error(A)}return new a(p,_,"")},async:function(d,p){return this.internalStream(d).accumulate(p)},nodeStream:function(d,p){return this.internalStream(d||"nodebuffer").toNodejsStream(p)},_compressWorker:function(d,p){if(this._data instanceof u&&this._data.compression.magic===d.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(_,d,p)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof f?this._data:new o(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<c.length;m++)s.prototype[c[m]]=h;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,r){(function(s){var a,o,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var u=0,f=new l(d),c=s.document.createTextNode("");f.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var p=s.document.createElement("script");p.onreadystatechange=function(){d(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},s.document.documentElement.appendChild(p)}:function(){setTimeout(d,0)};else{var h=new s.MessageChannel;h.port1.onmessage=d,a=function(){h.port2.postMessage(0)}}var m=[];function d(){var p,_;o=!0;for(var b=m.length;b;){for(_=m,m=[],p=-1;++p<b;)_[p]();b=m.length}o=!1}n.exports=function(p){m.push(p)!==1||o||a()}}).call(this,typeof Bn<"u"?Bn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,r){var s=t("immediate");function a(){}var o={},l=["REJECTED"],u=["FULFILLED"],f=["PENDING"];function c(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,b!==a&&p(this,b)}function h(b,v,A){this.promise=b,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function m(b,v,A){s(function(){var k;try{k=v(A)}catch(N){return o.reject(b,N)}k===b?o.reject(b,new TypeError("Cannot resolve promise with itself")):o.resolve(b,k)})}function d(b){var v=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof v=="function")return function(){v.apply(b,arguments)}}function p(b,v){var A=!1;function k(F){A||(A=!0,o.reject(b,F))}function N(F){A||(A=!0,o.resolve(b,F))}var T=_(function(){v(N,k)});T.status==="error"&&k(T.value)}function _(b,v){var A={};try{A.value=b(v),A.status="success"}catch(k){A.status="error",A.value=k}return A}(n.exports=c).prototype.finally=function(b){if(typeof b!="function")return this;var v=this.constructor;return this.then(function(A){return v.resolve(b()).then(function(){return A})},function(A){return v.resolve(b()).then(function(){throw A})})},c.prototype.catch=function(b){return this.then(null,b)},c.prototype.then=function(b,v){if(typeof b!="function"&&this.state===u||typeof v!="function"&&this.state===l)return this;var A=new this.constructor(a);return this.state!==f?m(A,this.state===u?b:v,this.outcome):this.queue.push(new h(A,b,v)),A},h.prototype.callFulfilled=function(b){o.resolve(this.promise,b)},h.prototype.otherCallFulfilled=function(b){m(this.promise,this.onFulfilled,b)},h.prototype.callRejected=function(b){o.reject(this.promise,b)},h.prototype.otherCallRejected=function(b){m(this.promise,this.onRejected,b)},o.resolve=function(b,v){var A=_(d,v);if(A.status==="error")return o.reject(b,A.value);var k=A.value;if(k)p(b,k);else{b.state=u,b.outcome=v;for(var N=-1,T=b.queue.length;++N<T;)b.queue[N].callFulfilled(v)}return b},o.reject=function(b,v){b.state=l,b.outcome=v;for(var A=-1,k=b.queue.length;++A<k;)b.queue[A].callRejected(v);return b},c.resolve=function(b){return b instanceof this?b:o.resolve(new this(a),b)},c.reject=function(b){var v=new this(a);return o.reject(v,b)},c.all=function(b){var v=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=b.length,k=!1;if(!A)return this.resolve([]);for(var N=new Array(A),T=0,F=-1,L=new this(a);++F<A;)P(b[F],F);return L;function P(U,ae){v.resolve(U).then(function(I){N[ae]=I,++T!==A||k||(k=!0,o.resolve(L,N))},function(I){k||(k=!0,o.reject(L,I))})}},c.race=function(b){var v=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=b.length,k=!1;if(!A)return this.resolve([]);for(var N=-1,T=new this(a);++N<A;)F=b[N],v.resolve(F).then(function(L){k||(k=!0,o.resolve(T,L))},function(L){k||(k=!0,o.reject(T,L))});var F;return T}},{immediate:36}],38:[function(t,n,r){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,r){var s=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),u=t("./zlib/zstream"),f=Object.prototype.toString,c=0,h=-1,m=0,d=8;function p(b){if(!(this instanceof p))return new p(b);this.options=a.assign({level:h,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},b||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var A=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(A!==c)throw new Error(l[A]);if(v.header&&s.deflateSetHeader(this.strm,v.header),v.dictionary){var k;if(k=typeof v.dictionary=="string"?o.string2buf(v.dictionary):f.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(A=s.deflateSetDictionary(this.strm,k))!==c)throw new Error(l[A]);this._dict_set=!0}}function _(b,v){var A=new p(v);if(A.push(b,!0),A.err)throw A.msg||l[A.err];return A.result}p.prototype.push=function(b,v){var A,k,N=this.strm,T=this.options.chunkSize;if(this.ended)return!1;k=v===~~v?v:v===!0?4:0,typeof b=="string"?N.input=o.string2buf(b):f.call(b)==="[object ArrayBuffer]"?N.input=new Uint8Array(b):N.input=b,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new a.Buf8(T),N.next_out=0,N.avail_out=T),(A=s.deflate(N,k))!==1&&A!==c)return this.onEnd(A),!(this.ended=!0);N.avail_out!==0&&(N.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(N.output,N.next_out))):this.onData(a.shrinkBuf(N.output,N.next_out)))}while((0<N.avail_in||N.avail_out===0)&&A!==1);return k===4?(A=s.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===c):k!==2||(this.onEnd(c),!(N.avail_out=0))},p.prototype.onData=function(b){this.chunks.push(b)},p.prototype.onEnd=function(b){b===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},r.Deflate=p,r.deflate=_,r.deflateRaw=function(b,v){return(v=v||{}).raw=!0,_(b,v)},r.gzip=function(b,v){return(v=v||{}).gzip=!0,_(b,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,r){var s=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),u=t("./zlib/messages"),f=t("./zlib/zstream"),c=t("./zlib/gzheader"),h=Object.prototype.toString;function m(p){if(!(this instanceof m))return new m(p);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},p||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||p&&p.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var b=s.inflateInit2(this.strm,_.windowBits);if(b!==l.Z_OK)throw new Error(u[b]);this.header=new c,s.inflateGetHeader(this.strm,this.header)}function d(p,_){var b=new m(_);if(b.push(p,!0),b.err)throw b.msg||u[b.err];return b.result}m.prototype.push=function(p,_){var b,v,A,k,N,T,F=this.strm,L=this.options.chunkSize,P=this.options.dictionary,U=!1;if(this.ended)return!1;v=_===~~_?_:_===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof p=="string"?F.input=o.binstring2buf(p):h.call(p)==="[object ArrayBuffer]"?F.input=new Uint8Array(p):F.input=p,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new a.Buf8(L),F.next_out=0,F.avail_out=L),(b=s.inflate(F,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&P&&(T=typeof P=="string"?o.string2buf(P):h.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,b=s.inflateSetDictionary(this.strm,T)),b===l.Z_BUF_ERROR&&U===!0&&(b=l.Z_OK,U=!1),b!==l.Z_STREAM_END&&b!==l.Z_OK)return this.onEnd(b),!(this.ended=!0);F.next_out&&(F.avail_out!==0&&b!==l.Z_STREAM_END&&(F.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=o.utf8border(F.output,F.next_out),k=F.next_out-A,N=o.buf2string(F.output,A),F.next_out=k,F.avail_out=L-k,k&&a.arraySet(F.output,F.output,A,k,0),this.onData(N)):this.onData(a.shrinkBuf(F.output,F.next_out)))),F.avail_in===0&&F.avail_out===0&&(U=!0)}while((0<F.avail_in||F.avail_out===0)&&b!==l.Z_STREAM_END);return b===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(b=s.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(F.avail_out=0))},m.prototype.onData=function(p){this.chunks.push(p)},m.prototype.onEnd=function(p){p===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},r.Inflate=m,r.inflate=d,r.inflateRaw=function(p,_){return(_=_||{}).raw=!0,d(p,_)},r.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var f=u.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var c in f)f.hasOwnProperty(c)&&(l[c]=f[c])}}return l},r.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var a={arraySet:function(l,u,f,c,h){if(u.subarray&&l.subarray)l.set(u.subarray(f,f+c),h);else for(var m=0;m<c;m++)l[h+m]=u[f+m]},flattenChunks:function(l){var u,f,c,h,m,d;for(u=c=0,f=l.length;u<f;u++)c+=l[u].length;for(d=new Uint8Array(c),u=h=0,f=l.length;u<f;u++)m=l[u],d.set(m,h),h+=m.length;return d}},o={arraySet:function(l,u,f,c,h){for(var m=0;m<c;m++)l[h+m]=u[f+m]},flattenChunks:function(l){return[].concat.apply([],l)}};r.setTyped=function(l){l?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(s)},{}],42:[function(t,n,r){var s=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function f(c,h){if(h<65537&&(c.subarray&&o||!c.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(c,h));for(var m="",d=0;d<h;d++)m+=String.fromCharCode(c[d]);return m}l[254]=l[254]=1,r.string2buf=function(c){var h,m,d,p,_,b=c.length,v=0;for(p=0;p<b;p++)(64512&(m=c.charCodeAt(p)))==55296&&p+1<b&&(64512&(d=c.charCodeAt(p+1)))==56320&&(m=65536+(m-55296<<10)+(d-56320),p++),v+=m<128?1:m<2048?2:m<65536?3:4;for(h=new s.Buf8(v),p=_=0;_<v;p++)(64512&(m=c.charCodeAt(p)))==55296&&p+1<b&&(64512&(d=c.charCodeAt(p+1)))==56320&&(m=65536+(m-55296<<10)+(d-56320),p++),m<128?h[_++]=m:(m<2048?h[_++]=192|m>>>6:(m<65536?h[_++]=224|m>>>12:(h[_++]=240|m>>>18,h[_++]=128|m>>>12&63),h[_++]=128|m>>>6&63),h[_++]=128|63&m);return h},r.buf2binstring=function(c){return f(c,c.length)},r.binstring2buf=function(c){for(var h=new s.Buf8(c.length),m=0,d=h.length;m<d;m++)h[m]=c.charCodeAt(m);return h},r.buf2string=function(c,h){var m,d,p,_,b=h||c.length,v=new Array(2*b);for(m=d=0;m<b;)if((p=c[m++])<128)v[d++]=p;else if(4<(_=l[p]))v[d++]=65533,m+=_-1;else{for(p&=_===2?31:_===3?15:7;1<_&&m<b;)p=p<<6|63&c[m++],_--;1<_?v[d++]=65533:p<65536?v[d++]=p:(p-=65536,v[d++]=55296|p>>10&1023,v[d++]=56320|1023&p)}return f(v,d)},r.utf8border=function(c,h){var m;for((h=h||c.length)>c.length&&(h=c.length),m=h-1;0<=m&&(192&c[m])==128;)m--;return m<0||m===0?h:m+l[c[m]]>h?m:h}},{"./common":41}],43:[function(t,n,r){n.exports=function(s,a,o,l){for(var u=65535&s|0,f=s>>>16&65535|0,c=0;o!==0;){for(o-=c=2e3<o?2e3:o;f=f+(u=u+a[l++]|0)|0,--c;);u%=65521,f%=65521}return u|f<<16|0}},{}],44:[function(t,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,r){var s=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();n.exports=function(a,o,l,u){var f=s,c=u+l;a^=-1;for(var h=u;h<c;h++)a=a>>>8^f[255&(a^o[h])];return-1^a}},{}],46:[function(t,n,r){var s,a=t("../utils/common"),o=t("./trees"),l=t("./adler32"),u=t("./crc32"),f=t("./messages"),c=0,h=4,m=0,d=-2,p=-1,_=4,b=2,v=8,A=9,k=286,N=30,T=19,F=2*k+1,L=15,P=3,U=258,ae=U+P+1,I=42,C=113,$=1,Z=2,we=3,x=4;function de(g,re){return g.msg=f[re],re}function te(g){return(g<<1)-(4<g?9:0)}function Te(g){for(var re=g.length;0<=--re;)g[re]=0}function H(g){var re=g.state,K=re.pending;K>g.avail_out&&(K=g.avail_out),K!==0&&(a.arraySet(g.output,re.pending_buf,re.pending_out,K,g.next_out),g.next_out+=K,re.pending_out+=K,g.total_out+=K,g.avail_out-=K,re.pending-=K,re.pending===0&&(re.pending_out=0))}function W(g,re){o._tr_flush_block(g,0<=g.block_start?g.block_start:-1,g.strstart-g.block_start,re),g.block_start=g.strstart,H(g.strm)}function Y(g,re){g.pending_buf[g.pending++]=re}function ee(g,re){g.pending_buf[g.pending++]=re>>>8&255,g.pending_buf[g.pending++]=255&re}function pe(g,re){var K,R,S=g.max_chain_length,j=g.strstart,ce=g.prev_length,me=g.nice_match,q=g.strstart>g.w_size-ae?g.strstart-(g.w_size-ae):0,_e=g.window,Ie=g.w_mask,be=g.prev,Be=g.strstart+U,Ye=_e[j+ce-1],Ge=_e[j+ce];g.prev_length>=g.good_match&&(S>>=2),me>g.lookahead&&(me=g.lookahead);do if(_e[(K=re)+ce]===Ge&&_e[K+ce-1]===Ye&&_e[K]===_e[j]&&_e[++K]===_e[j+1]){j+=2,K++;do;while(_e[++j]===_e[++K]&&_e[++j]===_e[++K]&&_e[++j]===_e[++K]&&_e[++j]===_e[++K]&&_e[++j]===_e[++K]&&_e[++j]===_e[++K]&&_e[++j]===_e[++K]&&_e[++j]===_e[++K]&&j<Be);if(R=U-(Be-j),j=Be-U,ce<R){if(g.match_start=re,me<=(ce=R))break;Ye=_e[j+ce-1],Ge=_e[j+ce]}}while((re=be[re&Ie])>q&&--S!=0);return ce<=g.lookahead?ce:g.lookahead}function se(g){var re,K,R,S,j,ce,me,q,_e,Ie,be=g.w_size;do{if(S=g.window_size-g.lookahead-g.strstart,g.strstart>=be+(be-ae)){for(a.arraySet(g.window,g.window,be,be,0),g.match_start-=be,g.strstart-=be,g.block_start-=be,re=K=g.hash_size;R=g.head[--re],g.head[re]=be<=R?R-be:0,--K;);for(re=K=be;R=g.prev[--re],g.prev[re]=be<=R?R-be:0,--K;);S+=be}if(g.strm.avail_in===0)break;if(ce=g.strm,me=g.window,q=g.strstart+g.lookahead,_e=S,Ie=void 0,Ie=ce.avail_in,_e<Ie&&(Ie=_e),K=Ie===0?0:(ce.avail_in-=Ie,a.arraySet(me,ce.input,ce.next_in,Ie,q),ce.state.wrap===1?ce.adler=l(ce.adler,me,Ie,q):ce.state.wrap===2&&(ce.adler=u(ce.adler,me,Ie,q)),ce.next_in+=Ie,ce.total_in+=Ie,Ie),g.lookahead+=K,g.lookahead+g.insert>=P)for(j=g.strstart-g.insert,g.ins_h=g.window[j],g.ins_h=(g.ins_h<<g.hash_shift^g.window[j+1])&g.hash_mask;g.insert&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[j+P-1])&g.hash_mask,g.prev[j&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=j,j++,g.insert--,!(g.lookahead+g.insert<P)););}while(g.lookahead<ae&&g.strm.avail_in!==0)}function Se(g,re){for(var K,R;;){if(g.lookahead<ae){if(se(g),g.lookahead<ae&&re===c)return $;if(g.lookahead===0)break}if(K=0,g.lookahead>=P&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+P-1])&g.hash_mask,K=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),K!==0&&g.strstart-K<=g.w_size-ae&&(g.match_length=pe(g,K)),g.match_length>=P)if(R=o._tr_tally(g,g.strstart-g.match_start,g.match_length-P),g.lookahead-=g.match_length,g.match_length<=g.max_lazy_match&&g.lookahead>=P){for(g.match_length--;g.strstart++,g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+P-1])&g.hash_mask,K=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart,--g.match_length!=0;);g.strstart++}else g.strstart+=g.match_length,g.match_length=0,g.ins_h=g.window[g.strstart],g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+1])&g.hash_mask;else R=o._tr_tally(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++;if(R&&(W(g,!1),g.strm.avail_out===0))return $}return g.insert=g.strstart<P-1?g.strstart:P-1,re===h?(W(g,!0),g.strm.avail_out===0?we:x):g.last_lit&&(W(g,!1),g.strm.avail_out===0)?$:Z}function Fe(g,re){for(var K,R,S;;){if(g.lookahead<ae){if(se(g),g.lookahead<ae&&re===c)return $;if(g.lookahead===0)break}if(K=0,g.lookahead>=P&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+P-1])&g.hash_mask,K=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),g.prev_length=g.match_length,g.prev_match=g.match_start,g.match_length=P-1,K!==0&&g.prev_length<g.max_lazy_match&&g.strstart-K<=g.w_size-ae&&(g.match_length=pe(g,K),g.match_length<=5&&(g.strategy===1||g.match_length===P&&4096<g.strstart-g.match_start)&&(g.match_length=P-1)),g.prev_length>=P&&g.match_length<=g.prev_length){for(S=g.strstart+g.lookahead-P,R=o._tr_tally(g,g.strstart-1-g.prev_match,g.prev_length-P),g.lookahead-=g.prev_length-1,g.prev_length-=2;++g.strstart<=S&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+P-1])&g.hash_mask,K=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),--g.prev_length!=0;);if(g.match_available=0,g.match_length=P-1,g.strstart++,R&&(W(g,!1),g.strm.avail_out===0))return $}else if(g.match_available){if((R=o._tr_tally(g,0,g.window[g.strstart-1]))&&W(g,!1),g.strstart++,g.lookahead--,g.strm.avail_out===0)return $}else g.match_available=1,g.strstart++,g.lookahead--}return g.match_available&&(R=o._tr_tally(g,0,g.window[g.strstart-1]),g.match_available=0),g.insert=g.strstart<P-1?g.strstart:P-1,re===h?(W(g,!0),g.strm.avail_out===0?we:x):g.last_lit&&(W(g,!1),g.strm.avail_out===0)?$:Z}function X(g,re,K,R,S){this.good_length=g,this.max_lazy=re,this.nice_length=K,this.max_chain=R,this.func=S}function Ne(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*F),this.dyn_dtree=new a.Buf16(2*(2*N+1)),this.bl_tree=new a.Buf16(2*(2*T+1)),Te(this.dyn_ltree),Te(this.dyn_dtree),Te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(L+1),this.heap=new a.Buf16(2*k+1),Te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*k+1),Te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ne(g){var re;return g&&g.state?(g.total_in=g.total_out=0,g.data_type=b,(re=g.state).pending=0,re.pending_out=0,re.wrap<0&&(re.wrap=-re.wrap),re.status=re.wrap?I:C,g.adler=re.wrap===2?0:1,re.last_flush=c,o._tr_init(re),m):de(g,d)}function xe(g){var re=ne(g);return re===m&&function(K){K.window_size=2*K.w_size,Te(K.head),K.max_lazy_match=s[K.level].max_lazy,K.good_match=s[K.level].good_length,K.nice_match=s[K.level].nice_length,K.max_chain_length=s[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=P-1,K.match_available=0,K.ins_h=0}(g.state),re}function ot(g,re,K,R,S,j){if(!g)return d;var ce=1;if(re===p&&(re=6),R<0?(ce=0,R=-R):15<R&&(ce=2,R-=16),S<1||A<S||K!==v||R<8||15<R||re<0||9<re||j<0||_<j)return de(g,d);R===8&&(R=9);var me=new Ne;return(g.state=me).strm=g,me.wrap=ce,me.gzhead=null,me.w_bits=R,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=S+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+P-1)/P),me.window=new a.Buf8(2*me.w_size),me.head=new a.Buf16(me.hash_size),me.prev=new a.Buf16(me.w_size),me.lit_bufsize=1<<S+6,me.pending_buf_size=4*me.lit_bufsize,me.pending_buf=new a.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=re,me.strategy=j,me.method=K,xe(g)}s=[new X(0,0,0,0,function(g,re){var K=65535;for(K>g.pending_buf_size-5&&(K=g.pending_buf_size-5);;){if(g.lookahead<=1){if(se(g),g.lookahead===0&&re===c)return $;if(g.lookahead===0)break}g.strstart+=g.lookahead,g.lookahead=0;var R=g.block_start+K;if((g.strstart===0||g.strstart>=R)&&(g.lookahead=g.strstart-R,g.strstart=R,W(g,!1),g.strm.avail_out===0)||g.strstart-g.block_start>=g.w_size-ae&&(W(g,!1),g.strm.avail_out===0))return $}return g.insert=0,re===h?(W(g,!0),g.strm.avail_out===0?we:x):(g.strstart>g.block_start&&(W(g,!1),g.strm.avail_out),$)}),new X(4,4,8,4,Se),new X(4,5,16,8,Se),new X(4,6,32,32,Se),new X(4,4,16,16,Fe),new X(8,16,32,32,Fe),new X(8,16,128,128,Fe),new X(8,32,128,256,Fe),new X(32,128,258,1024,Fe),new X(32,258,258,4096,Fe)],r.deflateInit=function(g,re){return ot(g,re,v,15,8,0)},r.deflateInit2=ot,r.deflateReset=xe,r.deflateResetKeep=ne,r.deflateSetHeader=function(g,re){return g&&g.state?g.state.wrap!==2?d:(g.state.gzhead=re,m):d},r.deflate=function(g,re){var K,R,S,j;if(!g||!g.state||5<re||re<0)return g?de(g,d):d;if(R=g.state,!g.output||!g.input&&g.avail_in!==0||R.status===666&&re!==h)return de(g,g.avail_out===0?-5:d);if(R.strm=g,K=R.last_flush,R.last_flush=re,R.status===I)if(R.wrap===2)g.adler=0,Y(R,31),Y(R,139),Y(R,8),R.gzhead?(Y(R,(R.gzhead.text?1:0)+(R.gzhead.hcrc?2:0)+(R.gzhead.extra?4:0)+(R.gzhead.name?8:0)+(R.gzhead.comment?16:0)),Y(R,255&R.gzhead.time),Y(R,R.gzhead.time>>8&255),Y(R,R.gzhead.time>>16&255),Y(R,R.gzhead.time>>24&255),Y(R,R.level===9?2:2<=R.strategy||R.level<2?4:0),Y(R,255&R.gzhead.os),R.gzhead.extra&&R.gzhead.extra.length&&(Y(R,255&R.gzhead.extra.length),Y(R,R.gzhead.extra.length>>8&255)),R.gzhead.hcrc&&(g.adler=u(g.adler,R.pending_buf,R.pending,0)),R.gzindex=0,R.status=69):(Y(R,0),Y(R,0),Y(R,0),Y(R,0),Y(R,0),Y(R,R.level===9?2:2<=R.strategy||R.level<2?4:0),Y(R,3),R.status=C);else{var ce=v+(R.w_bits-8<<4)<<8;ce|=(2<=R.strategy||R.level<2?0:R.level<6?1:R.level===6?2:3)<<6,R.strstart!==0&&(ce|=32),ce+=31-ce%31,R.status=C,ee(R,ce),R.strstart!==0&&(ee(R,g.adler>>>16),ee(R,65535&g.adler)),g.adler=1}if(R.status===69)if(R.gzhead.extra){for(S=R.pending;R.gzindex<(65535&R.gzhead.extra.length)&&(R.pending!==R.pending_buf_size||(R.gzhead.hcrc&&R.pending>S&&(g.adler=u(g.adler,R.pending_buf,R.pending-S,S)),H(g),S=R.pending,R.pending!==R.pending_buf_size));)Y(R,255&R.gzhead.extra[R.gzindex]),R.gzindex++;R.gzhead.hcrc&&R.pending>S&&(g.adler=u(g.adler,R.pending_buf,R.pending-S,S)),R.gzindex===R.gzhead.extra.length&&(R.gzindex=0,R.status=73)}else R.status=73;if(R.status===73)if(R.gzhead.name){S=R.pending;do{if(R.pending===R.pending_buf_size&&(R.gzhead.hcrc&&R.pending>S&&(g.adler=u(g.adler,R.pending_buf,R.pending-S,S)),H(g),S=R.pending,R.pending===R.pending_buf_size)){j=1;break}j=R.gzindex<R.gzhead.name.length?255&R.gzhead.name.charCodeAt(R.gzindex++):0,Y(R,j)}while(j!==0);R.gzhead.hcrc&&R.pending>S&&(g.adler=u(g.adler,R.pending_buf,R.pending-S,S)),j===0&&(R.gzindex=0,R.status=91)}else R.status=91;if(R.status===91)if(R.gzhead.comment){S=R.pending;do{if(R.pending===R.pending_buf_size&&(R.gzhead.hcrc&&R.pending>S&&(g.adler=u(g.adler,R.pending_buf,R.pending-S,S)),H(g),S=R.pending,R.pending===R.pending_buf_size)){j=1;break}j=R.gzindex<R.gzhead.comment.length?255&R.gzhead.comment.charCodeAt(R.gzindex++):0,Y(R,j)}while(j!==0);R.gzhead.hcrc&&R.pending>S&&(g.adler=u(g.adler,R.pending_buf,R.pending-S,S)),j===0&&(R.status=103)}else R.status=103;if(R.status===103&&(R.gzhead.hcrc?(R.pending+2>R.pending_buf_size&&H(g),R.pending+2<=R.pending_buf_size&&(Y(R,255&g.adler),Y(R,g.adler>>8&255),g.adler=0,R.status=C)):R.status=C),R.pending!==0){if(H(g),g.avail_out===0)return R.last_flush=-1,m}else if(g.avail_in===0&&te(re)<=te(K)&&re!==h)return de(g,-5);if(R.status===666&&g.avail_in!==0)return de(g,-5);if(g.avail_in!==0||R.lookahead!==0||re!==c&&R.status!==666){var me=R.strategy===2?function(q,_e){for(var Ie;;){if(q.lookahead===0&&(se(q),q.lookahead===0)){if(_e===c)return $;break}if(q.match_length=0,Ie=o._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++,Ie&&(W(q,!1),q.strm.avail_out===0))return $}return q.insert=0,_e===h?(W(q,!0),q.strm.avail_out===0?we:x):q.last_lit&&(W(q,!1),q.strm.avail_out===0)?$:Z}(R,re):R.strategy===3?function(q,_e){for(var Ie,be,Be,Ye,Ge=q.window;;){if(q.lookahead<=U){if(se(q),q.lookahead<=U&&_e===c)return $;if(q.lookahead===0)break}if(q.match_length=0,q.lookahead>=P&&0<q.strstart&&(be=Ge[Be=q.strstart-1])===Ge[++Be]&&be===Ge[++Be]&&be===Ge[++Be]){Ye=q.strstart+U;do;while(be===Ge[++Be]&&be===Ge[++Be]&&be===Ge[++Be]&&be===Ge[++Be]&&be===Ge[++Be]&&be===Ge[++Be]&&be===Ge[++Be]&&be===Ge[++Be]&&Be<Ye);q.match_length=U-(Ye-Be),q.match_length>q.lookahead&&(q.match_length=q.lookahead)}if(q.match_length>=P?(Ie=o._tr_tally(q,1,q.match_length-P),q.lookahead-=q.match_length,q.strstart+=q.match_length,q.match_length=0):(Ie=o._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++),Ie&&(W(q,!1),q.strm.avail_out===0))return $}return q.insert=0,_e===h?(W(q,!0),q.strm.avail_out===0?we:x):q.last_lit&&(W(q,!1),q.strm.avail_out===0)?$:Z}(R,re):s[R.level].func(R,re);if(me!==we&&me!==x||(R.status=666),me===$||me===we)return g.avail_out===0&&(R.last_flush=-1),m;if(me===Z&&(re===1?o._tr_align(R):re!==5&&(o._tr_stored_block(R,0,0,!1),re===3&&(Te(R.head),R.lookahead===0&&(R.strstart=0,R.block_start=0,R.insert=0))),H(g),g.avail_out===0))return R.last_flush=-1,m}return re!==h?m:R.wrap<=0?1:(R.wrap===2?(Y(R,255&g.adler),Y(R,g.adler>>8&255),Y(R,g.adler>>16&255),Y(R,g.adler>>24&255),Y(R,255&g.total_in),Y(R,g.total_in>>8&255),Y(R,g.total_in>>16&255),Y(R,g.total_in>>24&255)):(ee(R,g.adler>>>16),ee(R,65535&g.adler)),H(g),0<R.wrap&&(R.wrap=-R.wrap),R.pending!==0?m:1)},r.deflateEnd=function(g){var re;return g&&g.state?(re=g.state.status)!==I&&re!==69&&re!==73&&re!==91&&re!==103&&re!==C&&re!==666?de(g,d):(g.state=null,re===C?de(g,-3):m):d},r.deflateSetDictionary=function(g,re){var K,R,S,j,ce,me,q,_e,Ie=re.length;if(!g||!g.state||(j=(K=g.state).wrap)===2||j===1&&K.status!==I||K.lookahead)return d;for(j===1&&(g.adler=l(g.adler,re,Ie,0)),K.wrap=0,Ie>=K.w_size&&(j===0&&(Te(K.head),K.strstart=0,K.block_start=0,K.insert=0),_e=new a.Buf8(K.w_size),a.arraySet(_e,re,Ie-K.w_size,K.w_size,0),re=_e,Ie=K.w_size),ce=g.avail_in,me=g.next_in,q=g.input,g.avail_in=Ie,g.next_in=0,g.input=re,se(K);K.lookahead>=P;){for(R=K.strstart,S=K.lookahead-(P-1);K.ins_h=(K.ins_h<<K.hash_shift^K.window[R+P-1])&K.hash_mask,K.prev[R&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=R,R++,--S;);K.strstart=R,K.lookahead=P-1,se(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=P-1,K.match_available=0,g.next_in=me,g.input=q,g.avail_in=ce,K.wrap=j,m},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,r){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,r){n.exports=function(s,a){var o,l,u,f,c,h,m,d,p,_,b,v,A,k,N,T,F,L,P,U,ae,I,C,$,Z;o=s.state,l=s.next_in,$=s.input,u=l+(s.avail_in-5),f=s.next_out,Z=s.output,c=f-(a-s.avail_out),h=f+(s.avail_out-257),m=o.dmax,d=o.wsize,p=o.whave,_=o.wnext,b=o.window,v=o.hold,A=o.bits,k=o.lencode,N=o.distcode,T=(1<<o.lenbits)-1,F=(1<<o.distbits)-1;e:do{A<15&&(v+=$[l++]<<A,A+=8,v+=$[l++]<<A,A+=8),L=k[v&T];t:for(;;){if(v>>>=P=L>>>24,A-=P,(P=L>>>16&255)===0)Z[f++]=65535&L;else{if(!(16&P)){if(!(64&P)){L=k[(65535&L)+(v&(1<<P)-1)];continue t}if(32&P){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}U=65535&L,(P&=15)&&(A<P&&(v+=$[l++]<<A,A+=8),U+=v&(1<<P)-1,v>>>=P,A-=P),A<15&&(v+=$[l++]<<A,A+=8,v+=$[l++]<<A,A+=8),L=N[v&F];n:for(;;){if(v>>>=P=L>>>24,A-=P,!(16&(P=L>>>16&255))){if(!(64&P)){L=N[(65535&L)+(v&(1<<P)-1)];continue n}s.msg="invalid distance code",o.mode=30;break e}if(ae=65535&L,A<(P&=15)&&(v+=$[l++]<<A,(A+=8)<P&&(v+=$[l++]<<A,A+=8)),m<(ae+=v&(1<<P)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(v>>>=P,A-=P,(P=f-c)<ae){if(p<(P=ae-P)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(C=b,(I=0)===_){if(I+=d-P,P<U){for(U-=P;Z[f++]=b[I++],--P;);I=f-ae,C=Z}}else if(_<P){if(I+=d+_-P,(P-=_)<U){for(U-=P;Z[f++]=b[I++],--P;);if(I=0,_<U){for(U-=P=_;Z[f++]=b[I++],--P;);I=f-ae,C=Z}}}else if(I+=_-P,P<U){for(U-=P;Z[f++]=b[I++],--P;);I=f-ae,C=Z}for(;2<U;)Z[f++]=C[I++],Z[f++]=C[I++],Z[f++]=C[I++],U-=3;U&&(Z[f++]=C[I++],1<U&&(Z[f++]=C[I++]))}else{for(I=f-ae;Z[f++]=Z[I++],Z[f++]=Z[I++],Z[f++]=Z[I++],2<(U-=3););U&&(Z[f++]=Z[I++],1<U&&(Z[f++]=Z[I++]))}break}}break}}while(l<u&&f<h);l-=U=A>>3,v&=(1<<(A-=U<<3))-1,s.next_in=l,s.next_out=f,s.avail_in=l<u?u-l+5:5-(l-u),s.avail_out=f<h?h-f+257:257-(f-h),o.hold=v,o.bits=A}},{}],49:[function(t,n,r){var s=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),l=t("./inffast"),u=t("./inftrees"),f=1,c=2,h=0,m=-2,d=1,p=852,_=592;function b(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(I){var C;return I&&I.state?(C=I.state,I.total_in=I.total_out=C.total=0,I.msg="",C.wrap&&(I.adler=1&C.wrap),C.mode=d,C.last=0,C.havedict=0,C.dmax=32768,C.head=null,C.hold=0,C.bits=0,C.lencode=C.lendyn=new s.Buf32(p),C.distcode=C.distdyn=new s.Buf32(_),C.sane=1,C.back=-1,h):m}function k(I){var C;return I&&I.state?((C=I.state).wsize=0,C.whave=0,C.wnext=0,A(I)):m}function N(I,C){var $,Z;return I&&I.state?(Z=I.state,C<0?($=0,C=-C):($=1+(C>>4),C<48&&(C&=15)),C&&(C<8||15<C)?m:(Z.window!==null&&Z.wbits!==C&&(Z.window=null),Z.wrap=$,Z.wbits=C,k(I))):m}function T(I,C){var $,Z;return I?(Z=new v,(I.state=Z).window=null,($=N(I,C))!==h&&(I.state=null),$):m}var F,L,P=!0;function U(I){if(P){var C;for(F=new s.Buf32(512),L=new s.Buf32(32),C=0;C<144;)I.lens[C++]=8;for(;C<256;)I.lens[C++]=9;for(;C<280;)I.lens[C++]=7;for(;C<288;)I.lens[C++]=8;for(u(f,I.lens,0,288,F,0,I.work,{bits:9}),C=0;C<32;)I.lens[C++]=5;u(c,I.lens,0,32,L,0,I.work,{bits:5}),P=!1}I.lencode=F,I.lenbits=9,I.distcode=L,I.distbits=5}function ae(I,C,$,Z){var we,x=I.state;return x.window===null&&(x.wsize=1<<x.wbits,x.wnext=0,x.whave=0,x.window=new s.Buf8(x.wsize)),Z>=x.wsize?(s.arraySet(x.window,C,$-x.wsize,x.wsize,0),x.wnext=0,x.whave=x.wsize):(Z<(we=x.wsize-x.wnext)&&(we=Z),s.arraySet(x.window,C,$-Z,we,x.wnext),(Z-=we)?(s.arraySet(x.window,C,$-Z,Z,0),x.wnext=Z,x.whave=x.wsize):(x.wnext+=we,x.wnext===x.wsize&&(x.wnext=0),x.whave<x.wsize&&(x.whave+=we))),0}r.inflateReset=k,r.inflateReset2=N,r.inflateResetKeep=A,r.inflateInit=function(I){return T(I,15)},r.inflateInit2=T,r.inflate=function(I,C){var $,Z,we,x,de,te,Te,H,W,Y,ee,pe,se,Se,Fe,X,Ne,ne,xe,ot,g,re,K,R,S=0,j=new s.Buf8(4),ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return m;($=I.state).mode===12&&($.mode=13),de=I.next_out,we=I.output,Te=I.avail_out,x=I.next_in,Z=I.input,te=I.avail_in,H=$.hold,W=$.bits,Y=te,ee=Te,re=h;e:for(;;)switch($.mode){case d:if($.wrap===0){$.mode=13;break}for(;W<16;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}if(2&$.wrap&&H===35615){j[$.check=0]=255&H,j[1]=H>>>8&255,$.check=o($.check,j,2,0),W=H=0,$.mode=2;break}if($.flags=0,$.head&&($.head.done=!1),!(1&$.wrap)||(((255&H)<<8)+(H>>8))%31){I.msg="incorrect header check",$.mode=30;break}if((15&H)!=8){I.msg="unknown compression method",$.mode=30;break}if(W-=4,g=8+(15&(H>>>=4)),$.wbits===0)$.wbits=g;else if(g>$.wbits){I.msg="invalid window size",$.mode=30;break}$.dmax=1<<g,I.adler=$.check=1,$.mode=512&H?10:12,W=H=0;break;case 2:for(;W<16;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}if($.flags=H,(255&$.flags)!=8){I.msg="unknown compression method",$.mode=30;break}if(57344&$.flags){I.msg="unknown header flags set",$.mode=30;break}$.head&&($.head.text=H>>8&1),512&$.flags&&(j[0]=255&H,j[1]=H>>>8&255,$.check=o($.check,j,2,0)),W=H=0,$.mode=3;case 3:for(;W<32;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}$.head&&($.head.time=H),512&$.flags&&(j[0]=255&H,j[1]=H>>>8&255,j[2]=H>>>16&255,j[3]=H>>>24&255,$.check=o($.check,j,4,0)),W=H=0,$.mode=4;case 4:for(;W<16;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}$.head&&($.head.xflags=255&H,$.head.os=H>>8),512&$.flags&&(j[0]=255&H,j[1]=H>>>8&255,$.check=o($.check,j,2,0)),W=H=0,$.mode=5;case 5:if(1024&$.flags){for(;W<16;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}$.length=H,$.head&&($.head.extra_len=H),512&$.flags&&(j[0]=255&H,j[1]=H>>>8&255,$.check=o($.check,j,2,0)),W=H=0}else $.head&&($.head.extra=null);$.mode=6;case 6:if(1024&$.flags&&(te<(pe=$.length)&&(pe=te),pe&&($.head&&(g=$.head.extra_len-$.length,$.head.extra||($.head.extra=new Array($.head.extra_len)),s.arraySet($.head.extra,Z,x,pe,g)),512&$.flags&&($.check=o($.check,Z,pe,x)),te-=pe,x+=pe,$.length-=pe),$.length))break e;$.length=0,$.mode=7;case 7:if(2048&$.flags){if(te===0)break e;for(pe=0;g=Z[x+pe++],$.head&&g&&$.length<65536&&($.head.name+=String.fromCharCode(g)),g&&pe<te;);if(512&$.flags&&($.check=o($.check,Z,pe,x)),te-=pe,x+=pe,g)break e}else $.head&&($.head.name=null);$.length=0,$.mode=8;case 8:if(4096&$.flags){if(te===0)break e;for(pe=0;g=Z[x+pe++],$.head&&g&&$.length<65536&&($.head.comment+=String.fromCharCode(g)),g&&pe<te;);if(512&$.flags&&($.check=o($.check,Z,pe,x)),te-=pe,x+=pe,g)break e}else $.head&&($.head.comment=null);$.mode=9;case 9:if(512&$.flags){for(;W<16;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}if(H!==(65535&$.check)){I.msg="header crc mismatch",$.mode=30;break}W=H=0}$.head&&($.head.hcrc=$.flags>>9&1,$.head.done=!0),I.adler=$.check=0,$.mode=12;break;case 10:for(;W<32;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}I.adler=$.check=b(H),W=H=0,$.mode=11;case 11:if($.havedict===0)return I.next_out=de,I.avail_out=Te,I.next_in=x,I.avail_in=te,$.hold=H,$.bits=W,2;I.adler=$.check=1,$.mode=12;case 12:if(C===5||C===6)break e;case 13:if($.last){H>>>=7&W,W-=7&W,$.mode=27;break}for(;W<3;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}switch($.last=1&H,W-=1,3&(H>>>=1)){case 0:$.mode=14;break;case 1:if(U($),$.mode=20,C!==6)break;H>>>=2,W-=2;break e;case 2:$.mode=17;break;case 3:I.msg="invalid block type",$.mode=30}H>>>=2,W-=2;break;case 14:for(H>>>=7&W,W-=7&W;W<32;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}if((65535&H)!=(H>>>16^65535)){I.msg="invalid stored block lengths",$.mode=30;break}if($.length=65535&H,W=H=0,$.mode=15,C===6)break e;case 15:$.mode=16;case 16:if(pe=$.length){if(te<pe&&(pe=te),Te<pe&&(pe=Te),pe===0)break e;s.arraySet(we,Z,x,pe,de),te-=pe,x+=pe,Te-=pe,de+=pe,$.length-=pe;break}$.mode=12;break;case 17:for(;W<14;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}if($.nlen=257+(31&H),H>>>=5,W-=5,$.ndist=1+(31&H),H>>>=5,W-=5,$.ncode=4+(15&H),H>>>=4,W-=4,286<$.nlen||30<$.ndist){I.msg="too many length or distance symbols",$.mode=30;break}$.have=0,$.mode=18;case 18:for(;$.have<$.ncode;){for(;W<3;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}$.lens[ce[$.have++]]=7&H,H>>>=3,W-=3}for(;$.have<19;)$.lens[ce[$.have++]]=0;if($.lencode=$.lendyn,$.lenbits=7,K={bits:$.lenbits},re=u(0,$.lens,0,19,$.lencode,0,$.work,K),$.lenbits=K.bits,re){I.msg="invalid code lengths set",$.mode=30;break}$.have=0,$.mode=19;case 19:for(;$.have<$.nlen+$.ndist;){for(;X=(S=$.lencode[H&(1<<$.lenbits)-1])>>>16&255,Ne=65535&S,!((Fe=S>>>24)<=W);){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}if(Ne<16)H>>>=Fe,W-=Fe,$.lens[$.have++]=Ne;else{if(Ne===16){for(R=Fe+2;W<R;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}if(H>>>=Fe,W-=Fe,$.have===0){I.msg="invalid bit length repeat",$.mode=30;break}g=$.lens[$.have-1],pe=3+(3&H),H>>>=2,W-=2}else if(Ne===17){for(R=Fe+3;W<R;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}W-=Fe,g=0,pe=3+(7&(H>>>=Fe)),H>>>=3,W-=3}else{for(R=Fe+7;W<R;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}W-=Fe,g=0,pe=11+(127&(H>>>=Fe)),H>>>=7,W-=7}if($.have+pe>$.nlen+$.ndist){I.msg="invalid bit length repeat",$.mode=30;break}for(;pe--;)$.lens[$.have++]=g}}if($.mode===30)break;if($.lens[256]===0){I.msg="invalid code -- missing end-of-block",$.mode=30;break}if($.lenbits=9,K={bits:$.lenbits},re=u(f,$.lens,0,$.nlen,$.lencode,0,$.work,K),$.lenbits=K.bits,re){I.msg="invalid literal/lengths set",$.mode=30;break}if($.distbits=6,$.distcode=$.distdyn,K={bits:$.distbits},re=u(c,$.lens,$.nlen,$.ndist,$.distcode,0,$.work,K),$.distbits=K.bits,re){I.msg="invalid distances set",$.mode=30;break}if($.mode=20,C===6)break e;case 20:$.mode=21;case 21:if(6<=te&&258<=Te){I.next_out=de,I.avail_out=Te,I.next_in=x,I.avail_in=te,$.hold=H,$.bits=W,l(I,ee),de=I.next_out,we=I.output,Te=I.avail_out,x=I.next_in,Z=I.input,te=I.avail_in,H=$.hold,W=$.bits,$.mode===12&&($.back=-1);break}for($.back=0;X=(S=$.lencode[H&(1<<$.lenbits)-1])>>>16&255,Ne=65535&S,!((Fe=S>>>24)<=W);){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}if(X&&!(240&X)){for(ne=Fe,xe=X,ot=Ne;X=(S=$.lencode[ot+((H&(1<<ne+xe)-1)>>ne)])>>>16&255,Ne=65535&S,!(ne+(Fe=S>>>24)<=W);){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}H>>>=ne,W-=ne,$.back+=ne}if(H>>>=Fe,W-=Fe,$.back+=Fe,$.length=Ne,X===0){$.mode=26;break}if(32&X){$.back=-1,$.mode=12;break}if(64&X){I.msg="invalid literal/length code",$.mode=30;break}$.extra=15&X,$.mode=22;case 22:if($.extra){for(R=$.extra;W<R;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}$.length+=H&(1<<$.extra)-1,H>>>=$.extra,W-=$.extra,$.back+=$.extra}$.was=$.length,$.mode=23;case 23:for(;X=(S=$.distcode[H&(1<<$.distbits)-1])>>>16&255,Ne=65535&S,!((Fe=S>>>24)<=W);){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}if(!(240&X)){for(ne=Fe,xe=X,ot=Ne;X=(S=$.distcode[ot+((H&(1<<ne+xe)-1)>>ne)])>>>16&255,Ne=65535&S,!(ne+(Fe=S>>>24)<=W);){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}H>>>=ne,W-=ne,$.back+=ne}if(H>>>=Fe,W-=Fe,$.back+=Fe,64&X){I.msg="invalid distance code",$.mode=30;break}$.offset=Ne,$.extra=15&X,$.mode=24;case 24:if($.extra){for(R=$.extra;W<R;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}$.offset+=H&(1<<$.extra)-1,H>>>=$.extra,W-=$.extra,$.back+=$.extra}if($.offset>$.dmax){I.msg="invalid distance too far back",$.mode=30;break}$.mode=25;case 25:if(Te===0)break e;if(pe=ee-Te,$.offset>pe){if((pe=$.offset-pe)>$.whave&&$.sane){I.msg="invalid distance too far back",$.mode=30;break}se=pe>$.wnext?(pe-=$.wnext,$.wsize-pe):$.wnext-pe,pe>$.length&&(pe=$.length),Se=$.window}else Se=we,se=de-$.offset,pe=$.length;for(Te<pe&&(pe=Te),Te-=pe,$.length-=pe;we[de++]=Se[se++],--pe;);$.length===0&&($.mode=21);break;case 26:if(Te===0)break e;we[de++]=$.length,Te--,$.mode=21;break;case 27:if($.wrap){for(;W<32;){if(te===0)break e;te--,H|=Z[x++]<<W,W+=8}if(ee-=Te,I.total_out+=ee,$.total+=ee,ee&&(I.adler=$.check=$.flags?o($.check,we,ee,de-ee):a($.check,we,ee,de-ee)),ee=Te,($.flags?H:b(H))!==$.check){I.msg="incorrect data check",$.mode=30;break}W=H=0}$.mode=28;case 28:if($.wrap&&$.flags){for(;W<32;){if(te===0)break e;te--,H+=Z[x++]<<W,W+=8}if(H!==(4294967295&$.total)){I.msg="incorrect length check",$.mode=30;break}W=H=0}$.mode=29;case 29:re=1;break e;case 30:re=-3;break e;case 31:return-4;case 32:default:return m}return I.next_out=de,I.avail_out=Te,I.next_in=x,I.avail_in=te,$.hold=H,$.bits=W,($.wsize||ee!==I.avail_out&&$.mode<30&&($.mode<27||C!==4))&&ae(I,I.output,I.next_out,ee-I.avail_out)?($.mode=31,-4):(Y-=I.avail_in,ee-=I.avail_out,I.total_in+=Y,I.total_out+=ee,$.total+=ee,$.wrap&&ee&&(I.adler=$.check=$.flags?o($.check,we,ee,I.next_out-ee):a($.check,we,ee,I.next_out-ee)),I.data_type=$.bits+($.last?64:0)+($.mode===12?128:0)+($.mode===20||$.mode===15?256:0),(Y==0&&ee===0||C===4)&&re===h&&(re=-5),re)},r.inflateEnd=function(I){if(!I||!I.state)return m;var C=I.state;return C.window&&(C.window=null),I.state=null,h},r.inflateGetHeader=function(I,C){var $;return I&&I.state&&2&($=I.state).wrap?(($.head=C).done=!1,h):m},r.inflateSetDictionary=function(I,C){var $,Z=C.length;return I&&I.state?($=I.state).wrap!==0&&$.mode!==11?m:$.mode===11&&a(1,C,Z,0)!==$.check?-3:ae(I,C,Z,Z)?($.mode=31,-4):($.havedict=1,h):m},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,r){var s=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(f,c,h,m,d,p,_,b){var v,A,k,N,T,F,L,P,U,ae=b.bits,I=0,C=0,$=0,Z=0,we=0,x=0,de=0,te=0,Te=0,H=0,W=null,Y=0,ee=new s.Buf16(16),pe=new s.Buf16(16),se=null,Se=0;for(I=0;I<=15;I++)ee[I]=0;for(C=0;C<m;C++)ee[c[h+C]]++;for(we=ae,Z=15;1<=Z&&ee[Z]===0;Z--);if(Z<we&&(we=Z),Z===0)return d[p++]=20971520,d[p++]=20971520,b.bits=1,0;for($=1;$<Z&&ee[$]===0;$++);for(we<$&&(we=$),I=te=1;I<=15;I++)if(te<<=1,(te-=ee[I])<0)return-1;if(0<te&&(f===0||Z!==1))return-1;for(pe[1]=0,I=1;I<15;I++)pe[I+1]=pe[I]+ee[I];for(C=0;C<m;C++)c[h+C]!==0&&(_[pe[c[h+C]]++]=C);if(F=f===0?(W=se=_,19):f===1?(W=a,Y-=257,se=o,Se-=257,256):(W=l,se=u,-1),I=$,T=p,de=C=H=0,k=-1,N=(Te=1<<(x=we))-1,f===1&&852<Te||f===2&&592<Te)return 1;for(;;){for(L=I-de,U=_[C]<F?(P=0,_[C]):_[C]>F?(P=se[Se+_[C]],W[Y+_[C]]):(P=96,0),v=1<<I-de,$=A=1<<x;d[T+(H>>de)+(A-=v)]=L<<24|P<<16|U|0,A!==0;);for(v=1<<I-1;H&v;)v>>=1;if(v!==0?(H&=v-1,H+=v):H=0,C++,--ee[I]==0){if(I===Z)break;I=c[h+_[C]]}if(we<I&&(H&N)!==k){for(de===0&&(de=we),T+=$,te=1<<(x=I-de);x+de<Z&&!((te-=ee[x+de])<=0);)x++,te<<=1;if(Te+=1<<x,f===1&&852<Te||f===2&&592<Te)return 1;d[k=H&N]=we<<24|x<<16|T-p|0}}return H!==0&&(d[T+H]=I-de<<24|64<<16|0),b.bits=we,0}},{"../utils/common":41}],51:[function(t,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,r){var s=t("../utils/common"),a=0,o=1;function l(S){for(var j=S.length;0<=--j;)S[j]=0}var u=0,f=29,c=256,h=c+1+f,m=30,d=19,p=2*h+1,_=15,b=16,v=7,A=256,k=16,N=17,T=18,F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=new Array(2*(h+2));l(ae);var I=new Array(2*m);l(I);var C=new Array(512);l(C);var $=new Array(256);l($);var Z=new Array(f);l(Z);var we,x,de,te=new Array(m);function Te(S,j,ce,me,q){this.static_tree=S,this.extra_bits=j,this.extra_base=ce,this.elems=me,this.max_length=q,this.has_stree=S&&S.length}function H(S,j){this.dyn_tree=S,this.max_code=0,this.stat_desc=j}function W(S){return S<256?C[S]:C[256+(S>>>7)]}function Y(S,j){S.pending_buf[S.pending++]=255&j,S.pending_buf[S.pending++]=j>>>8&255}function ee(S,j,ce){S.bi_valid>b-ce?(S.bi_buf|=j<<S.bi_valid&65535,Y(S,S.bi_buf),S.bi_buf=j>>b-S.bi_valid,S.bi_valid+=ce-b):(S.bi_buf|=j<<S.bi_valid&65535,S.bi_valid+=ce)}function pe(S,j,ce){ee(S,ce[2*j],ce[2*j+1])}function se(S,j){for(var ce=0;ce|=1&S,S>>>=1,ce<<=1,0<--j;);return ce>>>1}function Se(S,j,ce){var me,q,_e=new Array(_+1),Ie=0;for(me=1;me<=_;me++)_e[me]=Ie=Ie+ce[me-1]<<1;for(q=0;q<=j;q++){var be=S[2*q+1];be!==0&&(S[2*q]=se(_e[be]++,be))}}function Fe(S){var j;for(j=0;j<h;j++)S.dyn_ltree[2*j]=0;for(j=0;j<m;j++)S.dyn_dtree[2*j]=0;for(j=0;j<d;j++)S.bl_tree[2*j]=0;S.dyn_ltree[2*A]=1,S.opt_len=S.static_len=0,S.last_lit=S.matches=0}function X(S){8<S.bi_valid?Y(S,S.bi_buf):0<S.bi_valid&&(S.pending_buf[S.pending++]=S.bi_buf),S.bi_buf=0,S.bi_valid=0}function Ne(S,j,ce,me){var q=2*j,_e=2*ce;return S[q]<S[_e]||S[q]===S[_e]&&me[j]<=me[ce]}function ne(S,j,ce){for(var me=S.heap[ce],q=ce<<1;q<=S.heap_len&&(q<S.heap_len&&Ne(j,S.heap[q+1],S.heap[q],S.depth)&&q++,!Ne(j,me,S.heap[q],S.depth));)S.heap[ce]=S.heap[q],ce=q,q<<=1;S.heap[ce]=me}function xe(S,j,ce){var me,q,_e,Ie,be=0;if(S.last_lit!==0)for(;me=S.pending_buf[S.d_buf+2*be]<<8|S.pending_buf[S.d_buf+2*be+1],q=S.pending_buf[S.l_buf+be],be++,me===0?pe(S,q,j):(pe(S,(_e=$[q])+c+1,j),(Ie=F[_e])!==0&&ee(S,q-=Z[_e],Ie),pe(S,_e=W(--me),ce),(Ie=L[_e])!==0&&ee(S,me-=te[_e],Ie)),be<S.last_lit;);pe(S,A,j)}function ot(S,j){var ce,me,q,_e=j.dyn_tree,Ie=j.stat_desc.static_tree,be=j.stat_desc.has_stree,Be=j.stat_desc.elems,Ye=-1;for(S.heap_len=0,S.heap_max=p,ce=0;ce<Be;ce++)_e[2*ce]!==0?(S.heap[++S.heap_len]=Ye=ce,S.depth[ce]=0):_e[2*ce+1]=0;for(;S.heap_len<2;)_e[2*(q=S.heap[++S.heap_len]=Ye<2?++Ye:0)]=1,S.depth[q]=0,S.opt_len--,be&&(S.static_len-=Ie[2*q+1]);for(j.max_code=Ye,ce=S.heap_len>>1;1<=ce;ce--)ne(S,_e,ce);for(q=Be;ce=S.heap[1],S.heap[1]=S.heap[S.heap_len--],ne(S,_e,1),me=S.heap[1],S.heap[--S.heap_max]=ce,S.heap[--S.heap_max]=me,_e[2*q]=_e[2*ce]+_e[2*me],S.depth[q]=(S.depth[ce]>=S.depth[me]?S.depth[ce]:S.depth[me])+1,_e[2*ce+1]=_e[2*me+1]=q,S.heap[1]=q++,ne(S,_e,1),2<=S.heap_len;);S.heap[--S.heap_max]=S.heap[1],function(Ge,$t){var mn,kt,dn,rt,Rn,hr,It=$t.dyn_tree,ri=$t.max_code,Ga=$t.stat_desc.static_tree,ja=$t.stat_desc.has_stree,Ha=$t.stat_desc.extra_bits,ii=$t.stat_desc.extra_base,pn=$t.stat_desc.max_length,Pn=0;for(rt=0;rt<=_;rt++)Ge.bl_count[rt]=0;for(It[2*Ge.heap[Ge.heap_max]+1]=0,mn=Ge.heap_max+1;mn<p;mn++)pn<(rt=It[2*It[2*(kt=Ge.heap[mn])+1]+1]+1)&&(rt=pn,Pn++),It[2*kt+1]=rt,ri<kt||(Ge.bl_count[rt]++,Rn=0,ii<=kt&&(Rn=Ha[kt-ii]),hr=It[2*kt],Ge.opt_len+=hr*(rt+Rn),ja&&(Ge.static_len+=hr*(Ga[2*kt+1]+Rn)));if(Pn!==0){do{for(rt=pn-1;Ge.bl_count[rt]===0;)rt--;Ge.bl_count[rt]--,Ge.bl_count[rt+1]+=2,Ge.bl_count[pn]--,Pn-=2}while(0<Pn);for(rt=pn;rt!==0;rt--)for(kt=Ge.bl_count[rt];kt!==0;)ri<(dn=Ge.heap[--mn])||(It[2*dn+1]!==rt&&(Ge.opt_len+=(rt-It[2*dn+1])*It[2*dn],It[2*dn+1]=rt),kt--)}}(S,j),Se(_e,Ye,S.bl_count)}function g(S,j,ce){var me,q,_e=-1,Ie=j[1],be=0,Be=7,Ye=4;for(Ie===0&&(Be=138,Ye=3),j[2*(ce+1)+1]=65535,me=0;me<=ce;me++)q=Ie,Ie=j[2*(me+1)+1],++be<Be&&q===Ie||(be<Ye?S.bl_tree[2*q]+=be:q!==0?(q!==_e&&S.bl_tree[2*q]++,S.bl_tree[2*k]++):be<=10?S.bl_tree[2*N]++:S.bl_tree[2*T]++,_e=q,Ye=(be=0)===Ie?(Be=138,3):q===Ie?(Be=6,3):(Be=7,4))}function re(S,j,ce){var me,q,_e=-1,Ie=j[1],be=0,Be=7,Ye=4;for(Ie===0&&(Be=138,Ye=3),me=0;me<=ce;me++)if(q=Ie,Ie=j[2*(me+1)+1],!(++be<Be&&q===Ie)){if(be<Ye)for(;pe(S,q,S.bl_tree),--be!=0;);else q!==0?(q!==_e&&(pe(S,q,S.bl_tree),be--),pe(S,k,S.bl_tree),ee(S,be-3,2)):be<=10?(pe(S,N,S.bl_tree),ee(S,be-3,3)):(pe(S,T,S.bl_tree),ee(S,be-11,7));_e=q,Ye=(be=0)===Ie?(Be=138,3):q===Ie?(Be=6,3):(Be=7,4)}}l(te);var K=!1;function R(S,j,ce,me){ee(S,(u<<1)+(me?1:0),3),function(q,_e,Ie,be){X(q),be&&(Y(q,Ie),Y(q,~Ie)),s.arraySet(q.pending_buf,q.window,_e,Ie,q.pending),q.pending+=Ie}(S,j,ce,!0)}r._tr_init=function(S){K||(function(){var j,ce,me,q,_e,Ie=new Array(_+1);for(q=me=0;q<f-1;q++)for(Z[q]=me,j=0;j<1<<F[q];j++)$[me++]=q;for($[me-1]=q,q=_e=0;q<16;q++)for(te[q]=_e,j=0;j<1<<L[q];j++)C[_e++]=q;for(_e>>=7;q<m;q++)for(te[q]=_e<<7,j=0;j<1<<L[q]-7;j++)C[256+_e++]=q;for(ce=0;ce<=_;ce++)Ie[ce]=0;for(j=0;j<=143;)ae[2*j+1]=8,j++,Ie[8]++;for(;j<=255;)ae[2*j+1]=9,j++,Ie[9]++;for(;j<=279;)ae[2*j+1]=7,j++,Ie[7]++;for(;j<=287;)ae[2*j+1]=8,j++,Ie[8]++;for(Se(ae,h+1,Ie),j=0;j<m;j++)I[2*j+1]=5,I[2*j]=se(j,5);we=new Te(ae,F,c+1,h,_),x=new Te(I,L,0,m,_),de=new Te(new Array(0),P,0,d,v)}(),K=!0),S.l_desc=new H(S.dyn_ltree,we),S.d_desc=new H(S.dyn_dtree,x),S.bl_desc=new H(S.bl_tree,de),S.bi_buf=0,S.bi_valid=0,Fe(S)},r._tr_stored_block=R,r._tr_flush_block=function(S,j,ce,me){var q,_e,Ie=0;0<S.level?(S.strm.data_type===2&&(S.strm.data_type=function(be){var Be,Ye=4093624447;for(Be=0;Be<=31;Be++,Ye>>>=1)if(1&Ye&&be.dyn_ltree[2*Be]!==0)return a;if(be.dyn_ltree[18]!==0||be.dyn_ltree[20]!==0||be.dyn_ltree[26]!==0)return o;for(Be=32;Be<c;Be++)if(be.dyn_ltree[2*Be]!==0)return o;return a}(S)),ot(S,S.l_desc),ot(S,S.d_desc),Ie=function(be){var Be;for(g(be,be.dyn_ltree,be.l_desc.max_code),g(be,be.dyn_dtree,be.d_desc.max_code),ot(be,be.bl_desc),Be=d-1;3<=Be&&be.bl_tree[2*U[Be]+1]===0;Be--);return be.opt_len+=3*(Be+1)+5+5+4,Be}(S),q=S.opt_len+3+7>>>3,(_e=S.static_len+3+7>>>3)<=q&&(q=_e)):q=_e=ce+5,ce+4<=q&&j!==-1?R(S,j,ce,me):S.strategy===4||_e===q?(ee(S,2+(me?1:0),3),xe(S,ae,I)):(ee(S,4+(me?1:0),3),function(be,Be,Ye,Ge){var $t;for(ee(be,Be-257,5),ee(be,Ye-1,5),ee(be,Ge-4,4),$t=0;$t<Ge;$t++)ee(be,be.bl_tree[2*U[$t]+1],3);re(be,be.dyn_ltree,Be-1),re(be,be.dyn_dtree,Ye-1)}(S,S.l_desc.max_code+1,S.d_desc.max_code+1,Ie+1),xe(S,S.dyn_ltree,S.dyn_dtree)),Fe(S),me&&X(S)},r._tr_tally=function(S,j,ce){return S.pending_buf[S.d_buf+2*S.last_lit]=j>>>8&255,S.pending_buf[S.d_buf+2*S.last_lit+1]=255&j,S.pending_buf[S.l_buf+S.last_lit]=255&ce,S.last_lit++,j===0?S.dyn_ltree[2*ce]++:(S.matches++,j--,S.dyn_ltree[2*($[ce]+c+1)]++,S.dyn_dtree[2*W(j)]++),S.last_lit===S.lit_bufsize-1},r._tr_align=function(S){ee(S,2,3),pe(S,A,ae),function(j){j.bi_valid===16?(Y(j,j.bi_buf),j.bi_buf=0,j.bi_valid=0):8<=j.bi_valid&&(j.pending_buf[j.pending++]=255&j.bi_buf,j.bi_buf>>=8,j.bi_valid-=8)}(S)}},{"../utils/common":41}],53:[function(t,n,r){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,r){(function(s){(function(a,o){if(!a.setImmediate){var l,u,f,c,h=1,m={},d=!1,p=a.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(a);_=_&&_.setTimeout?_:a,l={}.toString.call(a.process)==="[object process]"?function(k){process.nextTick(function(){v(k)})}:function(){if(a.postMessage&&!a.importScripts){var k=!0,N=a.onmessage;return a.onmessage=function(){k=!1},a.postMessage("","*"),a.onmessage=N,k}}()?(c="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",A,!1):a.attachEvent("onmessage",A),function(k){a.postMessage(c+k,"*")}):a.MessageChannel?((f=new MessageChannel).port1.onmessage=function(k){v(k.data)},function(k){f.port2.postMessage(k)}):p&&"onreadystatechange"in p.createElement("script")?(u=p.documentElement,function(k){var N=p.createElement("script");N.onreadystatechange=function(){v(k),N.onreadystatechange=null,u.removeChild(N),N=null},u.appendChild(N)}):function(k){setTimeout(v,0,k)},_.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var N=new Array(arguments.length-1),T=0;T<N.length;T++)N[T]=arguments[T+1];var F={callback:k,args:N};return m[h]=F,l(h),h++},_.clearImmediate=b}function b(k){delete m[k]}function v(k){if(d)setTimeout(v,0,k);else{var N=m[k];if(N){d=!0;try{(function(T){var F=T.callback,L=T.args;switch(L.length){case 0:F();break;case 1:F(L[0]);break;case 2:F(L[0],L[1]);break;case 3:F(L[0],L[1],L[2]);break;default:F.apply(o,L)}})(N)}finally{b(k),d=!1}}}}function A(k){k.source===a&&typeof k.data=="string"&&k.data.indexOf(c)===0&&v(+k.data.slice(c.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Bn<"u"?Bn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(bh);const $h=""+new URL("../assets/fonts_metrics.129dbd9a.zip",import.meta.url).href;function vh(i,e){if(i>e.k*256)return i/e.k;const{size:t,height:n}=e.metrics;let r=0,s=t.length-1;for(;s-r>1;){const a=Math.round((r+s)/2);n[a]<=i?r=a:n[a]>i&&(s=a)}return t[r]}function wh(i){const{family:e,italic:t,bold:n,smallCaps:r}=i,s=[e];return t&&s.push("italic"),n&&s.push("bold"),r&&s.push("small-caps"),s.join("_")}class yh{constructor(){Re(this,"data")}get(e){if(!this.data)return{k:1,metrics:{height:[0,1],size:[0,1]}};const t=wh(e),n=this.data.get(t);if(!n)throw new Error(`Not found font statistics for ${t}`);return n}}const Eh=An(["Impact","Lobster","Arial","Helvetica","Next art","Pacifico","Caveat","Comforter"]);function kh(){return Ah($h)}function Ah(i){const e=new yh;return{store:e,then:fetch(i).then(t=>t.blob()).then(t=>ln.loadAsync(t)).then(t=>Promise.all(Object.entries(t.files).map(([n,r])=>r.async("string").then(s=>[n.substring(0,n.length-5),JSON.parse(s)])))).then(t=>e.data=new Map(t))}}function Sh(i=document.fonts){const e=new Array;return i.forEach(t=>e.push(t.load().catch(n=>(console.warn(`Failed load font ${t.family}: ${n.message}`),t)))),Promise.all(e)}function Li(i,e,t){const n=i.slice();return n[24]=e[t],n}function Th(i){let e,t;return e=new Vl({props:{size:16}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p:nt,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ih(i){let e,t;return e=new Vo({props:{size:16}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p:nt,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ch(i){let e;return{c(){e=ue("Small Caps")},l(t){e=fe(t,"Small Caps")},m(t,n){O(t,e,n)},d(t){t&&E(e)}}}function Fh(i){let e,t;return e=new Ro({}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Rh(i){let e,t;return e=new wo({}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ph(i){let e,t;return e=new So({}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Nh(i){let e,t,n,r;const s=[Ph,Rh,Fh],a=[];function o(l,u){return l[23]=="left"?0:l[23]=="center"?1:l[23]=="right"?2:-1}return~(e=o(i))&&(t=a[e]=s[e](i)),{c(){t&&t.c(),n=Ze()},l(l){t&&t.l(l),n=Ze()},m(l,u){~e&&a[e].m(l,u),O(l,n,u),r=!0},p(l,u){let f=e;e=o(l),e!==f&&(t&&(Ve(),y(a[f],1,1,()=>{a[f]=null}),qe()),~e?(t=a[e],t||(t=a[e]=s[e](l),t.c()),w(t,1),t.m(n.parentNode,n)):t=null)},i(l){r||(w(t),r=!0)},o(l){y(t),r=!1},d(l){~e&&a[e].d(l),l&&E(n)}}}function Bh(i){let e,t;return e=new so({}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Mh(i){let e,t;return e=new fo({}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function zh(i){let e,t;return e=new _o({}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Dh(i){let e,t,n,r;const s=[zh,Mh,Bh],a=[];function o(l,u){return l[23]=="top"?0:l[23]=="middle"?1:l[23]=="bottom"?2:-1}return~(e=o(i))&&(t=a[e]=s[e](i)),{c(){t&&t.c(),n=Ze()},l(l){t&&t.l(l),n=Ze()},m(l,u){~e&&a[e].m(l,u),O(l,n,u),r=!0},p(l,u){let f=e;e=o(l),e!==f&&(t&&(Ve(),y(a[f],1,1,()=>{a[f]=null}),qe()),~e?(t=a[e],t||(t=a[e]=s[e](l),t.c()),w(t,1),t.m(n.parentNode,n)):t=null)},i(l){r||(w(t),r=!0)},o(l){y(t),r=!1},d(l){~e&&a[e].d(l),l&&E(n)}}}function Uh(i){let e,t;return e=new Yl({}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Oi(i){let e,t,n,r,s,a,o;return{c(){e=J("label"),t=J("input"),n=oe(),r=ue(i[24]),s=oe(),this.h()},l(l){e=Q(l,"LABEL",{class:!0});var u=ie(e);t=Q(u,"INPUT",{type:!0,style:!0}),n=le(u),r=fe(u,i[24]),s=le(u),u.forEach(E),this.h()},h(){G(t,"type","radio"),t.__value=i[24],t.value=t.__value,_t(t,"display","none"),i[18][0].push(t),G(e,"class","svelte-ebxik1")},m(l,u){O(l,e,u),V(e,t),t.checked=t.__value===i[4],V(e,n),V(e,r),V(e,s),a||(o=Pe(t,"change",i[17]),a=!0)},p(l,u){u&16&&(t.checked=t.__value===l[4])},d(l){l&&E(e),i[18][0].splice(i[18][0].indexOf(t),1),a=!1,o()}}}function Lh(i){let e,t,n,r,s;function a(f){i[16](f)}let o={min:-1,step:.125};i[4]!==void 0&&(o.value=i[4]),t=new Je({props:o}),ge.push(()=>$e(t,"value",a));let l=[0,.5,1,1.25],u=[];for(let f=0;f<4;f+=1)u[f]=Oi(Li(i,l,f));return{c(){e=J("section"),B(t.$$.fragment),r=oe();for(let f=0;f<4;f+=1)u[f].c();this.h()},l(f){e=Q(f,"SECTION",{slot:!0,class:!0});var c=ie(e);M(t.$$.fragment,c),r=le(c);for(let h=0;h<4;h+=1)u[h].l(c);c.forEach(E),this.h()},h(){G(e,"slot","content"),G(e,"class","spacing-values svelte-ebxik1")},m(f,c){O(f,e,c),z(t,e,null),V(e,r);for(let h=0;h<4;h+=1)u[h].m(e,null);s=!0},p(f,c){const h={};if(!n&&c&16&&(n=!0,h.value=f[4],ve(()=>n=!1)),t.$set(h),c&16){l=[0,.5,1,1.25];let m;for(m=0;m<4;m+=1){const d=Li(f,l,m);u[m]?u[m].p(d,c):(u[m]=Oi(d),u[m].c(),u[m].m(e,null))}for(;m<4;m+=1)u[m].d(1)}},i(f){s||(w(t.$$.fragment,f),s=!0)},o(f){y(t.$$.fragment,f),s=!1},d(f){f&&E(e),D(t),kn(u,f)}}}function Oh(i){let e,t=i[23]+"",n;return{c(){e=J("section"),n=ue(t),this.h()},l(r){e=Q(r,"SECTION",{style:!0});var s=ie(e);n=fe(s,t),s.forEach(E),this.h()},h(){_t(e,"font-family",i[23])},m(r,s){O(r,e,s),V(e,n)},p(r,s){s&8388608&&t!==(t=r[23]+"")&&ut(n,t),s&8388608&&_t(e,"font-family",r[23])},d(r){r&&E(e)}}}function xh(i){let e=i[23]+"",t;return{c(){t=ue(e)},l(n){t=fe(n,e)},m(n,r){O(n,t,r)},p(n,r){r&8388608&&e!==(e=n[23]+"")&&ut(t,e)},d(n){n&&E(t)}}}function Gh(i){let e,t,n,r,s,a,o,l,u,f,c,h,m,d,p,_,b,v,A,k,N,T,F,L;function P(Y){i[6](Y)}let U={title:"Курсив",$$slots:{default:[Th]},$$scope:{ctx:i}};i[0].italic!==void 0&&(U.value=i[0].italic),t=new jn({props:U}),ge.push(()=>$e(t,"value",P)),t.$on("change",i[7]);function ae(Y){i[8](Y)}let I={title:"Жирный",$$slots:{default:[Ih]},$$scope:{ctx:i}};i[0].bold!==void 0&&(I.value=i[0].bold),s=new jn({props:I}),ge.push(()=>$e(s,"value",ae)),s.$on("change",i[9]);function C(Y){i[10](Y)}let $={title:"Капитель",$$slots:{default:[Ch]},$$scope:{ctx:i}};i[0].smallCaps!==void 0&&($.value=i[0].smallCaps),l=new jn({props:$}),ge.push(()=>$e(l,"value",C)),l.$on("change",i[11]);function Z(Y){i[12](Y)}let we={title:"Выравнивание",items:["left","center","right"],$$slots:{default:[Nh,({item:Y})=>({23:Y}),({item:Y})=>Y?8388608:0]},$$scope:{ctx:i}};i[2]!==void 0&&(we.value=i[2]),c=new Tt({props:we}),ge.push(()=>$e(c,"value",Z)),c.$on("change",i[13]);function x(Y){i[14](Y)}let de={title:"Позиционирование",items:["top","middle","bottom"],$$slots:{default:[Dh,({item:Y})=>({23:Y}),({item:Y})=>Y?8388608:0]},$$scope:{ctx:i}};i[3]!==void 0&&(de.value=i[3]),d=new Tt({props:de}),ge.push(()=>$e(d,"value",x)),d.$on("change",i[15]),b=new Is({props:{title:"Междустрочный интервал",css:{height:"48px",main:"min-width:100px",width:"100%"},$$slots:{content:[Lh],header:[Uh]},$$scope:{ctx:i}}});function te(Y){i[19](Y)}let Te={title:"Шрифт",items:i[5],$$slots:{default:[Oh,({item:Y})=>({23:Y}),({item:Y})=>Y?8388608:0]},$$scope:{ctx:i}};i[0].family!==void 0&&(Te.value=i[0].family),A=new Tt({props:Te}),ge.push(()=>$e(A,"value",te)),A.$on("change",i[20]);function H(Y){i[21](Y)}let W={title:"Регистр",items:["As is","UPPER","lower"],$$slots:{default:[xh,({item:Y})=>({23:Y}),({item:Y})=>Y?8388608:0]},$$scope:{ctx:i}};return i[1]!==void 0&&(W.value=i[1]),T=new Tt({props:W}),ge.push(()=>$e(T,"value",H)),T.$on("change",i[22]),{c(){e=J("article"),B(t.$$.fragment),r=oe(),B(s.$$.fragment),o=oe(),B(l.$$.fragment),f=oe(),B(c.$$.fragment),m=oe(),B(d.$$.fragment),_=oe(),B(b.$$.fragment),v=oe(),B(A.$$.fragment),N=oe(),B(T.$$.fragment),this.h()},l(Y){e=Q(Y,"ARTICLE",{class:!0});var ee=ie(e);M(t.$$.fragment,ee),r=le(ee),M(s.$$.fragment,ee),o=le(ee),M(l.$$.fragment,ee),f=le(ee),M(c.$$.fragment,ee),m=le(ee),M(d.$$.fragment,ee),_=le(ee),M(b.$$.fragment,ee),v=le(ee),M(A.$$.fragment,ee),N=le(ee),M(T.$$.fragment,ee),ee.forEach(E),this.h()},h(){G(e,"class","svelte-ebxik1")},m(Y,ee){O(Y,e,ee),z(t,e,null),V(e,r),z(s,e,null),V(e,o),z(l,e,null),V(e,f),z(c,e,null),V(e,m),z(d,e,null),V(e,_),z(b,e,null),V(e,v),z(A,e,null),V(e,N),z(T,e,null),L=!0},p(Y,[ee]){const pe={};ee&134217728&&(pe.$$scope={dirty:ee,ctx:Y}),!n&&ee&1&&(n=!0,pe.value=Y[0].italic,ve(()=>n=!1)),t.$set(pe);const se={};ee&134217728&&(se.$$scope={dirty:ee,ctx:Y}),!a&&ee&1&&(a=!0,se.value=Y[0].bold,ve(()=>a=!1)),s.$set(se);const Se={};ee&134217728&&(Se.$$scope={dirty:ee,ctx:Y}),!u&&ee&1&&(u=!0,Se.value=Y[0].smallCaps,ve(()=>u=!1)),l.$set(Se);const Fe={};ee&142606336&&(Fe.$$scope={dirty:ee,ctx:Y}),!h&&ee&4&&(h=!0,Fe.value=Y[2],ve(()=>h=!1)),c.$set(Fe);const X={};ee&142606336&&(X.$$scope={dirty:ee,ctx:Y}),!p&&ee&8&&(p=!0,X.value=Y[3],ve(()=>p=!1)),d.$set(X);const Ne={};ee&134217744&&(Ne.$$scope={dirty:ee,ctx:Y}),b.$set(Ne);const ne={};ee&32&&(ne.items=Y[5]),ee&142606336&&(ne.$$scope={dirty:ee,ctx:Y}),!k&&ee&1&&(k=!0,ne.value=Y[0].family,ve(()=>k=!1)),A.$set(ne);const xe={};ee&142606336&&(xe.$$scope={dirty:ee,ctx:Y}),!F&&ee&2&&(F=!0,xe.value=Y[1],ve(()=>F=!1)),T.$set(xe)},i(Y){L||(w(t.$$.fragment,Y),w(s.$$.fragment,Y),w(l.$$.fragment,Y),w(c.$$.fragment,Y),w(d.$$.fragment,Y),w(b.$$.fragment,Y),w(A.$$.fragment,Y),w(T.$$.fragment,Y),L=!0)},o(Y){y(t.$$.fragment,Y),y(s.$$.fragment,Y),y(l.$$.fragment,Y),y(c.$$.fragment,Y),y(d.$$.fragment,Y),y(b.$$.fragment,Y),y(A.$$.fragment,Y),y(T.$$.fragment,Y),L=!1},d(Y){Y&&E(e),D(t),D(s),D(l),D(c),D(d),D(b),D(A),D(T)}}}function jh(i,e,t){let n;St(i,Eh,U=>t(5,n=U));let{font:r}=e,{textCase:s}=e,{align:a}=e,{baseline:o}=e,{spacing:l}=e;const u=[[]];function f(U){i.$$.not_equal(r.italic,U)&&(r.italic=U,t(0,r))}function c(U){ye.call(this,i,U)}function h(U){i.$$.not_equal(r.bold,U)&&(r.bold=U,t(0,r))}function m(U){ye.call(this,i,U)}function d(U){i.$$.not_equal(r.smallCaps,U)&&(r.smallCaps=U,t(0,r))}function p(U){ye.call(this,i,U)}function _(U){a=U,t(2,a)}function b(U){ye.call(this,i,U)}function v(U){o=U,t(3,o)}function A(U){ye.call(this,i,U)}function k(U){l=U,t(4,l)}function N(){l=this.__value,t(4,l)}function T(U){i.$$.not_equal(r.family,U)&&(r.family=U,t(0,r))}function F(U){ye.call(this,i,U)}function L(U){s=U,t(1,s)}function P(U){ye.call(this,i,U)}return i.$$set=U=>{"font"in U&&t(0,r=U.font),"textCase"in U&&t(1,s=U.textCase),"align"in U&&t(2,a=U.align),"baseline"in U&&t(3,o=U.baseline),"spacing"in U&&t(4,l=U.spacing)},[r,s,a,o,l,n,f,c,h,m,d,p,_,b,v,A,k,N,u,T,F,L,P]}class Hh extends ke{constructor(e){super(),Ae(this,e,jh,Gh,Ee,{font:0,textCase:1,align:2,baseline:3,spacing:4})}}function Wh(i){let e,t=i[27].name+"",n;return{c(){e=J("div"),n=ue(t)},l(r){e=Q(r,"DIV",{});var s=ie(e);n=fe(s,t),s.forEach(E)},m(r,s){O(r,e,s),V(e,n)},p(r,s){s&134217728&&t!==(t=r[27].name+"")&&ut(n,t)},d(r){r&&E(e)}}}function Vh(i){let e,t=i[27].name+"",n;return{c(){e=J("div"),n=ue(t),this.h()},l(r){e=Q(r,"DIV",{style:!0});var s=ie(e);n=fe(s,t),s.forEach(E),this.h()},h(){_t(e,"font",Kt(i[27].preset.font,16))},m(r,s){O(r,e,s),V(e,n)},p(r,s){s&134217728&&t!==(t=r[27].name+"")&&ut(n,t),s&134217728&&_t(e,"font",Kt(r[27].preset.font,16))},d(r){r&&E(e)}}}function qh(i){let e;function t(s,a){return s[27].preset?Vh:Wh}let n=t(i),r=n(i);return{c(){r.c(),e=Ze()},l(s){r.l(s),e=Ze()},m(s,a){r.m(s,a),O(s,e,a)},p(s,a){n===(n=t(s))&&r?r.p(s,a):(r.d(1),r=n(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){r.d(s),s&&E(e)}}}function Zh(i){let e,t,n,r;return t=new Zf({props:{size:24,name:i[26].icon,atlasDescription:Hf,atlasURL:Wf}}),{c(){e=J("div"),B(t.$$.fragment),this.h()},l(s){e=Q(s,"DIV",{class:!0,title:!0});var a=ie(e);M(t.$$.fragment,a),a.forEach(E),this.h()},h(){G(e,"class","icon"),G(e,"title",n=i[26].label)},m(s,a){O(s,e,a),z(t,e,null),r=!0},p(s,a){const o={};a&67108864&&(o.name=s[26].icon),t.$set(o),(!r||a&67108864&&n!==(n=s[26].label))&&G(e,"title",n)},i(s){r||(w(t.$$.fragment,s),r=!0)},o(s){y(t.$$.fragment,s),r=!1},d(s){s&&E(e),D(t)}}}function Xh(i){let e,t,n,r,s;e=new Oe({props:{$$slots:{default:[Yh]},$$scope:{ctx:i}}});function a(l){i[22](l)}let o={defaults:[{type:"disabled"},{type:"color",value:"#000000"},{type:"pattern",name:"fire",rotate:0,scale:{x:1,y:1},shift:{x:0,y:0}},{type:"gradient4",color1:"#ff0000",color2:"#00ff00",color3:"#0000ff",color4:"#fff000"}]};return i[0].stroke!==void 0&&(o.value=i[0].stroke),n=new Fs({props:o}),ge.push(()=>$e(n,"value",a)),n.$on("change",i[23]),n.$on("addPattern",i[24]),{c(){B(e.$$.fragment),t=oe(),B(n.$$.fragment)},l(l){M(e.$$.fragment,l),t=le(l),M(n.$$.fragment,l)},m(l,u){z(e,l,u),O(l,t,u),z(n,l,u),s=!0},p(l,u){const f={};u&268435457&&(f.$$scope={dirty:u,ctx:l}),e.$set(f);const c={};!r&&u&1&&(r=!0,c.value=l[0].stroke,ve(()=>r=!1)),n.$set(c)},i(l){s||(w(e.$$.fragment,l),w(n.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),y(n.$$.fragment,l),s=!1},d(l){D(e,l),l&&E(t),D(n,l)}}}function Kh(i){let e,t,n;function r(a){i[18](a)}let s={defaults:[{type:"disabled"},{type:"color",value:"#ffffff"},{type:"pattern",name:"fire",rotate:0,scale:{x:1,y:1},shift:{x:0,y:0}},{type:"gradient4",color1:"#ff0000",color2:"#00ff00",color3:"#0000ff",color4:"#fff000"}]};return i[0].fill!==void 0&&(s.value=i[0].fill),e=new Fs({props:s}),ge.push(()=>$e(e,"value",r)),e.$on("change",i[19]),e.$on("addPattern",i[20]),{c(){B(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,o){z(e,a,o),n=!0},p(a,o){const l={};!t&&o&1&&(t=!0,l.value=a[0].fill,ve(()=>t=!1)),e.$set(l)},i(a){n||(w(e.$$.fragment,a),n=!0)},o(a){y(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function Yh(i){let e,t,n,r;function s(o){i[21](o)}let a={min:0};return i[0].strokeWidth!==void 0&&(a.value=i[0].strokeWidth),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),{c(){e=ue(`Толщина обводки (%)
					`),B(t.$$.fragment)},l(o){e=fe(o,`Толщина обводки (%)
					`),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].strokeWidth,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function Jh(i){let e,t,n,r;const s=[Kh,Xh],a=[];function o(l,u){return l[26].label==="Заливка"?0:l[26].label==="Обводка"?1:-1}return~(t=o(i))&&(n=a[t]=s[t](i)),{c(){e=J("div"),n&&n.c(),this.h()},l(l){e=Q(l,"DIV",{slot:!0});var u=ie(e);n&&n.l(u),u.forEach(E),this.h()},h(){G(e,"slot","content")},m(l,u){O(l,e,u),~t&&a[t].m(e,null),r=!0},p(l,u){let f=t;t=o(l),t===f?~t&&a[t].p(l,u):(n&&(Ve(),y(a[f],1,1,()=>{a[f]=null}),qe()),~t?(n=a[t],n?n.p(l,u):(n=a[t]=s[t](l),n.c()),w(n,1),n.m(e,null)):n=null)},i(l){r||(w(n),r=!0)},o(l){y(n),r=!1},d(l){l&&E(e),~t&&a[t].d()}}}function Qh(i){let e,t,n,r,s,a,o,l,u,f,c,h,m,d,p,_,b,v;function A(C){i[9](C)}let k={placeholder:i[6],items:[i[6],...i[4].map(xi)],$$slots:{default:[qh,({item:C})=>({27:C}),({item:C})=>C?134217728:0]},$$scope:{ctx:i}};i[3]!==void 0&&(k.value=i[3]),t=new Tt({props:k}),ge.push(()=>$e(t,"value",A)),t.$on("change",i[7]),t.$on("change",i[10]);function N(C){i[11](C)}function T(C){i[12](C)}function F(C){i[13](C)}function L(C){i[14](C)}function P(C){i[15](C)}let U={};i[0].font!==void 0&&(U.font=i[0].font),i[0].case!==void 0&&(U.textCase=i[0].case),i[0].align!==void 0&&(U.align=i[0].align),i[0].baseline!==void 0&&(U.baseline=i[0].baseline),i[0].lineSpacing!==void 0&&(U.spacing=i[0].lineSpacing),s=new Hh({props:U}),ge.push(()=>$e(s,"font",N)),ge.push(()=>$e(s,"textCase",T)),ge.push(()=>$e(s,"align",F)),ge.push(()=>$e(s,"baseline",L)),ge.push(()=>$e(s,"spacing",P)),s.$on("change",i[16]);function ae(C){i[25](C)}let I={tabs:i[5],$$slots:{content:[Jh,({tab:C})=>({26:C}),({tab:C})=>C?67108864:0],default:[Zh,({tab:C})=>({26:C}),({tab:C})=>C?67108864:0]},$$scope:{ctx:i}};return i[2]!==void 0&&(I.activeTab=i[2]),d=new Ts({props:I}),ge.push(()=>$e(d,"activeTab",ae)),{c(){e=J("article"),B(t.$$.fragment),r=oe(),B(s.$$.fragment),c=oe(),h=J("textarea"),m=oe(),B(d.$$.fragment),this.h()},l(C){e=Q(C,"ARTICLE",{});var $=ie(e);M(t.$$.fragment,$),r=le($),M(s.$$.fragment,$),c=le($),h=Q($,"TEXTAREA",{style:!0,rows:!0,class:!0}),ie(h).forEach(E),m=le($),M(d.$$.fragment,$),$.forEach(E),this.h()},h(){_t(h,"width","100%"),G(h,"rows","6"),G(h,"class","svelte-1fuxbeo")},m(C,$){O(C,e,$),z(t,e,null),V(e,r),z(s,e,null),V(e,c),V(e,h),ht(h,i[1]),V(e,m),z(d,e,null),_=!0,b||(v=[Pe(h,"input",i[17]),Pe(h,"change",i[8])],b=!0)},p(C,[$]){const Z={};$&16&&(Z.items=[C[6],...C[4].map(xi)]),$&402653184&&(Z.$$scope={dirty:$,ctx:C}),!n&&$&8&&(n=!0,Z.value=C[3],ve(()=>n=!1)),t.$set(Z);const we={};!a&&$&1&&(a=!0,we.font=C[0].font,ve(()=>a=!1)),!o&&$&1&&(o=!0,we.textCase=C[0].case,ve(()=>o=!1)),!l&&$&1&&(l=!0,we.align=C[0].align,ve(()=>l=!1)),!u&&$&1&&(u=!0,we.baseline=C[0].baseline,ve(()=>u=!1)),!f&&$&1&&(f=!0,we.spacing=C[0].lineSpacing,ve(()=>f=!1)),s.$set(we),$&2&&ht(h,C[1]);const x={};$&335544321&&(x.$$scope={dirty:$,ctx:C}),!p&&$&4&&(p=!0,x.activeTab=C[2],ve(()=>p=!1)),d.$set(x)},i(C){_||(w(t.$$.fragment,C),w(s.$$.fragment,C),w(d.$$.fragment,C),_=!0)},o(C){y(t.$$.fragment,C),y(s.$$.fragment,C),y(d.$$.fragment,C),_=!1},d(C){C&&E(e),D(t),D(s),D(d),b=!1,ft(v)}}}const xi=i=>({name:i.name,preset:i});function em(i,e,t){let n;St(i,gh,C=>t(4,n=C));let{style:r}=e,{text:s}=e,a=[{icon:"fill",label:"Заливка"},{icon:"stroke",label:"Обводка"}],o=a[0];const l={name:"Выбрать пресет...",preset:null};let u=l;function f(C){const $=C.detail.value.preset;$&&(t(0,r=ph($,r)),t(3,u=l))}function c(C){ye.call(this,i,C)}function h(C){u=C,t(3,u)}function m(C){ye.call(this,i,C)}function d(C){i.$$.not_equal(r.font,C)&&(r.font=C,t(0,r))}function p(C){i.$$.not_equal(r.case,C)&&(r.case=C,t(0,r))}function _(C){i.$$.not_equal(r.align,C)&&(r.align=C,t(0,r))}function b(C){i.$$.not_equal(r.baseline,C)&&(r.baseline=C,t(0,r))}function v(C){i.$$.not_equal(r.lineSpacing,C)&&(r.lineSpacing=C,t(0,r))}function A(C){ye.call(this,i,C)}function k(){s=this.value,t(1,s)}function N(C){i.$$.not_equal(r.fill,C)&&(r.fill=C,t(0,r))}function T(C){ye.call(this,i,C)}function F(C){ye.call(this,i,C)}function L(C){i.$$.not_equal(r.strokeWidth,C)&&(r.strokeWidth=C,t(0,r))}function P(C){i.$$.not_equal(r.stroke,C)&&(r.stroke=C,t(0,r))}function U(C){ye.call(this,i,C)}function ae(C){ye.call(this,i,C)}function I(C){o=C,t(2,o)}return i.$$set=C=>{"style"in C&&t(0,r=C.style),"text"in C&&t(1,s=C.text)},[r,s,o,u,n,a,l,f,c,h,m,d,p,_,b,v,A,k,N,T,F,L,P,U,ae,I]}class tm extends ke{constructor(e){super(),Ae(this,e,em,Qh,Ee,{style:0,text:1})}}function nm(i){let e,t,n,r;function s(l){i[1](l)}function a(l){i[2](l)}let o={};return i[0].text!==void 0&&(o.text=i[0].text),i[0].style!==void 0&&(o.style=i[0].style),e=new tm({props:o}),ge.push(()=>$e(e,"text",s)),ge.push(()=>$e(e,"style",a)),e.$on("change",i[3]),e.$on("addPattern",i[4]),{c(){B(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,u){z(e,l,u),r=!0},p(l,[u]){const f={};!t&&u&1&&(t=!0,f.text=l[0].text,ve(()=>t=!1)),!n&&u&1&&(n=!0,f.style=l[0].style,ve(()=>n=!1)),e.$set(f)},i(l){r||(w(e.$$.fragment,l),r=!0)},o(l){y(e.$$.fragment,l),r=!1},d(l){D(e,l)}}}function rm(i,e,t){let{content:n}=e;function r(l){i.$$.not_equal(n.text,l)&&(n.text=l,t(0,n))}function s(l){i.$$.not_equal(n.style,l)&&(n.style=l,t(0,n))}function a(l){ye.call(this,i,l)}function o(l){ye.call(this,i,l)}return i.$$set=l=>{"content"in l&&t(0,n=l.content)},[n,r,s,a,o]}class im extends ke{constructor(e){super(),Ae(this,e,rm,nm,Ee,{content:0})}}function sm(i){let e,t,n=i[0].text+"",r,s,a;const o=i[2].default,l=Me(o,i,i[1],null);return{c(){e=J("article"),t=J("main"),r=ue(n),s=oe(),l&&l.c(),this.h()},l(u){e=Q(u,"ARTICLE",{class:!0});var f=ie(e);t=Q(f,"MAIN",{style:!0,class:!0});var c=ie(t);r=fe(c,n),c.forEach(E),s=le(f),l&&l.l(f),f.forEach(E),this.h()},h(){_t(t,"font",Kt(i[0].style.font,16)),G(t,"class","svelte-18odw12"),G(e,"class","svelte-18odw12")},m(u,f){O(u,e,f),V(e,t),V(t,r),V(e,s),l&&l.m(e,null),a=!0},p(u,[f]){(!a||f&1)&&n!==(n=u[0].text+"")&&ut(r,n),(!a||f&1)&&_t(t,"font",Kt(u[0].style.font,16)),l&&l.p&&(!a||f&2)&&ze(l,o,u,u[1],a?Ue(o,u[1],f,null):De(u[1]),null)},i(u){a||(w(l,u),a=!0)},o(u){y(l,u),a=!1},d(u){u&&E(e),l&&l.d(u)}}}function am(i,e,t){let{$$slots:n={},$$scope:r}=e,{content:s}=e;return i.$$set=a=>{"content"in a&&t(0,s=a.content),"$$scope"in a&&t(1,r=a.$$scope)},[s,r,n]}class Ps extends ke{constructor(e){super(),Ae(this,e,am,sm,Ee,{content:0})}}function Gi(i){let e,t;return e=new st({props:{title:"Создать копию фрейма",$$slots:{default:[om]},$$scope:{ctx:i}}}),e.$on("click",i[5]("copy")),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&272&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function om(i){let e,t;return e=new ks({props:{size:i[4]}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&16&&(s.size=n[4]),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ji(i){let e,t;return e=new st({props:{title:"Поменять местами с верхним",$$slots:{default:[lm]},$$scope:{ctx:i}}}),e.$on("click",i[5]("up")),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&272&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function lm(i){let e,t;return e=new xo({props:{size:i[4]}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&16&&(s.size=n[4]),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Hi(i){let e,t;return e=new st({props:{title:"Поменять местами с нижним",$$slots:{default:[um]},$$scope:{ctx:i}}}),e.$on("click",i[5]("down")),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&272&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function um(i){let e,t;return e=new zo({props:{size:i[4]}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&16&&(s.size=n[4]),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Wi(i){let e,t;return e=new st({props:{title:"Удалить фрейм",type:"danger",$$slots:{default:[fm]},$$scope:{ctx:i}}}),e.$on("click",i[5]("remove")),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&272&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function fm(i){let e,t;return e=new Ou({props:{size:i[4]}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&16&&(s.size=n[4]),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function cm(i){let e,t,n,r,s,a,o,l=i[2]&&Gi(i),u=i[0]&&ji(i),f=i[1]&&Hi(i);const c=i[7].default,h=Me(c,i,i[8],null);let m=i[3]&&Wi(i);return{c(){e=J("footer"),l&&l.c(),t=oe(),u&&u.c(),n=oe(),f&&f.c(),r=oe(),h&&h.c(),s=oe(),m&&m.c(),this.h()},l(d){e=Q(d,"FOOTER",{style:!0,class:!0});var p=ie(e);l&&l.l(p),t=le(p),u&&u.l(p),n=le(p),f&&f.l(p),r=le(p),h&&h.l(p),s=le(p),m&&m.l(p),p.forEach(E),this.h()},h(){G(e,"style",a=`--buttons-height: ${i[4]+16}px`),G(e,"class","svelte-zcq5oe")},m(d,p){O(d,e,p),l&&l.m(e,null),V(e,t),u&&u.m(e,null),V(e,n),f&&f.m(e,null),V(e,r),h&&h.m(e,null),V(e,s),m&&m.m(e,null),o=!0},p(d,[p]){d[2]?l?(l.p(d,p),p&4&&w(l,1)):(l=Gi(d),l.c(),w(l,1),l.m(e,t)):l&&(Ve(),y(l,1,1,()=>{l=null}),qe()),d[0]?u?(u.p(d,p),p&1&&w(u,1)):(u=ji(d),u.c(),w(u,1),u.m(e,n)):u&&(Ve(),y(u,1,1,()=>{u=null}),qe()),d[1]?f?(f.p(d,p),p&2&&w(f,1)):(f=Hi(d),f.c(),w(f,1),f.m(e,r)):f&&(Ve(),y(f,1,1,()=>{f=null}),qe()),h&&h.p&&(!o||p&256)&&ze(h,c,d,d[8],o?Ue(c,d[8],p,null):De(d[8]),null),d[3]?m?(m.p(d,p),p&8&&w(m,1)):(m=Wi(d),m.c(),w(m,1),m.m(e,null)):m&&(Ve(),y(m,1,1,()=>{m=null}),qe()),(!o||p&16&&a!==(a=`--buttons-height: ${d[4]+16}px`))&&G(e,"style",a)},i(d){o||(w(l),w(u),w(f),w(h,d),w(m),o=!0)},o(d){y(l),y(u),y(f),y(h,d),y(m),o=!1},d(d){d&&E(e),l&&l.d(),u&&u.d(),f&&f.d(),h&&h.d(d),m&&m.d()}}}function hm(i,e,t){let{$$slots:n={},$$scope:r}=e,{value:s}=e,{up:a=!1}=e,{down:o=!1}=e,{copy:l=!1}=e,{remove:u=!1}=e,{iconSize:f=16}=e;const c=Et();function h(m){return d=>{d.preventDefault(),d.stopPropagation(),c(m,s)}}return i.$$set=m=>{"value"in m&&t(6,s=m.value),"up"in m&&t(0,a=m.up),"down"in m&&t(1,o=m.down),"copy"in m&&t(2,l=m.copy),"remove"in m&&t(3,u=m.remove),"iconSize"in m&&t(4,f=m.iconSize),"$$scope"in m&&t(8,r=m.$$scope)},[a,o,l,u,f,h,s,n,r]}class Mr extends ke{constructor(e){super(),Ae(this,e,hm,cm,Ee,{value:6,up:0,down:1,copy:2,remove:3,iconSize:4})}}function mm(i){let e,t,n=i[0]+1+"",r,s,a,o,l;const u=i[4].default,f=Me(u,i,i[3],null);return{c(){e=J("article"),t=J("header"),r=ue(n),s=oe(),a=J("canvas"),o=oe(),f&&f.c(),this.h()},l(c){e=Q(c,"ARTICLE",{class:!0});var h=ie(e);t=Q(h,"HEADER",{class:!0});var m=ie(t);r=fe(m,n),m.forEach(E),s=le(h),a=Q(h,"CANVAS",{class:!0}),ie(a).forEach(E),o=le(h),f&&f.l(h),h.forEach(E),this.h()},h(){G(t,"class","svelte-awjzj9"),G(a,"class","svelte-awjzj9"),G(e,"class","svelte-awjzj9")},m(c,h){O(c,e,h),V(e,t),V(t,r),V(e,s),V(e,a),i[5](a),V(e,o),f&&f.m(e,null),l=!0},p(c,[h]){(!l||h&1)&&n!==(n=c[0]+1+"")&&ut(r,n),f&&f.p&&(!l||h&8)&&ze(f,u,c,c[3],l?Ue(u,c[3],h,null):De(c[3]),null)},i(c){l||(w(f,c),l=!0)},o(c){y(f,c),l=!1},d(c){c&&E(e),i[5](null),f&&f.d(c)}}}function dm(i,e,t){let{$$slots:n={},$$scope:r}=e,s,a,{index:o}=e;const l=f=>{const c=s.clientWidth,m=c/f.width*f.height|0;s.width!=c&&t(1,s.width=c,s),s.height!=m&&t(1,s.height=m,s),a.clearRect(0,0,c,m),a.drawImage(f,0,0,c,m)};cn(()=>{a=s.getContext("2d")});function u(f){ge[f?"unshift":"push"](()=>{s=f,t(1,s)})}return i.$$set=f=>{"index"in f&&t(0,o=f.index),"$$scope"in f&&t(3,r=f.$$scope)},[o,s,l,r,n,u]}class pm extends ke{constructor(e){super(),Ae(this,e,dm,mm,Ee,{index:0,updatePreview:2})}get updatePreview(){return this.$$.ctx[2]}}function _m(i){let e;return{c(){e=ue("Что-то пошло не так...")},l(t){e=fe(t,"Что-то пошло не так...")},m(t,n){O(t,e,n)},d(t){t&&E(e)}}}function gm(i){let e;return{c(){e=ue("Прямоугольник")},l(t){e=fe(t,"Прямоугольник")},m(t,n){O(t,e,n)},d(t){t&&E(e)}}}function bm(i){let e;return{c(){e=ue("Глобальный")},l(t){e=fe(t,"Глобальный")},m(t,n){O(t,e,n)},d(t){t&&E(e)}}}function $m(i){let e;function t(s,a){return s[13]=="global"?bm:s[13]=="rectangle"?gm:_m}let n=t(i),r=n(i);return{c(){r.c(),e=Ze()},l(s){r.l(s),e=Ze()},m(s,a){r.m(s,a),O(s,e,a)},p(s,a){n!==(n=t(s))&&(r.d(1),r=n(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){r.d(s),s&&E(e)}}}function vm(i){let e,t;return e=new mt({props:{$$slots:{default:[Am]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&16385&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function wm(i){let e,t;return e=new mt({props:{$$slots:{default:[Fm]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&16385&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ym(i){let e,t,n;return t=new Je({props:{min:0,max:100,step:.5,value:i[0].value.maxWidth*100}}),t.$on("change",i[10]),{c(){e=ue("Максимальная ширина (%): "),B(t.$$.fragment)},l(r){e=fe(r,"Максимальная ширина (%): "),M(t.$$.fragment,r)},m(r,s){O(r,e,s),z(t,r,s),n=!0},p(r,s){const a={};s&1&&(a.value=r[0].value.maxWidth*100),t.$set(a)},i(r){n||(w(t.$$.fragment,r),n=!0)},o(r){y(t.$$.fragment,r),n=!1},d(r){r&&E(e),D(t,r)}}}function Em(i){let e,t,n;return t=new Je({props:{min:0,max:100,step:.5,value:i[0].value.maxHeight*100}}),t.$on("change",i[11]),{c(){e=ue("Максимальная высота (%): "),B(t.$$.fragment)},l(r){e=fe(r,"Максимальная высота (%): "),M(t.$$.fragment,r)},m(r,s){O(r,e,s),z(t,r,s),n=!0},p(r,s){const a={};s&1&&(a.value=r[0].value.maxHeight*100),t.$set(a)},i(r){n||(w(t.$$.fragment,r),n=!0)},o(r){y(t.$$.fragment,r),n=!1},d(r){r&&E(e),D(t,r)}}}function km(i){let e,t,n;return t=new Je({props:{min:0,max:100,step:.5,value:i[0].value.minHeight*100}}),t.$on("change",i[12]),{c(){e=ue("Минимальная высота (%): "),B(t.$$.fragment)},l(r){e=fe(r,"Минимальная высота (%): "),M(t.$$.fragment,r)},m(r,s){O(r,e,s),z(t,r,s),n=!0},p(r,s){const a={};s&1&&(a.value=r[0].value.minHeight*100),t.$set(a)},i(r){n||(w(t.$$.fragment,r),n=!0)},o(r){y(t.$$.fragment,r),n=!1},d(r){r&&E(e),D(t,r)}}}function Am(i){let e,t,n,r,s,a;return e=new Oe({props:{$$slots:{default:[ym]},$$scope:{ctx:i}}}),n=new Oe({props:{$$slots:{default:[Em]},$$scope:{ctx:i}}}),s=new Oe({props:{$$slots:{default:[km]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment),t=oe(),B(n.$$.fragment),r=oe(),B(s.$$.fragment)},l(o){M(e.$$.fragment,o),t=le(o),M(n.$$.fragment,o),r=le(o),M(s.$$.fragment,o)},m(o,l){z(e,o,l),O(o,t,l),z(n,o,l),O(o,r,l),z(s,o,l),a=!0},p(o,l){const u={};l&16385&&(u.$$scope={dirty:l,ctx:o}),e.$set(u);const f={};l&16385&&(f.$$scope={dirty:l,ctx:o}),n.$set(f);const c={};l&16385&&(c.$$scope={dirty:l,ctx:o}),s.$set(c)},i(o){a||(w(e.$$.fragment,o),w(n.$$.fragment,o),w(s.$$.fragment,o),a=!0)},o(o){y(e.$$.fragment,o),y(n.$$.fragment,o),y(s.$$.fragment,o),a=!1},d(o){D(e,o),o&&E(t),D(n,o),o&&E(r),D(s,o)}}}function Sm(i){let e,t,n,r;function s(o){i[6](o)}let a={};return i[0].value.position!==void 0&&(a.value=i[0].value.position),t=new Yt({props:a}),ge.push(()=>$e(t,"value",s)),{c(){e=ue("Позиция "),B(t.$$.fragment)},l(o){e=fe(o,"Позиция "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].value.position,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function Tm(i){let e,t,n,r;function s(o){i[7](o)}let a={};return i[0].value.width!==void 0&&(a.value=i[0].value.width),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),{c(){e=ue("Ширина "),B(t.$$.fragment)},l(o){e=fe(o,"Ширина "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].value.width,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function Im(i){let e,t,n,r;function s(o){i[8](o)}let a={};return i[0].value.height!==void 0&&(a.value=i[0].value.height),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),{c(){e=ue("Высота "),B(t.$$.fragment)},l(o){e=fe(o,"Высота "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].value.height,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function Cm(i){let e,t,n;return t=new Je({props:{step:1,value:Math.round(i[0].value.rotation/Math.PI*180)}}),t.$on("change",i[9]),{c(){e=ue("Поворот "),B(t.$$.fragment)},l(r){e=fe(r,"Поворот "),M(t.$$.fragment,r)},m(r,s){O(r,e,s),z(t,r,s),n=!0},p(r,s){const a={};s&1&&(a.value=Math.round(r[0].value.rotation/Math.PI*180)),t.$set(a)},i(r){n||(w(t.$$.fragment,r),n=!0)},o(r){y(t.$$.fragment,r),n=!1},d(r){r&&E(e),D(t,r)}}}function Fm(i){let e,t,n,r,s,a,o,l;return e=new Oe({props:{$$slots:{default:[Sm]},$$scope:{ctx:i}}}),n=new Oe({props:{$$slots:{default:[Tm]},$$scope:{ctx:i}}}),s=new Oe({props:{$$slots:{default:[Im]},$$scope:{ctx:i}}}),o=new Oe({props:{$$slots:{default:[Cm]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment),t=oe(),B(n.$$.fragment),r=oe(),B(s.$$.fragment),a=oe(),B(o.$$.fragment)},l(u){M(e.$$.fragment,u),t=le(u),M(n.$$.fragment,u),r=le(u),M(s.$$.fragment,u),a=le(u),M(o.$$.fragment,u)},m(u,f){z(e,u,f),O(u,t,f),z(n,u,f),O(u,r,f),z(s,u,f),O(u,a,f),z(o,u,f),l=!0},p(u,f){const c={};f&16385&&(c.$$scope={dirty:f,ctx:u}),e.$set(c);const h={};f&16385&&(h.$$scope={dirty:f,ctx:u}),n.$set(h);const m={};f&16385&&(m.$$scope={dirty:f,ctx:u}),s.$set(m);const d={};f&16385&&(d.$$scope={dirty:f,ctx:u}),o.$set(d)},i(u){l||(w(e.$$.fragment,u),w(n.$$.fragment,u),w(s.$$.fragment,u),w(o.$$.fragment,u),l=!0)},o(u){y(e.$$.fragment,u),y(n.$$.fragment,u),y(s.$$.fragment,u),y(o.$$.fragment,u),l=!1},d(u){D(e,u),u&&E(t),D(n,u),u&&E(r),D(s,u),u&&E(a),D(o,u)}}}function Rm(i){let e,t,n,r,s,a;t=new Tt({props:{value:i[0].type,items:i[2],$$slots:{default:[$m,({item:f})=>({13:f}),({item:f})=>f?8192:0]},$$scope:{ctx:i}}}),t.$on("change",i[5]);const o=[wm,vm],l=[];function u(f,c){return f[0].type=="rectangle"?0:f[0].type=="global"?1:-1}return~(r=u(i))&&(s=l[r]=o[r](i)),{c(){e=J("article"),B(t.$$.fragment),n=oe(),s&&s.c()},l(f){e=Q(f,"ARTICLE",{});var c=ie(e);M(t.$$.fragment,c),n=le(c),s&&s.l(c),c.forEach(E)},m(f,c){O(f,e,c),z(t,e,null),V(e,n),~r&&l[r].m(e,null),a=!0},p(f,[c]){const h={};c&1&&(h.value=f[0].type),c&24576&&(h.$$scope={dirty:c,ctx:f}),t.$set(h);let m=r;r=u(f),r===m?~r&&l[r].p(f,c):(s&&(Ve(),y(l[m],1,1,()=>{l[m]=null}),qe()),~r?(s=l[r],s?s.p(f,c):(s=l[r]=o[r](f),s.c()),w(s,1),s.m(e,null)):s=null)},i(f){a||(w(t.$$.fragment,f),w(s),a=!0)},o(f){y(t.$$.fragment,f),y(s),a=!1},d(f){f&&E(e),D(t),~r&&l[r].d()}}}function Pm(i,e,t){let{container:n}=e,{frameWidth:r}=e,{frameHeight:s}=e;function a(_){if(_=="global"){t(0,n.value={maxWidth:.95,maxHeight:.4,minHeight:.1},n),t(0,n.type="global",n);return}t(0,n.value={width:r/2,height:s/2,position:{x:r/2,y:s/2},rotation:0},n),t(0,n.type="rectangle",n)}const o=["global","rectangle"],l=_=>a(_.detail.value);function u(_){i.$$.not_equal(n.value.position,_)&&(n.value.position=_,t(0,n))}function f(_){i.$$.not_equal(n.value.width,_)&&(n.value.width=_,t(0,n))}function c(_){i.$$.not_equal(n.value.height,_)&&(n.value.height=_,t(0,n))}const h=_=>{n.type==="rectangle"&&t(0,n.value.rotation=_.detail%360/180*Math.PI,n)},m=_=>{n.type==="global"&&t(0,n.value.maxWidth=_.detail/100,n)},d=_=>{n.type==="global"&&t(0,n.value.maxHeight=_.detail/100,n)},p=_=>{n.type==="global"&&t(0,n.value.minHeight=_.detail/100,n)};return i.$$set=_=>{"container"in _&&t(0,n=_.container),"frameWidth"in _&&t(3,r=_.frameWidth),"frameHeight"in _&&t(4,s=_.frameHeight)},[n,a,o,r,s,l,u,f,c,h,m,d,p]}class Nm extends ke{constructor(e){super(),Ae(this,e,Pm,Rm,Ee,{container:0,frameWidth:3,frameHeight:4})}}function Bm(i){let e=i[5]+"",t;return{c(){t=ue(e)},l(n){t=fe(n,e)},m(n,r){O(n,t,r)},p(n,r){r&32&&e!==(e=n[5]+"")&&ut(t,e)},i:nt,o:nt,d(n){n&&E(t)}}}function Mm(i){let e,t;return e=new Mu({props:{size:i[2]}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&4&&(s.size=n[2]),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function zm(i){let e,t;return e=new Fu({props:{size:i[2]}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&4&&(s.size=n[2]),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Dm(i){let e,t;return e=new Yo({props:{size:i[2]}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&4&&(s.size=n[2]),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Um(i){let e,t;return e=new nl({props:{size:i[2]}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r&4&&(s.size=n[2]),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Lm(i){let e,t,n,r;const s=[Um,Dm,zm,Mm,Bm],a=[];function o(l,u){return l[5]=="Top"?0:l[5]=="Bottom"?1:l[5]=="Free"?2:l[5]=="Custom"?3:4}return e=o(i),t=a[e]=s[e](i),{c(){t.c(),n=Ze()},l(l){t.l(l),n=Ze()},m(l,u){a[e].m(l,u),O(l,n,u),r=!0},p(l,u){let f=e;e=o(l),e===f?a[e].p(l,u):(Ve(),y(a[f],1,1,()=>{a[f]=null}),qe(),t=a[e],t?t.p(l,u):(t=a[e]=s[e](l),t.c()),w(t,1),t.m(n.parentNode,n))},i(l){r||(w(t),r=!0)},o(l){y(t),r=!1},d(l){a[e].d(l),l&&E(n)}}}function Om(i){let e,t;return e=new Tt({props:{css:{height:`${i[2]+16}px`,width:"100%",main:"flex:1;"},items:["Top","Bottom","Free","Custom"],placeholder:"Custom",value:i[0].type=="rectangle"&&i[1].baseline=="middle"?"Free":i[0].type=="global"&&i[1].baseline=="top"?"Top":i[0].type=="global"&&i[1].baseline=="bottom"?"Bottom":"Custom",$$slots:{default:[Lm,({item:n})=>({5:n}),({item:n})=>n?32:0]},$$scope:{ctx:i}}}),e.$on("change",i[3]),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&4&&(s.css={height:`${n[2]+16}px`,width:"100%",main:"flex:1;"}),r&3&&(s.value=n[0].type=="rectangle"&&n[1].baseline=="middle"?"Free":n[0].type=="global"&&n[1].baseline=="top"?"Top":n[0].type=="global"&&n[1].baseline=="bottom"?"Bottom":"Custom"),r&100&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function xm(i,e,t){let{container:n}=e,{style:r}=e,{frame:s}=e,{iconSize:a=16}=e;function o(l){switch(l.detail.value){case"Top":{n.type!=="global"&&t(0,n.value={maxWidth:.95,maxHeight:.4,minHeight:.1},n),t(0,n.type="global",n),t(1,r.baseline="top",r);break}case"Bottom":{n.type!=="global"&&t(0,n.value={maxWidth:.95,maxHeight:.4,minHeight:.1},n),t(0,n.type="global",n),t(1,r.baseline="bottom",r);break}case"Free":{t(0,n.value={width:s.width/2,height:s.height/2,position:{x:s.width/2,y:s.height/2},rotation:0},n),t(0,n.type="rectangle",n),t(1,r.baseline="middle",r);break}}}return i.$$set=l=>{"container"in l&&t(0,n=l.container),"style"in l&&t(1,r=l.style),"frame"in l&&t(4,s=l.frame),"iconSize"in l&&t(2,a=l.iconSize)},[n,r,a,o,s]}class Gm extends ke{constructor(e){super(),Ae(this,e,xm,Om,Ee,{container:0,style:1,frame:4,iconSize:2})}}function jm(i){let e,t,n,r,s,a,o,l,u,f,c,h,m,d,p,_,b,v,A,k,N;return{c(){e=J("p"),t=ue(`Мемейкер – редактор мемов прямо в браузере. В первую очередь он разрабатывался как простое
			средство наложения текста с обводкой на картинку. С его помощью можно быстро создать типичный
			мем с импактом и обводкой, обыграть постиронию лобстером с тенью или набросать
			многокартиночный мем, не мучаясь со слоями или кучей разных файлов в графическом редакторе.`),n=oe(),r=J("p"),s=ue("Стабильная версия доступна по адресу "),a=J("a"),o=ue("https://robolabgs2.github.io/memaker/"),l=ue(`
			Самая же свежая версия доступна здесь:
			`),u=J("a"),f=ue("https://robolabgs2.github.io/memaker-prerelease/"),c=ue(`. Нулевая версия редактора увидела свет 24 августа 2022 года, с тех пор редактор
			разрабатывается одним человеком в свободное время. Пожаловаться на баги или запросить фичу
			можно в обсуждениях
			`),h=J("a"),m=ue("в группе ВК"),d=ue(`
			или через issue
			`),p=J("a"),_=ue("на гитхабе"),b=ue("."),v=oe(),A=J("p"),k=ue("Версия: "),N=ue(i[0]),this.h()},l(T){e=Q(T,"P",{class:!0});var F=ie(e);t=fe(F,`Мемейкер – редактор мемов прямо в браузере. В первую очередь он разрабатывался как простое
			средство наложения текста с обводкой на картинку. С его помощью можно быстро создать типичный
			мем с импактом и обводкой, обыграть постиронию лобстером с тенью или набросать
			многокартиночный мем, не мучаясь со слоями или кучей разных файлов в графическом редакторе.`),F.forEach(E),n=le(T),r=Q(T,"P",{class:!0});var L=ie(r);s=fe(L,"Стабильная версия доступна по адресу "),a=Q(L,"A",{href:!0,target:!0,rel:!0,title:!0,class:!0});var P=ie(a);o=fe(P,"https://robolabgs2.github.io/memaker/"),P.forEach(E),l=fe(L,`
			Самая же свежая версия доступна здесь:
			`),u=Q(L,"A",{href:!0,target:!0,rel:!0,title:!0,class:!0});var U=ie(u);f=fe(U,"https://robolabgs2.github.io/memaker-prerelease/"),U.forEach(E),c=fe(L,`. Нулевая версия редактора увидела свет 24 августа 2022 года, с тех пор редактор
			разрабатывается одним человеком в свободное время. Пожаловаться на баги или запросить фичу
			можно в обсуждениях
			`),h=Q(L,"A",{target:!0,rel:!0,title:!0,href:!0,class:!0});var ae=ie(h);m=fe(ae,"в группе ВК"),ae.forEach(E),d=fe(L,`
			или через issue
			`),p=Q(L,"A",{target:!0,rel:!0,title:!0,href:!0,class:!0});var I=ie(p);_=fe(I,"на гитхабе"),I.forEach(E),b=fe(L,"."),L.forEach(E),v=le(T),A=Q(T,"P",{class:!0});var C=ie(A);k=fe(C,"Версия: "),N=fe(C,i[0]),C.forEach(E),this.h()},h(){G(e,"class","svelte-17axcd5"),G(a,"href","https://robolabgs2.github.io/memaker/"),G(a,"target","_blank"),G(a,"rel","noreferrer"),G(a,"title","Стабильная версия"),G(a,"class","svelte-17axcd5"),G(u,"href","https://robolabgs2.github.io/memaker-prerelease/"),G(u,"target","_blank"),G(u,"rel","noreferrer"),G(u,"title","Последняя версия"),G(u,"class","svelte-17axcd5"),G(h,"target","_blank"),G(h,"rel","noreferrer"),G(h,"title","Группа ВК"),G(h,"href","https://vk.com/memaker_app"),G(h,"class","svelte-17axcd5"),G(p,"target","_blank"),G(p,"rel","noreferrer"),G(p,"title","GitHub репозиторий"),G(p,"href","https://github.com/RobolabGs2/memaker"),G(p,"class","svelte-17axcd5"),G(r,"class","svelte-17axcd5"),G(A,"class","svelte-17axcd5")},m(T,F){O(T,e,F),V(e,t),O(T,n,F),O(T,r,F),V(r,s),V(r,a),V(a,o),V(r,l),V(r,u),V(u,f),V(r,c),V(r,h),V(h,m),V(r,d),V(r,p),V(p,_),V(r,b),O(T,v,F),O(T,A,F),V(A,k),V(A,N)},p(T,F){F&1&&ut(N,T[0])},d(T){T&&E(e),T&&E(n),T&&E(r),T&&E(v),T&&E(A)}}}function Hm(i){let e;return{c(){e=ue("О проекте")},l(t){e=fe(t,"О проекте")},m(t,n){O(t,e,n)},d(t){t&&E(e)}}}function Wm(i){let e,t,n,r,s;return{c(){e=J("p"),t=ue("Скоро changelog будет доступен здесь, но пока его можно посмотреть на "),n=J("a"),r=ue("GitHub"),s=ue("."),this.h()},l(a){e=Q(a,"P",{class:!0});var o=ie(e);t=fe(o,"Скоро changelog будет доступен здесь, но пока его можно посмотреть на "),n=Q(o,"A",{target:!0,rel:!0,title:!0,href:!0,class:!0});var l=ie(n);r=fe(l,"GitHub"),l.forEach(E),s=fe(o,"."),o.forEach(E),this.h()},h(){G(n,"target","_blank"),G(n,"rel","noreferrer"),G(n,"title","Changelog"),G(n,"href","https://github.com/RobolabGs2/memaker/blob/main/CHANGELOG.md"),G(n,"class","svelte-17axcd5"),G(e,"class","svelte-17axcd5")},m(a,o){O(a,e,o),V(e,t),V(e,n),V(n,r),V(e,s)},p:nt,d(a){a&&E(e)}}}function Vm(i){let e;return{c(){e=ue("История версий")},l(t){e=fe(t,"История версий")},m(t,n){O(t,e,n)},d(t){t&&E(e)}}}function qm(i){let e,t,n,r,s,a,o,l,u,f,c,h,m,d,p,_,b,v,A,k,N,T,F,L,P,U,ae,I,C;function $(de){i[4](de)}let Z={$$slots:{title:[Hm],default:[jm]},$$scope:{ctx:i}};i[1]!==void 0&&(Z.open=i[1]),t=new on({props:Z}),ge.push(()=>$e(t,"open",$));function we(de){i[5](de)}let x={$$slots:{title:[Vm],default:[Wm]},$$scope:{ctx:i}};return i[2]!==void 0&&(x.open=i[2]),s=new on({props:x}),ge.push(()=>$e(s,"open",we)),d=new Rl({props:{size:_n}}),b=new zl({props:{size:_n}}),k=new xl({props:{size:_n}}),F=new ol({props:{size:_n}}),U=new hl({props:{size:_n}}),{c(){e=J("main"),B(t.$$.fragment),r=oe(),B(s.$$.fragment),o=oe(),l=J("header"),u=ue("Memaker "),f=ue(i[0]),c=oe(),h=J("section"),m=J("div"),B(d.$$.fragment),p=oe(),_=J("div"),B(b.$$.fragment),v=oe(),A=J("div"),B(k.$$.fragment),N=oe(),T=J("a"),B(F.$$.fragment),L=oe(),P=J("a"),B(U.$$.fragment),this.h()},l(de){e=Q(de,"MAIN",{class:!0});var te=ie(e);M(t.$$.fragment,te),r=le(te),M(s.$$.fragment,te),o=le(te),l=Q(te,"HEADER",{class:!0});var Te=ie(l);u=fe(Te,"Memaker "),f=fe(Te,i[0]),Te.forEach(E),c=le(te),h=Q(te,"SECTION",{class:!0});var H=ie(h);m=Q(H,"DIV",{title:!0,class:!0});var W=ie(m);M(d.$$.fragment,W),W.forEach(E),p=le(H),_=Q(H,"DIV",{title:!0,class:!0});var Y=ie(_);M(b.$$.fragment,Y),Y.forEach(E),v=le(H),A=Q(H,"DIV",{title:!0,class:!0});var ee=ie(A);M(k.$$.fragment,ee),ee.forEach(E),N=le(H),T=Q(H,"A",{target:!0,rel:!0,title:!0,href:!0,class:!0});var pe=ie(T);M(F.$$.fragment,pe),pe.forEach(E),L=le(H),P=Q(H,"A",{target:!0,rel:!0,title:!0,href:!0,class:!0});var se=ie(P);M(U.$$.fragment,se),se.forEach(E),H.forEach(E),te.forEach(E),this.h()},h(){G(l,"class","svelte-17axcd5"),G(m,"title","Открыть пример"),G(m,"class","svelte-17axcd5"),G(_,"title","История версий приложения"),G(_,"class","svelte-17axcd5"),G(A,"title","О проекте"),G(A,"class","svelte-17axcd5"),G(T,"target","_blank"),G(T,"rel","noreferrer"),G(T,"title","GitHub репозиторий"),G(T,"href","https://github.com/RobolabGs2/memaker"),G(T,"class","svelte-17axcd5"),G(P,"target","_blank"),G(P,"rel","noreferrer"),G(P,"title","Группа ВК"),G(P,"href","https://vk.com/memaker_app"),G(P,"class","svelte-17axcd5"),G(h,"class","svelte-17axcd5"),G(e,"class","svelte-17axcd5")},m(de,te){O(de,e,te),z(t,e,null),V(e,r),z(s,e,null),V(e,o),V(e,l),V(l,u),V(l,f),V(e,c),V(e,h),V(h,m),z(d,m,null),V(h,p),V(h,_),z(b,_,null),V(h,v),V(h,A),z(k,A,null),V(h,N),V(h,T),z(F,T,null),V(h,L),V(h,P),z(U,P,null),ae=!0,I||(C=[Pe(m,"click",i[6]),Pe(_,"click",i[7]),Pe(A,"click",i[8])],I=!0)},p(de,[te]){const Te={};te&513&&(Te.$$scope={dirty:te,ctx:de}),!n&&te&2&&(n=!0,Te.open=de[1],ve(()=>n=!1)),t.$set(Te);const H={};te&512&&(H.$$scope={dirty:te,ctx:de}),!a&&te&4&&(a=!0,H.open=de[2],ve(()=>a=!1)),s.$set(H),(!ae||te&1)&&ut(f,de[0])},i(de){ae||(w(t.$$.fragment,de),w(s.$$.fragment,de),w(d.$$.fragment,de),w(b.$$.fragment,de),w(k.$$.fragment,de),w(F.$$.fragment,de),w(U.$$.fragment,de),ae=!0)},o(de){y(t.$$.fragment,de),y(s.$$.fragment,de),y(d.$$.fragment,de),y(b.$$.fragment,de),y(k.$$.fragment,de),y(F.$$.fragment,de),y(U.$$.fragment,de),ae=!1},d(de){de&&E(e),D(t),D(s),D(d),D(b),D(k),D(F),D(U),I=!1,ft(C)}}}let _n=24;function Zm(i,e,t){let{version:n}=e;const r=Et();let s=!1,a=!1;function o(h){s=h,t(1,s)}function l(h){a=h,t(2,a)}const u=()=>r("openExample"),f=()=>t(2,a=!0),c=()=>t(1,s=!0);return i.$$set=h=>{"version"in h&&t(0,n=h.version)},[n,s,a,r,o,l,u,f,c]}class Xm extends ke{constructor(e){super(),Ae(this,e,Zm,qm,Ee,{version:0})}}function Km(i){let e,t,n,r;function s(o){i[1](o)}let a={min:-1,max:1,step:.05};return i[0].brightness!==void 0&&(a.value=i[0].brightness),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[2]),{c(){e=ue("Яркость"),B(t.$$.fragment)},l(o){e=fe(o,"Яркость"),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].brightness,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function Ym(i){let e,t,n,r;function s(o){i[3](o)}let a={min:-1,max:1,step:.05};return i[0].contrast!==void 0&&(a.value=i[0].contrast),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[4]),{c(){e=ue("Контраст"),B(t.$$.fragment)},l(o){e=fe(o,"Контраст"),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].contrast,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function Jm(i){let e,t,n,r;return e=new Oe({props:{$$slots:{default:[Km]},$$scope:{ctx:i}}}),n=new Oe({props:{$$slots:{default:[Ym]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment),t=oe(),B(n.$$.fragment)},l(s){M(e.$$.fragment,s),t=le(s),M(n.$$.fragment,s)},m(s,a){z(e,s,a),O(s,t,a),z(n,s,a),r=!0},p(s,a){const o={};a&33&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&33&&(l.$$scope={dirty:a,ctx:s}),n.$set(l)},i(s){r||(w(e.$$.fragment,s),w(n.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),y(n.$$.fragment,s),r=!1},d(s){D(e,s),s&&E(t),D(n,s)}}}function Qm(i){let e,t;return e=new mt({props:{$$slots:{default:[Jm]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&33&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ed(i,e,t){let{value:n}=e;function r(l){i.$$.not_equal(n.brightness,l)&&(n.brightness=l,t(0,n))}function s(l){ye.call(this,i,l)}function a(l){i.$$.not_equal(n.contrast,l)&&(n.contrast=l,t(0,n))}function o(l){ye.call(this,i,l)}return i.$$set=l=>{"value"in l&&t(0,n=l.value)},[n,r,s,a,o]}class td extends ke{constructor(e){super(),Ae(this,e,ed,Qm,Ee,{value:0})}}function nd(i){let e,t,n,r;function s(o){i[1](o)}let a={min:0,max:1.5,step:.05};return i[0].strength!==void 0&&(a.value=i[0].strength),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[2]),{c(){e=ue("Сила "),B(t.$$.fragment)},l(o){e=fe(o,"Сила "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].strength,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function rd(i){let e,t,n,r;function s(o){i[3](o)}let a={min:0,step:1};return i[0].radius!==void 0&&(a.value=i[0].radius),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[4]),{c(){e=ue("Радиус "),B(t.$$.fragment)},l(o){e=fe(o,"Радиус "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].radius,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function id(i){let e,t,n,r;function s(o){i[5](o)}let a={};return i[0].center!==void 0&&(a.value=i[0].center),t=new Yt({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[6]),{c(){e=ue("Центр "),B(t.$$.fragment)},l(o){e=fe(o,"Центр "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].center,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function sd(i){let e,t,n,r,s,a;return e=new Oe({props:{$$slots:{default:[nd]},$$scope:{ctx:i}}}),n=new Oe({props:{$$slots:{default:[rd]},$$scope:{ctx:i}}}),s=new Oe({props:{$$slots:{default:[id]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment),t=oe(),B(n.$$.fragment),r=oe(),B(s.$$.fragment)},l(o){M(e.$$.fragment,o),t=le(o),M(n.$$.fragment,o),r=le(o),M(s.$$.fragment,o)},m(o,l){z(e,o,l),O(o,t,l),z(n,o,l),O(o,r,l),z(s,o,l),a=!0},p(o,l){const u={};l&129&&(u.$$scope={dirty:l,ctx:o}),e.$set(u);const f={};l&129&&(f.$$scope={dirty:l,ctx:o}),n.$set(f);const c={};l&129&&(c.$$scope={dirty:l,ctx:o}),s.$set(c)},i(o){a||(w(e.$$.fragment,o),w(n.$$.fragment,o),w(s.$$.fragment,o),a=!0)},o(o){y(e.$$.fragment,o),y(n.$$.fragment,o),y(s.$$.fragment,o),a=!1},d(o){D(e,o),o&&E(t),D(n,o),o&&E(r),D(s,o)}}}function ad(i){let e,t;return e=new mt({props:{$$slots:{default:[sd]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&129&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function od(i,e,t){let{value:n}=e;function r(f){i.$$.not_equal(n.strength,f)&&(n.strength=f,t(0,n))}function s(f){ye.call(this,i,f)}function a(f){i.$$.not_equal(n.radius,f)&&(n.radius=f,t(0,n))}function o(f){ye.call(this,i,f)}function l(f){i.$$.not_equal(n.center,f)&&(n.center=f,t(0,n))}function u(f){ye.call(this,i,f)}return i.$$set=f=>{"value"in f&&t(0,n=f.value)},[n,r,s,a,o,l,u]}class ld extends ke{constructor(e){super(),Ae(this,e,od,ad,Ee,{value:0})}}function ud(i){let e,t,n,r;function s(o){i[1](o)}let a={min:0,step:1};return i[0].radius!==void 0&&(a.value=i[0].radius),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[2]),{c(){e=ue("Радиус "),B(t.$$.fragment)},l(o){e=fe(o,"Радиус "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].radius,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function fd(i){let e,t,n,r;function s(o){i[3](o)}let a={min:0,max:1,step:.05};return i[0].minAlpha!==void 0&&(a.value=i[0].minAlpha),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[4]),{c(){e=ue("Минимальный альфа-канал "),B(t.$$.fragment)},l(o){e=fe(o,"Минимальный альфа-канал "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].minAlpha,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function cd(i){let e,t,n,r;function s(o){i[5](o)}let a={min:0,max:1,step:.05};return i[0].maxAlpha!==void 0&&(a.value=i[0].maxAlpha),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[6]),{c(){e=ue("Максимальный альфа-канал "),B(t.$$.fragment)},l(o){e=fe(o,"Максимальный альфа-канал "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].maxAlpha,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function hd(i){let e,t,n,r,s,a;return e=new Oe({props:{$$slots:{default:[ud]},$$scope:{ctx:i}}}),n=new Oe({props:{$$slots:{default:[fd]},$$scope:{ctx:i}}}),s=new Oe({props:{$$slots:{default:[cd]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment),t=oe(),B(n.$$.fragment),r=oe(),B(s.$$.fragment)},l(o){M(e.$$.fragment,o),t=le(o),M(n.$$.fragment,o),r=le(o),M(s.$$.fragment,o)},m(o,l){z(e,o,l),O(o,t,l),z(n,o,l),O(o,r,l),z(s,o,l),a=!0},p(o,l){const u={};l&129&&(u.$$scope={dirty:l,ctx:o}),e.$set(u);const f={};l&129&&(f.$$scope={dirty:l,ctx:o}),n.$set(f);const c={};l&129&&(c.$$scope={dirty:l,ctx:o}),s.$set(c)},i(o){a||(w(e.$$.fragment,o),w(n.$$.fragment,o),w(s.$$.fragment,o),a=!0)},o(o){y(e.$$.fragment,o),y(n.$$.fragment,o),y(s.$$.fragment,o),a=!1},d(o){D(e,o),o&&E(t),D(n,o),o&&E(r),D(s,o)}}}function md(i){let e,t;return e=new mt({props:{$$slots:{default:[hd]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&129&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function dd(i,e,t){let{value:n}=e;function r(f){i.$$.not_equal(n.radius,f)&&(n.radius=f,t(0,n))}function s(f){ye.call(this,i,f)}function a(f){i.$$.not_equal(n.minAlpha,f)&&(n.minAlpha=f,t(0,n))}function o(f){ye.call(this,i,f)}function l(f){i.$$.not_equal(n.maxAlpha,f)&&(n.maxAlpha=f,t(0,n))}function u(f){ye.call(this,i,f)}return i.$$set=f=>{"value"in f&&t(0,n=f.value)},[n,r,s,a,o,l,u]}class pd extends ke{constructor(e){super(),Ae(this,e,dd,md,Ee,{value:0})}}function _d(i){let e,t,n,r;function s(o){i[1](o)}let a={min:0,max:1.5,step:.05};return i[0].strength!==void 0&&(a.value=i[0].strength),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[2]),{c(){e=ue("Сила "),B(t.$$.fragment)},l(o){e=fe(o,"Сила "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].strength,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function gd(i){let e,t,n,r;function s(o){i[3](o)}let a={min:0,step:1};return i[0].radius!==void 0&&(a.value=i[0].radius),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[4]),{c(){e=ue("Радиус "),B(t.$$.fragment)},l(o){e=fe(o,"Радиус "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].radius,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function bd(i){let e,t,n,r;function s(o){i[5](o)}let a={};return i[0].center!==void 0&&(a.value=i[0].center),t=new Yt({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[6]),{c(){e=ue("Центр "),B(t.$$.fragment)},l(o){e=fe(o,"Центр "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].center,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function $d(i){let e,t,n,r,s,a;return e=new Oe({props:{$$slots:{default:[_d]},$$scope:{ctx:i}}}),n=new Oe({props:{$$slots:{default:[gd]},$$scope:{ctx:i}}}),s=new Oe({props:{$$slots:{default:[bd]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment),t=oe(),B(n.$$.fragment),r=oe(),B(s.$$.fragment)},l(o){M(e.$$.fragment,o),t=le(o),M(n.$$.fragment,o),r=le(o),M(s.$$.fragment,o)},m(o,l){z(e,o,l),O(o,t,l),z(n,o,l),O(o,r,l),z(s,o,l),a=!0},p(o,l){const u={};l&129&&(u.$$scope={dirty:l,ctx:o}),e.$set(u);const f={};l&129&&(f.$$scope={dirty:l,ctx:o}),n.$set(f);const c={};l&129&&(c.$$scope={dirty:l,ctx:o}),s.$set(c)},i(o){a||(w(e.$$.fragment,o),w(n.$$.fragment,o),w(s.$$.fragment,o),a=!0)},o(o){y(e.$$.fragment,o),y(n.$$.fragment,o),y(s.$$.fragment,o),a=!1},d(o){D(e,o),o&&E(t),D(n,o),o&&E(r),D(s,o)}}}function vd(i){let e,t;return e=new mt({props:{$$slots:{default:[$d]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&129&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function wd(i,e,t){let{value:n}=e;function r(f){i.$$.not_equal(n.strength,f)&&(n.strength=f,t(0,n))}function s(f){ye.call(this,i,f)}function a(f){i.$$.not_equal(n.radius,f)&&(n.radius=f,t(0,n))}function o(f){ye.call(this,i,f)}function l(f){i.$$.not_equal(n.center,f)&&(n.center=f,t(0,n))}function u(f){ye.call(this,i,f)}return i.$$set=f=>{"value"in f&&t(0,n=f.value)},[n,r,s,a,o,l,u]}class yd extends ke{constructor(e){super(),Ae(this,e,wd,vd,Ee,{value:0})}}function Ed(i){let e,t,n,r;function s(o){i[1](o)}let a={step:.5};return i[0].angle!==void 0&&(a.value=i[0].angle),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[2]),{c(){e=ue("Угол "),B(t.$$.fragment)},l(o){e=fe(o,"Угол "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].angle,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function kd(i){let e,t,n,r;function s(o){i[3](o)}let a={min:0,step:1};return i[0].radius!==void 0&&(a.value=i[0].radius),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[4]),{c(){e=ue("Радиус "),B(t.$$.fragment)},l(o){e=fe(o,"Радиус "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].radius,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function Ad(i){let e,t,n,r;function s(o){i[5](o)}let a={};return i[0].center!==void 0&&(a.value=i[0].center),t=new Yt({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[6]),{c(){e=ue("Центр "),B(t.$$.fragment)},l(o){e=fe(o,"Центр "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].center,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function Sd(i){let e,t,n,r,s,a;return e=new Oe({props:{$$slots:{default:[Ed]},$$scope:{ctx:i}}}),n=new Oe({props:{$$slots:{default:[kd]},$$scope:{ctx:i}}}),s=new Oe({props:{$$slots:{default:[Ad]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment),t=oe(),B(n.$$.fragment),r=oe(),B(s.$$.fragment)},l(o){M(e.$$.fragment,o),t=le(o),M(n.$$.fragment,o),r=le(o),M(s.$$.fragment,o)},m(o,l){z(e,o,l),O(o,t,l),z(n,o,l),O(o,r,l),z(s,o,l),a=!0},p(o,l){const u={};l&129&&(u.$$scope={dirty:l,ctx:o}),e.$set(u);const f={};l&129&&(f.$$scope={dirty:l,ctx:o}),n.$set(f);const c={};l&129&&(c.$$scope={dirty:l,ctx:o}),s.$set(c)},i(o){a||(w(e.$$.fragment,o),w(n.$$.fragment,o),w(s.$$.fragment,o),a=!0)},o(o){y(e.$$.fragment,o),y(n.$$.fragment,o),y(s.$$.fragment,o),a=!1},d(o){D(e,o),o&&E(t),D(n,o),o&&E(r),D(s,o)}}}function Td(i){let e,t;return e=new mt({props:{$$slots:{default:[Sd]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&129&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Id(i,e,t){let{value:n}=e;function r(f){i.$$.not_equal(n.angle,f)&&(n.angle=f,t(0,n))}function s(f){ye.call(this,i,f)}function a(f){i.$$.not_equal(n.radius,f)&&(n.radius=f,t(0,n))}function o(f){ye.call(this,i,f)}function l(f){i.$$.not_equal(n.center,f)&&(n.center=f,t(0,n))}function u(f){ye.call(this,i,f)}return i.$$set=f=>{"value"in f&&t(0,n=f.value)},[n,r,s,a,o,l,u]}class Cd extends ke{constructor(e){super(),Ae(this,e,Id,Td,Ee,{value:0})}}function Fd(i){let e,t,n,r;function s(o){i[1](o)}let a={min:1e3,max:2e4,step:100};return i[0].temperature!==void 0&&(a.value=i[0].temperature),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[2]),{c(){e=ue("Температура "),B(t.$$.fragment)},l(o){e=fe(o,"Температура "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].temperature,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function Rd(i){let e,t,n,r;function s(o){i[3](o)}let a={min:-1,max:1,step:.05};return i[0].strength!==void 0&&(a.value=i[0].strength),t=new Je({props:a}),ge.push(()=>$e(t,"value",s)),t.$on("change",i[4]),{c(){e=ue("Сила "),B(t.$$.fragment)},l(o){e=fe(o,"Сила "),M(t.$$.fragment,o)},m(o,l){O(o,e,l),z(t,o,l),r=!0},p(o,l){const u={};!n&&l&1&&(n=!0,u.value=o[0].strength,ve(()=>n=!1)),t.$set(u)},i(o){r||(w(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){o&&E(e),D(t,o)}}}function Pd(i){let e,t,n,r;return e=new Oe({props:{$$slots:{default:[Fd]},$$scope:{ctx:i}}}),n=new Oe({props:{$$slots:{default:[Rd]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment),t=oe(),B(n.$$.fragment)},l(s){M(e.$$.fragment,s),t=le(s),M(n.$$.fragment,s)},m(s,a){z(e,s,a),O(s,t,a),z(n,s,a),r=!0},p(s,a){const o={};a&33&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&33&&(l.$$scope={dirty:a,ctx:s}),n.$set(l)},i(s){r||(w(e.$$.fragment,s),w(n.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),y(n.$$.fragment,s),r=!1},d(s){D(e,s),s&&E(t),D(n,s)}}}function Nd(i){let e,t;return e=new mt({props:{$$slots:{default:[Pd]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,[r]){const s={};r&33&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Bd(i,e,t){let{value:n}=e;function r(l){i.$$.not_equal(n.temperature,l)&&(n.temperature=l,t(0,n))}function s(l){ye.call(this,i,l)}function a(l){i.$$.not_equal(n.strength,l)&&(n.strength=l,t(0,n))}function o(l){ye.call(this,i,l)}return i.$$set=l=>{"value"in l&&t(0,n=l.value)},[n,r,s,a,o]}class Md extends ke{constructor(e){super(),Ae(this,e,Bd,Nd,Ee,{value:0})}}function dr(i){const e=i.slice(),t=e[1].value.settings.type;return e[22]=t,e}function zd(i){let e=i[7][i[21]]+"",t;return{c(){t=ue(e)},l(n){t=fe(n,e)},m(n,r){O(n,t,r)},p(n,r){r&2097152&&e!==(e=n[7][n[21]]+"")&&ut(t,e)},d(n){n&&E(t)}}}function Vi(i){let e,t,n;function r(a){i[19](a)}let s={reverse:!0,items:i[0].map(Zi),$$slots:{default:[Hd,({item:a})=>({21:a}),({item:a})=>a?2097152:0]},$$scope:{ctx:i}};return i[1]!==void 0&&(s.active=i[1]),e=new kr({props:s}),ge.push(()=>$e(e,"active",r)),{c(){B(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,o){z(e,a,o),n=!0},p(a,o){const l={};o&1&&(l.items=a[0].map(Zi)),o&10485762&&(l.$$scope={dirty:o,ctx:a}),!t&&o&2&&(t=!0,l.active=a[1],ve(()=>t=!1)),e.$set(l)},i(a){n||(w(e.$$.fragment,a),n=!0)},o(a){y(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function qi(i){let e,t,n,r;const s=[jd,Gd,xd,Od,Ld,Ud,Dd],a=[];function o(l,u){return l[22]==="brightness_contrast"?0:l[22]==="temperature"?1:l[22]==="bugle"?2:l[22]==="pinch"?3:l[22]==="swirl"?4:l[22]==="noise"?5:l[22]!=="grayscale"?6:-1}return~(e=o(i))&&(t=a[e]=s[e](i)),{c(){t&&t.c(),n=Ze()},l(l){t&&t.l(l),n=Ze()},m(l,u){~e&&a[e].m(l,u),O(l,n,u),r=!0},p(l,u){let f=e;e=o(l),e===f?~e&&a[e].p(l,u):(t&&(Ve(),y(a[f],1,1,()=>{a[f]=null}),qe()),~e?(t=a[e],t?t.p(l,u):(t=a[e]=s[e](l),t.c()),w(t,1),t.m(n.parentNode,n)):t=null)},i(l){r||(w(t),r=!0)},o(l){y(t),r=!1},d(l){~e&&a[e].d(l),l&&E(n)}}}function Dd(i){let e,t,n,r,s;function a(l){i[18](l)}let o={};return i[1].value.settings!==void 0&&(o.value=i[1].value.settings),t=new Cs({props:o}),ge.push(()=>$e(t,"value",a)),{c(){e=J("div"),B(t.$$.fragment),this.h()},l(l){e=Q(l,"DIV",{class:!0});var u=ie(e);M(t.$$.fragment,u),u.forEach(E),this.h()},h(){G(e,"class","svelte-19bln0u")},m(l,u){O(l,e,u),z(t,e,null),s=!0},p(l,u){const f={};!n&&u&2&&(n=!0,f.value=l[1].value.settings,ve(()=>n=!1)),t.$set(f)},i(l){s||(w(t.$$.fragment,l),gt(()=>{r||(r=Xe(e,Ke,{},!0)),r.run(1)}),s=!0)},o(l){y(t.$$.fragment,l),r||(r=Xe(e,Ke,{},!1)),r.run(0),s=!1},d(l){l&&E(e),D(t),l&&r&&r.end()}}}function Ud(i){let e,t,n,r,s;function a(l){i[17](l)}let o={};return i[1].value.settings!==void 0&&(o.value=i[1].value.settings),t=new pd({props:o}),ge.push(()=>$e(t,"value",a)),{c(){e=J("div"),B(t.$$.fragment),this.h()},l(l){e=Q(l,"DIV",{class:!0});var u=ie(e);M(t.$$.fragment,u),u.forEach(E),this.h()},h(){G(e,"class","svelte-19bln0u")},m(l,u){O(l,e,u),z(t,e,null),s=!0},p(l,u){const f={};!n&&u&2&&(n=!0,f.value=l[1].value.settings,ve(()=>n=!1)),t.$set(f)},i(l){s||(w(t.$$.fragment,l),gt(()=>{r||(r=Xe(e,Ke,{},!0)),r.run(1)}),s=!0)},o(l){y(t.$$.fragment,l),r||(r=Xe(e,Ke,{},!1)),r.run(0),s=!1},d(l){l&&E(e),D(t),l&&r&&r.end()}}}function Ld(i){let e,t,n,r,s;function a(l){i[16](l)}let o={};return i[1].value.settings!==void 0&&(o.value=i[1].value.settings),t=new Cd({props:o}),ge.push(()=>$e(t,"value",a)),{c(){e=J("div"),B(t.$$.fragment),this.h()},l(l){e=Q(l,"DIV",{class:!0});var u=ie(e);M(t.$$.fragment,u),u.forEach(E),this.h()},h(){G(e,"class","svelte-19bln0u")},m(l,u){O(l,e,u),z(t,e,null),s=!0},p(l,u){const f={};!n&&u&2&&(n=!0,f.value=l[1].value.settings,ve(()=>n=!1)),t.$set(f)},i(l){s||(w(t.$$.fragment,l),gt(()=>{r||(r=Xe(e,Ke,{},!0)),r.run(1)}),s=!0)},o(l){y(t.$$.fragment,l),r||(r=Xe(e,Ke,{},!1)),r.run(0),s=!1},d(l){l&&E(e),D(t),l&&r&&r.end()}}}function Od(i){let e,t,n,r,s;function a(l){i[15](l)}let o={};return i[1].value.settings!==void 0&&(o.value=i[1].value.settings),t=new yd({props:o}),ge.push(()=>$e(t,"value",a)),{c(){e=J("div"),B(t.$$.fragment),this.h()},l(l){e=Q(l,"DIV",{class:!0});var u=ie(e);M(t.$$.fragment,u),u.forEach(E),this.h()},h(){G(e,"class","svelte-19bln0u")},m(l,u){O(l,e,u),z(t,e,null),s=!0},p(l,u){const f={};!n&&u&2&&(n=!0,f.value=l[1].value.settings,ve(()=>n=!1)),t.$set(f)},i(l){s||(w(t.$$.fragment,l),gt(()=>{r||(r=Xe(e,Ke,{},!0)),r.run(1)}),s=!0)},o(l){y(t.$$.fragment,l),r||(r=Xe(e,Ke,{},!1)),r.run(0),s=!1},d(l){l&&E(e),D(t),l&&r&&r.end()}}}function xd(i){let e,t,n,r,s;function a(l){i[14](l)}let o={};return i[1].value.settings!==void 0&&(o.value=i[1].value.settings),t=new ld({props:o}),ge.push(()=>$e(t,"value",a)),{c(){e=J("div"),B(t.$$.fragment),this.h()},l(l){e=Q(l,"DIV",{class:!0});var u=ie(e);M(t.$$.fragment,u),u.forEach(E),this.h()},h(){G(e,"class","svelte-19bln0u")},m(l,u){O(l,e,u),z(t,e,null),s=!0},p(l,u){const f={};!n&&u&2&&(n=!0,f.value=l[1].value.settings,ve(()=>n=!1)),t.$set(f)},i(l){s||(w(t.$$.fragment,l),gt(()=>{r||(r=Xe(e,Ke,{},!0)),r.run(1)}),s=!0)},o(l){y(t.$$.fragment,l),r||(r=Xe(e,Ke,{},!1)),r.run(0),s=!1},d(l){l&&E(e),D(t),l&&r&&r.end()}}}function Gd(i){let e,t,n,r,s;function a(l){i[13](l)}let o={};return i[1].value.settings!==void 0&&(o.value=i[1].value.settings),t=new Md({props:o}),ge.push(()=>$e(t,"value",a)),{c(){e=J("div"),B(t.$$.fragment),this.h()},l(l){e=Q(l,"DIV",{class:!0});var u=ie(e);M(t.$$.fragment,u),u.forEach(E),this.h()},h(){G(e,"class","svelte-19bln0u")},m(l,u){O(l,e,u),z(t,e,null),s=!0},p(l,u){const f={};!n&&u&2&&(n=!0,f.value=l[1].value.settings,ve(()=>n=!1)),t.$set(f)},i(l){s||(w(t.$$.fragment,l),gt(()=>{r||(r=Xe(e,Ke,{},!0)),r.run(1)}),s=!0)},o(l){y(t.$$.fragment,l),r||(r=Xe(e,Ke,{},!1)),r.run(0),s=!1},d(l){l&&E(e),D(t),l&&r&&r.end()}}}function jd(i){let e,t,n,r,s;function a(l){i[12](l)}let o={};return i[1].value.settings!==void 0&&(o.value=i[1].value.settings),t=new td({props:o}),ge.push(()=>$e(t,"value",a)),{c(){e=J("div"),B(t.$$.fragment),this.h()},l(l){e=Q(l,"DIV",{class:!0});var u=ie(e);M(t.$$.fragment,u),u.forEach(E),this.h()},h(){G(e,"class","svelte-19bln0u")},m(l,u){O(l,e,u),z(t,e,null),s=!0},p(l,u){const f={};!n&&u&2&&(n=!0,f.value=l[1].value.settings,ve(()=>n=!1)),t.$set(f)},i(l){s||(w(t.$$.fragment,l),gt(()=>{r||(r=Xe(e,Ke,{},!0)),r.run(1)}),s=!0)},o(l){y(t.$$.fragment,l),r||(r=Xe(e,Ke,{},!1)),r.run(0),s=!1},d(l){l&&E(e),D(t),l&&r&&r.end()}}}function Hd(i){let e,t=i[7][i[21].value.settings.type]+"",n,r,s,a,o,l,u;s=new Mr({props:{value:i[21].value,up:!0,down:!0,remove:!0}}),s.$on("up",i[5]),s.$on("down",i[6]),s.$on("remove",i[4]);let f=i[21].id===i[1].id&&qi(dr(i));return{c(){e=J("section"),n=ue(t),r=oe(),B(s.$$.fragment),o=oe(),f&&f.c(),l=Ze(),this.h()},l(c){e=Q(c,"SECTION",{class:!0});var h=ie(e);n=fe(h,t),r=le(h),M(s.$$.fragment,h),h.forEach(E),o=le(c),f&&f.l(c),l=Ze(),this.h()},h(){G(e,"class","preview svelte-19bln0u")},m(c,h){O(c,e,h),V(e,n),V(e,r),z(s,e,null),O(c,o,h),f&&f.m(c,h),O(c,l,h),u=!0},p(c,h){(!u||h&2097152)&&t!==(t=c[7][c[21].value.settings.type]+"")&&ut(n,t);const m={};h&2097152&&(m.value=c[21].value),s.$set(m),c[21].id===c[1].id?f?(f.p(dr(c),h),h&2097154&&w(f,1)):(f=qi(dr(c)),f.c(),w(f,1),f.m(l.parentNode,l)):f&&(Ve(),y(f,1,1,()=>{f=null}),qe())},i(c){u||(w(s.$$.fragment,c),c&&gt(()=>{a||(a=Xe(e,Ke,{},!0)),a.run(1)}),w(f),u=!0)},o(c){y(s.$$.fragment,c),c&&(a||(a=Xe(e,Ke,{},!1)),a.run(0)),y(f),u=!1},d(c){c&&E(e),D(s),c&&a&&a.end(),c&&E(o),f&&f.d(c),c&&E(l)}}}function Wd(i){let e,t,n,r,s,a;function o(f){i[10](f)}let l={type:"primary",hideOnClick:!0,items:i[8],placeholder:vn,$$slots:{default:[zd,({item:f})=>({21:f}),({item:f})=>f?2097152:0]},$$scope:{ctx:i}};i[2]!==void 0&&(l.value=i[2]),n=new Tt({props:l}),ge.push(()=>$e(n,"value",o)),n.$on("change",i[3]),n.$on("change",i[11]);let u=i[0].length&&Vi(i);return{c(){e=J("article"),t=J("header"),B(n.$$.fragment),s=oe(),u&&u.c(),this.h()},l(f){e=Q(f,"ARTICLE",{class:!0});var c=ie(e);t=Q(c,"HEADER",{});var h=ie(t);M(n.$$.fragment,h),h.forEach(E),s=le(c),u&&u.l(c),c.forEach(E),this.h()},h(){G(e,"class","svelte-19bln0u")},m(f,c){O(f,e,c),V(e,t),z(n,t,null),V(e,s),u&&u.m(e,null),a=!0},p(f,[c]){const h={};c&10485760&&(h.$$scope={dirty:c,ctx:f}),!r&&c&4&&(r=!0,h.value=f[2],ve(()=>r=!1)),n.$set(h),f[0].length?u?(u.p(f,c),c&1&&w(u,1)):(u=Vi(f),u.c(),w(u,1),u.m(e,null)):u&&(Ve(),y(u,1,1,()=>{u=null}),qe())},i(f){a||(w(n.$$.fragment,f),w(u),a=!0)},o(f){y(n.$$.fragment,f),y(u),a=!1},d(f){f&&E(e),D(n),u&&u.d()}}}const vn="__add__",Zi=i=>({id:i,value:i});function Vd(i,e,t){let{value:n}=e,{defaults:r}=e;function s(L){if(t(2,m=vn),L.detail.value===vn)return;const P=r(L.detail.value);if(!P)return;const U=n.push({settings:structuredClone(P)})-1;t(0,n),t(1,h={id:n[U],value:n[U]})}function a(L){return P=>{const U=P.detail,ae=n.indexOf(U);if(ae===-1){console.warn(`Not found effect in list ${U.settings.type}`);return}const I=ae+L;I<0||n.length<=I||(t(0,n[ae]=n[I],n),t(0,n[I]=U,n))}}function o(L){const P=L.detail,U=n.indexOf(P);if(U===-1){console.warn(`Not found effect in list ${P.settings.type}`);return}if(n.splice(U,1),t(0,n),h.id===P&&n.length){const ae=Math.max(0,U-1);t(1,h={id:n[ae],value:n[ae]})}}const l=a(1),u=a(-1),f={bugle:"Выпуклость",pinch:"Вогнутость",swirl:"Закрученность",grayscale:"Оттенки серого",brightness_contrast:"Яркость и контраст",temperature:"Температура",noise:"Шум",[vn]:"Добавить эффект"},c=Object.keys(f);let h={id:n[0],value:n[0]},m=vn;function d(L){m=L,t(2,m)}function p(L){ye.call(this,i,L)}function _(L){i.$$.not_equal(h.value.settings,L)&&(h.value.settings=L,t(1,h),t(0,n))}function b(L){i.$$.not_equal(h.value.settings,L)&&(h.value.settings=L,t(1,h),t(0,n))}function v(L){i.$$.not_equal(h.value.settings,L)&&(h.value.settings=L,t(1,h),t(0,n))}function A(L){i.$$.not_equal(h.value.settings,L)&&(h.value.settings=L,t(1,h),t(0,n))}function k(L){i.$$.not_equal(h.value.settings,L)&&(h.value.settings=L,t(1,h),t(0,n))}function N(L){i.$$.not_equal(h.value.settings,L)&&(h.value.settings=L,t(1,h),t(0,n))}function T(L){i.$$.not_equal(h.value.settings,L)&&(h.value.settings=L,t(1,h),t(0,n))}function F(L){h=L,t(1,h),t(0,n)}return i.$$set=L=>{"value"in L&&t(0,n=L.value),"defaults"in L&&t(9,r=L.defaults)},i.$$.update=()=>{i.$$.dirty&3&&!h.value&&n.length&&(t(1,h.value=n[n.length-1],h),t(1,h.id=h.value,h))},[n,h,m,s,o,l,u,f,c,r,d,p,_,b,v,A,k,N,T,F]}class qd extends ke{constructor(e){super(),Ae(this,e,Vd,Wd,Ee,{value:0,defaults:9})}}function Zd(i){let e,t,n,r,s;return e=new As({}),{c(){B(e.$$.fragment),t=oe(),n=J("span"),r=ue("Новый фрейм"),this.h()},l(a){M(e.$$.fragment,a),t=le(a),n=Q(a,"SPAN",{class:!0});var o=ie(n);r=fe(o,"Новый фрейм"),o.forEach(E),this.h()},h(){G(n,"class","svelte-b3d010")},m(a,o){z(e,a,o),O(a,t,o),O(a,n,o),V(n,r),s=!0},p:nt,i(a){s||(w(e.$$.fragment,a),s=!0)},o(a){y(e.$$.fragment,a),s=!1},d(a){D(e,a),a&&E(t),a&&E(n)}}}function Xd(i){let e,t;function n(){return i[12](i[43])}function r(){return i[13](i[43])}function s(){return i[14](i[43])}function a(){return i[15](i[43])}return e=new Mr({props:{up:!0,down:!0,remove:!0,copy:!0,value:i[43]}}),e.$on("up",n),e.$on("down",r),e.$on("remove",s),e.$on("copy",a),{c(){B(e.$$.fragment)},l(o){M(e.$$.fragment,o)},m(o,l){z(e,o,l),t=!0},p(o,l){i=o;const u={};l[1]&4096&&(u.value=i[43]),e.$set(u)},i(o){t||(w(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){D(e,o)}}}function Kd(i){let e,t,n;function r(a){i[16](a,i[43])}let s={index:i[44],$$slots:{default:[Xd]},$$scope:{ctx:i}};return i[2][i[43].id]!==void 0&&(s.updatePreview=i[2][i[43].id]),e=new pm({props:s}),ge.push(()=>$e(e,"updatePreview",r)),{c(){B(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,o){z(e,a,o),n=!0},p(a,o){i=a;const l={};o[1]&8192&&(l.index=i[44]),o[1]&20480&&(l.$$scope={dirty:o,ctx:i}),!t&&o[0]&4|o[1]&4096&&(t=!0,l.updatePreview=i[2][i[43].id],ve(()=>t=!1)),e.$set(l)},i(a){n||(w(e.$$.fragment,a),n=!0)},o(a){y(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function Yd(i){let e,t,n,r,s;return e=new cu({props:{size:24}}),{c(){B(e.$$.fragment),t=oe(),n=J("span"),r=ue("Скачать мем"),this.h()},l(a){M(e.$$.fragment,a),t=le(a),n=Q(a,"SPAN",{class:!0});var o=ie(n);r=fe(o,"Скачать мем"),o.forEach(E),this.h()},h(){G(n,"class","svelte-b3d010")},m(a,o){z(e,a,o),O(a,t,o),O(a,n,o),V(n,r),s=!0},p:nt,i(a){s||(w(e.$$.fragment,a),s=!0)},o(a){y(e.$$.fragment,a),s=!1},d(a){D(e,a),a&&E(t),a&&E(n)}}}function Jd(i){let e,t,n,r,s;return e=new Sl({props:{size:24}}),{c(){B(e.$$.fragment),t=oe(),n=J("span"),r=ue("Сохранить проект мема"),this.h()},l(a){M(e.$$.fragment,a),t=le(a),n=Q(a,"SPAN",{class:!0});var o=ie(n);r=fe(o,"Сохранить проект мема"),o.forEach(E),this.h()},h(){G(n,"class","svelte-b3d010")},m(a,o){z(e,a,o),O(a,t,o),O(a,n,o),V(n,r),s=!0},p:nt,i(a){s||(w(e.$$.fragment,a),s=!0)},o(a){y(e.$$.fragment,a),s=!1},d(a){D(e,a),a&&E(t),a&&E(n)}}}function Qd(i){let e,t,n,r;return e=new Wu({props:{size:24}}),{c(){B(e.$$.fragment),t=J("span"),n=ue("Открыть проект мема"),this.h()},l(s){M(e.$$.fragment,s),t=Q(s,"SPAN",{class:!0});var a=ie(t);n=fe(a,"Открыть проект мема"),a.forEach(E),this.h()},h(){G(t,"class","svelte-b3d010")},m(s,a){z(e,s,a),O(s,t,a),V(t,n),r=!0},p:nt,i(s){r||(w(e.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),r=!1},d(s){D(e,s),s&&E(t)}}}function ep(i){let e,t;return e=new st({props:{type:"primary",justifyContent:"flex-start",$$slots:{default:[Qd]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r[1]&16384&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function tp(i){let e,t,n,r;return e=new _u({props:{size:24}}),{c(){B(e.$$.fragment),t=J("span"),n=ue("Сменить фон"),this.h()},l(s){M(e.$$.fragment,s),t=Q(s,"SPAN",{class:!0});var a=ie(t);n=fe(a,"Сменить фон"),a.forEach(E),this.h()},h(){G(t,"class","svelte-b3d010")},m(s,a){z(e,s,a),O(s,t,a),V(t,n),r=!0},p:nt,i(s){r||(w(e.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),r=!1},d(s){D(e,s),s&&E(t)}}}function np(i){let e,t;return e=new st({props:{type:"primary",justifyContent:"flex-start",$$slots:{default:[tp]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r[1]&16384&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function rp(i){let e,t,n,r;return e=new ks({}),{c(){B(e.$$.fragment),t=J("span"),n=ue("Копировать"),this.h()},l(s){M(e.$$.fragment,s),t=Q(s,"SPAN",{class:!0});var a=ie(t);n=fe(a,"Копировать"),a.forEach(E),this.h()},h(){G(t,"class","svelte-b3d010")},m(s,a){z(e,s,a),O(s,t,a),V(t,n),r=!0},p:nt,i(s){r||(w(e.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),r=!1},d(s){D(e,s),s&&E(t)}}}function ip(i){let e,t,n,r,s;return e=new As({}),{c(){B(e.$$.fragment),t=oe(),n=J("span"),r=ue("Новый блок"),this.h()},l(a){M(e.$$.fragment,a),t=le(a),n=Q(a,"SPAN",{class:!0});var o=ie(n);r=fe(o,"Новый блок"),o.forEach(E),this.h()},h(){G(n,"class","svelte-b3d010")},m(a,o){z(e,a,o),O(a,t,o),O(a,n,o),V(n,r),s=!0},p:nt,i(a){s||(w(e.$$.fragment,a),s=!0)},o(a){y(e.$$.fragment,a),s=!1},d(a){D(e,a),a&&E(t),a&&E(n)}}}function sp(i){let e,t,n,r,s,a;return t=new wu({}),{c(){e=J("div"),B(t.$$.fragment),n=oe(),r=J("span"),s=ue("Фон"),this.h()},l(o){e=Q(o,"DIV",{class:!0});var l=ie(e);M(t.$$.fragment,l),n=le(l),r=Q(l,"SPAN",{class:!0});var u=ie(r);s=fe(u,"Фон"),u.forEach(E),l.forEach(E),this.h()},h(){G(r,"class","svelte-b3d010"),G(e,"class","image-preview svelte-b3d010")},m(o,l){O(o,e,l),z(t,e,null),V(e,n),V(e,r),V(r,s),a=!0},p:nt,i(o){a||(w(t.$$.fragment,o),a=!0)},o(o){y(t.$$.fragment,o),a=!1},d(o){o&&E(e),D(t)}}}function ap(i){let e,t,n,r;const s=[lp,op],a=[];function o(l,u){return l[43].id==l[1].id&&l[1].content.type=="text"?0:1}return e=o(i),t=a[e]=s[e](i),{c(){t.c(),n=Ze()},l(l){t.l(l),n=Ze()},m(l,u){a[e].m(l,u),O(l,n,u),r=!0},p(l,u){let f=e;e=o(l),e===f?a[e].p(l,u):(Ve(),y(a[f],1,1,()=>{a[f]=null}),qe(),t=a[e],t?t.p(l,u):(t=a[e]=s[e](l),t.c()),w(t,1),t.m(n.parentNode,n))},i(l){r||(w(t),r=!0)},o(l){y(t),r=!1},d(l){a[e].d(l),l&&E(n)}}}function op(i){let e,t;return e=new Ps({props:{content:i[43].content.value}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r[1]&4096&&(s.content=n[43].content.value),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function lp(i){let e,t;return e=new Ps({props:{content:i[1].content.value,$$slots:{default:[fp]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.content=n[1].content.value),r[0]&3|r[1]&20480&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function up(i){let e,t,n,r;function s(l){i[29](l)}function a(l){i[30](l)}let o={frame:i[0],iconSize:20};return i[1].content.value.style!==void 0&&(o.style=i[1].content.value.style),i[1].container!==void 0&&(o.container=i[1].container),e=new Gm({props:o}),ge.push(()=>$e(e,"style",s)),ge.push(()=>$e(e,"container",a)),{c(){B(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,u){z(e,l,u),r=!0},p(l,u){const f={};u[0]&1&&(f.frame=l[0]),!t&&u[0]&2&&(t=!0,f.style=l[1].content.value.style,ve(()=>t=!1)),!n&&u[0]&2&&(n=!0,f.container=l[1].container,ve(()=>n=!1)),e.$set(f)},i(l){r||(w(e.$$.fragment,l),r=!0)},o(l){y(e.$$.fragment,l),r=!1},d(l){D(e,l)}}}function fp(i){let e,t;function n(){return i[31](i[43])}function r(){return i[32](i[43])}function s(){return i[33](i[43])}return e=new Mr({props:{up:!0,down:!0,remove:!0,value:i[43],iconSize:20,$$slots:{default:[up]},$$scope:{ctx:i}}}),e.$on("up",n),e.$on("down",r),e.$on("remove",s),{c(){B(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,o){z(e,a,o),t=!0},p(a,o){i=a;const l={};o[1]&4096&&(l.value=i[43]),o[0]&3|o[1]&16384&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){y(e.$$.fragment,a),t=!1},d(a){D(e,a)}}}function cp(i){let e,t,n,r;const s=[ap,sp],a=[];function o(l,u){return l[43].content.type=="text"?0:1}return e=o(i),t=a[e]=s[e](i),{c(){t.c(),n=Ze()},l(l){t.l(l),n=Ze()},m(l,u){a[e].m(l,u),O(l,n,u),r=!0},p(l,u){let f=e;e=o(l),e===f?a[e].p(l,u):(Ve(),y(a[f],1,1,()=>{a[f]=null}),qe(),t=a[e],t?t.p(l,u):(t=a[e]=s[e](l),t.c()),w(t,1),t.m(n.parentNode,n))},i(l){r||(w(t),r=!0)},o(l){y(t),r=!1},d(l){a[e].d(l),l&&E(n)}}}function hp(i){let e,t=i[42]+"",n;return{c(){e=J("span"),n=ue(t),this.h()},l(r){e=Q(r,"SPAN",{class:!0});var s=ie(e);n=fe(s,t),s.forEach(E),this.h()},h(){G(e,"class","svelte-b3d010")},m(r,s){O(r,e,s),V(e,n)},p(r,s){s[1]&2048&&t!==(t=r[42]+"")&&ut(n,t)},d(r){r&&E(e)}}}function mp(i){let e,t,n;function r(a){i[40](a)}let s={defaults:i[39]};return i[1].effects!==void 0&&(s.value=i[1].effects),e=new qd({props:s}),ge.push(()=>$e(e,"value",r)),{c(){B(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,o){z(e,a,o),n=!0},p(a,o){const l={};o[0]&1&&(l.defaults=a[39]),!t&&o[0]&2&&(t=!0,l.value=a[1].effects,ve(()=>t=!1)),e.$set(l)},i(a){n||(w(e.$$.fragment,a),n=!0)},o(a){y(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function dp(i){let e,t,n;function r(a){i[38](a)}let s={frameHeight:i[0].height,frameWidth:i[0].width};return i[1].container!==void 0&&(s.container=i[1].container),e=new Nm({props:s}),ge.push(()=>$e(e,"container",r)),{c(){B(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,o){z(e,a,o),n=!0},p(a,o){const l={};o[0]&1&&(l.frameHeight=a[0].height),o[0]&1&&(l.frameWidth=a[0].width),!t&&o[0]&2&&(t=!0,l.container=a[1].container,ve(()=>t=!1)),e.$set(l)},i(a){n||(w(e.$$.fragment,a),n=!0)},o(a){y(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function pp(i){let e,t,n;function r(a){i[35](a)}let s={};return i[1].content.value!==void 0&&(s.content=i[1].content.value),e=new im({props:s}),ge.push(()=>$e(e,"content",r)),e.$on("change",i[36]),e.$on("addPattern",i[37]),{c(){B(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,o){z(e,a,o),n=!0},p(a,o){const l={};!t&&o[0]&2&&(t=!0,l.content=a[1].content.value,ve(()=>t=!1)),e.$set(l)},i(a){n||(w(e.$$.fragment,a),n=!0)},o(a){y(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function _p(i){let e,t,n,r;const s=[pp,dp,mp],a=[];function o(l,u){return l[42]==="Текст"&&l[1].content.type=="text"?0:l[42]==="Контейнер"?1:l[42]==="Эффекты"?2:-1}return~(t=o(i))&&(n=a[t]=s[t](i)),{c(){e=J("div"),n&&n.c(),this.h()},l(l){e=Q(l,"DIV",{slot:!0});var u=ie(e);n&&n.l(u),u.forEach(E),this.h()},h(){G(e,"slot","content")},m(l,u){O(l,e,u),~t&&a[t].m(e,null),r=!0},p(l,u){let f=t;t=o(l),t===f?~t&&a[t].p(l,u):(n&&(Ve(),y(a[f],1,1,()=>{a[f]=null}),qe()),~t?(n=a[t],n?n.p(l,u):(n=a[t]=s[t](l),n.c()),w(n,1),n.m(e,null)):n=null)},i(l){r||(w(n),r=!0)},o(l){y(n),r=!1},d(l){l&&E(e),~t&&a[t].d()}}}function gp(i){let e,t,n,r,s,a,o,l,u,f,c,h,m,d,p,_,b,v,A,k,N,T,F,L,P,U,ae,I,C,$,Z,we,x,de;n=new st({props:{type:"primary",justifyContent:"flex-start",$$slots:{default:[Zd]},$$scope:{ctx:i}}}),n.$on("click",i[11]);function te(se){i[17](se)}let Te={height:"50%",items:i[5].frames,$$slots:{default:[Kd,({item:se,index:Se})=>({43:se,44:Se}),({item:se,index:Se})=>[0,(se?4096:0)|(Se?8192:0)]]},$$scope:{ctx:i}};i[0]!==void 0&&(Te.active=i[0]),s=new kr({props:Te}),ge.push(()=>$e(s,"active",te)),s.$on("drop",Xi(i[18])),l=new st({props:{type:"primary",justifyContent:"flex-start",$$slots:{default:[Yd]},$$scope:{ctx:i}}}),l.$on("click",i[19]),f=new st({props:{type:"primary",justifyContent:"flex-start",$$slots:{default:[Jd]},$$scope:{ctx:i}}}),f.$on("click",i[20]),h=new Ar({props:{accept:".meme",$$slots:{default:[ep]},$$scope:{ctx:i}}}),h.$on("change",i[21]),d=new Xm({props:{version:i[6]}}),d.$on("openExample",i[22]),v=new Ar({props:{accept:"image/*",typeFilter:/^image\//,$$slots:{default:[np]},$$scope:{ctx:i}}}),v.$on("change",i[23]),k=new st({props:{type:"primary",justifyContent:"flex-start",$$slots:{default:[rp]},$$scope:{ctx:i}}}),k.$on("click",i[24]);function H(se){i[25](se)}function W(se){i[26](se)}let Y={};i[3]!==void 0&&(Y.webgl=i[3]),i[4]!==void 0&&(Y.ui=i[4]),F=new vf({props:Y}),ge.push(()=>$e(F,"webgl",H)),ge.push(()=>$e(F,"ui",W)),F.$on("drop",Xi(i[27])),I=new st({props:{type:"primary",justifyContent:"flex-start",$$slots:{default:[ip]},$$scope:{ctx:i}}}),I.$on("click",i[28]);function ee(se){i[34](se)}let pe={height:"25%",reverse:!0,items:i[0].blocks,$$slots:{default:[cp,({item:se})=>({43:se}),({item:se})=>[0,se?4096:0]]},$$scope:{ctx:i}};return i[1]!==void 0&&(pe.active=i[1]),$=new kr({props:pe}),ge.push(()=>$e($,"active",ee)),x=new Ts({props:{tabs:i[1].content.type==="text"?["Текст","Контейнер","Эффекты"]:["Эффекты"],$$slots:{content:[_p,({tab:se})=>({42:se}),({tab:se})=>[0,se?2048:0]],default:[hp,({tab:se})=>({42:se}),({tab:se})=>[0,se?2048:0]]},$$scope:{ctx:i}}}),{c(){e=J("article"),t=J("section"),B(n.$$.fragment),r=oe(),B(s.$$.fragment),o=oe(),B(l.$$.fragment),u=oe(),B(f.$$.fragment),c=oe(),B(h.$$.fragment),m=oe(),B(d.$$.fragment),p=oe(),_=J("section"),b=J("header"),B(v.$$.fragment),A=oe(),B(k.$$.fragment),N=oe(),T=J("header"),B(F.$$.fragment),U=oe(),ae=J("section"),B(I.$$.fragment),C=oe(),B($.$$.fragment),we=oe(),B(x.$$.fragment),this.h()},l(se){e=Q(se,"ARTICLE",{class:!0});var Se=ie(e);t=Q(Se,"SECTION",{class:!0});var Fe=ie(t);M(n.$$.fragment,Fe),r=le(Fe),M(s.$$.fragment,Fe),o=le(Fe),M(l.$$.fragment,Fe),u=le(Fe),M(f.$$.fragment,Fe),c=le(Fe),M(h.$$.fragment,Fe),m=le(Fe),M(d.$$.fragment,Fe),Fe.forEach(E),p=le(Se),_=Q(Se,"SECTION",{class:!0});var X=ie(_);b=Q(X,"HEADER",{class:!0});var Ne=ie(b);M(v.$$.fragment,Ne),A=le(Ne),M(k.$$.fragment,Ne),Ne.forEach(E),N=le(X),T=Q(X,"HEADER",{class:!0});var ne=ie(T);M(F.$$.fragment,ne),ne.forEach(E),X.forEach(E),U=le(Se),ae=Q(Se,"SECTION",{class:!0});var xe=ie(ae);M(I.$$.fragment,xe),C=le(xe),M($.$$.fragment,xe),we=le(xe),M(x.$$.fragment,xe),xe.forEach(E),Se.forEach(E),this.h()},h(){G(t,"class","svelte-b3d010"),G(b,"class","controls svelte-b3d010"),G(T,"class","canvas svelte-b3d010"),G(_,"class","svelte-b3d010"),G(ae,"class","svelte-b3d010"),G(e,"class","svelte-b3d010")},m(se,Se){O(se,e,Se),V(e,t),z(n,t,null),V(t,r),z(s,t,null),V(t,o),z(l,t,null),V(t,u),z(f,t,null),V(t,c),z(h,t,null),V(t,m),z(d,t,null),V(e,p),V(e,_),V(_,b),z(v,b,null),V(b,A),z(k,b,null),V(_,N),V(_,T),z(F,T,null),V(e,U),V(e,ae),z(I,ae,null),V(ae,C),z($,ae,null),V(ae,we),z(x,ae,null),de=!0},p(se,Se){const Fe={};Se[1]&16384&&(Fe.$$scope={dirty:Se,ctx:se}),n.$set(Fe);const X={};Se[0]&32&&(X.items=se[5].frames),Se[0]&4|Se[1]&28672&&(X.$$scope={dirty:Se,ctx:se}),!a&&Se[0]&1&&(a=!0,X.active=se[0],ve(()=>a=!1)),s.$set(X);const Ne={};Se[1]&16384&&(Ne.$$scope={dirty:Se,ctx:se}),l.$set(Ne);const ne={};Se[1]&16384&&(ne.$$scope={dirty:Se,ctx:se}),f.$set(ne);const xe={};Se[1]&16384&&(xe.$$scope={dirty:Se,ctx:se}),h.$set(xe);const ot={};Se[0]&64&&(ot.version=se[6]),d.$set(ot);const g={};Se[1]&16384&&(g.$$scope={dirty:Se,ctx:se}),v.$set(g);const re={};Se[1]&16384&&(re.$$scope={dirty:Se,ctx:se}),k.$set(re);const K={};!L&&Se[0]&8&&(L=!0,K.webgl=se[3],ve(()=>L=!1)),!P&&Se[0]&16&&(P=!0,K.ui=se[4],ve(()=>P=!1)),F.$set(K);const R={};Se[1]&16384&&(R.$$scope={dirty:Se,ctx:se}),I.$set(R);const S={};Se[0]&1&&(S.items=se[0].blocks),Se[0]&3|Se[1]&20480&&(S.$$scope={dirty:Se,ctx:se}),!Z&&Se[0]&2&&(Z=!0,S.active=se[1],ve(()=>Z=!1)),$.$set(S);const j={};Se[0]&2&&(j.tabs=se[1].content.type==="text"?["Текст","Контейнер","Эффекты"]:["Эффекты"]),Se[0]&3|Se[1]&18432&&(j.$$scope={dirty:Se,ctx:se}),x.$set(j)},i(se){de||(w(n.$$.fragment,se),w(s.$$.fragment,se),w(l.$$.fragment,se),w(f.$$.fragment,se),w(h.$$.fragment,se),w(d.$$.fragment,se),w(v.$$.fragment,se),w(k.$$.fragment,se),w(F.$$.fragment,se),w(I.$$.fragment,se),w($.$$.fragment,se),w(x.$$.fragment,se),de=!0)},o(se){y(n.$$.fragment,se),y(s.$$.fragment,se),y(l.$$.fragment,se),y(f.$$.fragment,se),y(h.$$.fragment,se),y(d.$$.fragment,se),y(v.$$.fragment,se),y(k.$$.fragment,se),y(F.$$.fragment,se),y(I.$$.fragment,se),y($.$$.fragment,se),y(x.$$.fragment,se),de=!1},d(se){se&&E(e),D(n),D(s),D(l),D(f),D(h),D(d),D(v),D(k),D(F),D(I),D($),D(x)}}}function zn(i){i.preventDefault()}function Xi(i){return e=>{var r;e.preventDefault();const t=(r=e.dataTransfer)==null?void 0:r.files;if(!t)return;const n=Array.from(t).filter(s=>{var a;return(a=s.type)==null?void 0:a.match(/^image/)});n.length&&i(n)}}function bp(i,e,t){let{meme:n}=e,{frame:r}=e,{block:s}=e,{previews:a={}}=e,{canvasWebgl:o}=e,{canvasUI:l}=e,{version:u}=e,{memeExampleURL:f}=e;const c=Et();function h(X){c("changeBackground",{file:X})}function m(X){var xe,ot;const Ne=document.activeElement;if(Ne instanceof HTMLInputElement||Ne instanceof HTMLTextAreaElement)return;const ne=(xe=X.clipboardData)==null?void 0:xe.items;if(ne)for(let g=0;g<ne.length;g++){const re=ne[g];if(!((ot=re.type)!=null&&ot.match(/^image/)))continue;const K=re.getAsFile();K&&h(K);return}}cn(()=>(document.addEventListener("paste",m),document.addEventListener("dragover",zn),document.addEventListener("drop",zn),()=>{document.removeEventListener("paste",m),document.removeEventListener("dragover",zn),document.removeEventListener("drop",zn)}));const d=(X,Ne)=>({noise:{type:"noise",radius:10,minAlpha:.5,maxAlpha:1},bugle:{type:"bugle",center:{x:X.width/2|0,y:X.height/2|0},radius:Math.min(X.width,X.height)/3|0,strength:.5},pinch:{type:"pinch",center:{x:X.width/2|0,y:X.height/2|0},radius:Math.min(X.width,X.height)/3|0,strength:.5},swirl:{type:"swirl",center:{x:X.width/2|0,y:X.height/2|0},radius:Math.min(X.width,X.height)/3|0,angle:180},grayscale:{type:"grayscale"},brightness_contrast:{type:"brightness_contrast",brightness:0,contrast:0},temperature:{type:"temperature",temperature:6550,strength:1}})[Ne],p=()=>c("createFrame"),_=X=>c("shiftFrame",{frame:X,shift:-1}),b=X=>c("shiftFrame",{frame:X,shift:1}),v=X=>c("deleteFrame",{frame:X}),A=X=>c("createFrame",{origin:X});function k(X,Ne){i.$$.not_equal(a[Ne.id],X)&&(a[Ne.id]=X,t(2,a))}function N(X){r=X,t(0,r)}const T=X=>c("framesFromImages",{files:X}),F=()=>c("renderMeme",{meme:n}),L=()=>c("saveMeme",{meme:n}),P=X=>c("openMeme",{file:X.detail[0]}),U=()=>fetch(f).then(X=>X.blob()).then(X=>c("openMeme",{file:X})),ae=X=>h(X.detail[0]),I=()=>c("frameToClipboard",{frame:r});function C(X){o=X,t(3,o)}function $(X){l=X,t(4,l)}const Z=X=>c("changeBackground",{file:X[0]}),we=()=>c("createBlock");function x(X){i.$$.not_equal(s.content.value.style,X)&&(s.content.value.style=X,t(1,s))}function de(X){i.$$.not_equal(s.container,X)&&(s.container=X,t(1,s))}const te=X=>c("shiftBlock",{block:X,shift:1}),Te=X=>c("shiftBlock",{block:X,shift:-1}),H=X=>c("deleteBlock",{block:X});function W(X){s=X,t(1,s)}function Y(X){i.$$.not_equal(s.content.value,X)&&(s.content.value=X,t(1,s))}function ee(X){ye.call(this,i,X)}function pe(X){ye.call(this,i,X)}function se(X){i.$$.not_equal(s.container,X)&&(s.container=X,t(1,s))}const Se=X=>d(r,X);function Fe(X){i.$$.not_equal(s.effects,X)&&(s.effects=X,t(1,s))}return i.$$set=X=>{"meme"in X&&t(5,n=X.meme),"frame"in X&&t(0,r=X.frame),"block"in X&&t(1,s=X.block),"previews"in X&&t(2,a=X.previews),"canvasWebgl"in X&&t(3,o=X.canvasWebgl),"canvasUI"in X&&t(4,l=X.canvasUI),"version"in X&&t(6,u=X.version),"memeExampleURL"in X&&t(7,f=X.memeExampleURL)},[r,s,a,o,l,n,u,f,d,c,h,p,_,b,v,A,k,N,T,F,L,P,U,ae,I,C,$,Z,we,x,de,te,Te,H,W,Y,ee,pe,se,Se,Fe]}class $p extends ke{constructor(e){super(),Ae(this,e,bp,gp,Ee,{meme:5,frame:0,block:1,previews:2,canvasWebgl:3,canvasUI:4,version:6,memeExampleURL:7,EffectDefaults:8},null,[-1,-1])}get EffectDefaults(){return this.$$.ctx[8]}}function vp(i){let e,t,n;const r=i[2].default,s=Me(r,i,i[1],null);return{c(){e=J("div"),s&&s.c(),this.h()},l(a){e=Q(a,"DIV",{style:!0,class:!0});var o=ie(e);s&&s.l(o),o.forEach(E),this.h()},h(){G(e,"style",t=Ki(i[0])),G(e,"class","svelte-18sulqr")},m(a,o){O(a,e,o),s&&s.m(e,null),n=!0},p(a,[o]){s&&s.p&&(!n||o&2)&&ze(s,r,a,a[1],n?Ue(r,a[1],o,null):De(a[1]),null),(!n||o&1&&t!==(t=Ki(a[0])))&&G(e,"style",t)},i(a){n||(w(s,a),n=!0)},o(a){y(s,a),n=!1},d(a){a&&E(e),s&&s.d(a)}}}function Ki(i){return Object.entries(i).map(([e,t])=>`--${e.split(new RegExp("(?<=[a-z])(?=[A-Z])")).map(r=>r.toLowerCase()).join("-")}: ${t};`).join("")}function wp(i,e,t){let{$$slots:n={},$$scope:r}=e,{theme:s}=e;return i.$$set=a=>{"theme"in a&&t(0,s=a.theme),"$$scope"in a&&t(1,r=a.$$scope)},[s,r,n]}class yp extends ke{constructor(e){super(),Ae(this,e,wp,vp,Ee,{theme:0})}}const Ep={textSecondary:"white",secondary:"#34352F",secondaryHover:"#3E3D32",secondaryActive:"#272822",borderSecondary:"1px solid #111111",borderSecondaryHover:"1px solid #222222",borderSecondaryActive:"1px solid #aaaaaa",border:"none",textError:"#ff0000"},Yi=An(Ep);class kp{constructor(e,t,n,r){Re(this,"position",{x:0,y:0});Re(this,"moveStart");Re(this,"ctrl",!1);Re(this,"shift",!1);this.canvas=e,e.addEventListener("touchmove",s=>{const a=this.scale,{x:o,y:l}=this.posFromTouchEvent(s);this.position.x=o*a,this.position.y=l*a,this.ctrl=s.ctrlKey,this.shift=s.shiftKey,this.moveStart&&s.preventDefault(),r()}),e.addEventListener("mousemove",s=>{const a=this.scale;this.position.x=s.offsetX*a,this.position.y=s.offsetY*a,this.ctrl=s.ctrlKey,this.shift=s.shiftKey,r()}),e.addEventListener("touchstart",s=>{const a=this.scale,{x:o,y:l}=this.posFromTouchEvent(s);this.position.x=o*a,this.position.y=l*a,this.pressed||(this.moveStart={...this.position},t(this.moveStart,this)?s.preventDefault():this.moveStart=void 0),this.ctrl=s.ctrlKey,this.shift=s.shiftKey,r()},{passive:!0}),e.addEventListener("mousedown",s=>{if(s.button!==0)return;const a=this.scale;this.position.x=s.offsetX*a,this.position.y=s.offsetY*a,this.pressed||(this.moveStart={...this.position},t(this.moveStart,this)),this.ctrl=s.ctrlKey,this.shift=s.shiftKey,r()}),e.addEventListener("touchend",s=>{const a=this.scale,{x:o,y:l}=this.posFromTouchEvent(s);this.position.x=o*a,this.position.y=l*a,this.ctrl=s.ctrlKey,this.shift=s.shiftKey,this.moveStart&&(n(this.moveStart,this.position,this)&&s.preventDefault(),this.moveStart=void 0),s.preventDefault(),r()}),e.addEventListener("mouseup",s=>{if(s.button!==0)return;const a=this.scale;this.position.x=s.offsetX*a,this.position.y=s.offsetY*a,this.ctrl=s.ctrlKey,this.shift=s.shiftKey,this.moveStart&&(n(this.moveStart,this.position,this),this.moveStart=void 0),r()})}get pressed(){return this.moveStart!==void 0}get scale(){const e=this.canvas;return e.width/e.clientWidth}get realSize(){return{width:this.canvas.clientWidth,height:this.canvas.clientHeight}}posFromTouchEvent(e){return this.posFromTouch(e.changedTouches[0])}posFromTouch(e){const t=this.canvas.getBoundingClientRect(),n=e.pageX-t.x,r=e.pageY-t.y;return{x:n,y:r}}}function Ji(i,e){return{x:e.x-i.x,y:e.y-i.y}}function Ap(i,e,t=0){return Math.abs(i.x-e.x)<=t&&Math.abs(i.y-e.y)<=t}class Sp{constructor(e,t,n){Re(this,"sprites",new Array);Re(this,"cursor");Re(this,"dragAndDrop");Re(this,"hoveredSprite");this.dragDropSystemSource=t,this.onupdate=n,this.cursor=new kp(e,()=>{if(this.dragAndDrop)return!0;if(!this.hoveredSprite)return!1;const r=this.dragDropSystemSource(this.hoveredSprite);return r?(this.dragAndDrop={sprite:this.hoveredSprite,system:r,lastPosition:{x:NaN,y:NaN}},!0):!1},(r,s)=>{if(!this.dragAndDrop)return!1;const a=this.dragAndDrop.system;return this.dragAndDrop=void 0,a.drop(r,s,this.cursor),!0},()=>this.update())}add(e){return this.sprites.push(e),e}delete(e){const t=this.sprites.indexOf(e);t!==-1&&this.sprites.splice(t,1)}clear(){var e;(e=this.dragAndDrop)==null||e.system.drop(this.cursor.moveStart,this.cursor.position,this.cursor),this.dragAndDrop=void 0,this.hoveredSprite=void 0,this.sprites.length=0}update(){var t,n;if(this.dragAndDrop){Ap(this.cursor.position,this.dragAndDrop.lastPosition,.001)||(this.dragAndDrop.system.move(this.cursor.moveStart,this.cursor.position,this.cursor),this.dragAndDrop.lastPosition.x=this.cursor.position.x,this.dragAndDrop.lastPosition.y=this.cursor.position.y,(t=this.onupdate)==null||t.call(this));return}const e=this.hoveredSprite;this.hoveredSprite=void 0;for(let r=this.sprites.length-1;r>=0;r--){const s=this.sprites[r];if(s.interactive&&s.contains(this.cursor.position)){this.hoveredSprite=s;break}}e!==this.hoveredSprite&&((n=this.onupdate)==null||n.call(this))}draw(e){this.sprites.forEach(t=>{e.save(),t.draw(e,this.spriteState(t)),e.restore()})}spriteState(e){var t;return((t=this.dragAndDrop)==null?void 0:t.sprite)===e?"active":this.hoveredSprite===e?"hover":"default"}}class lt{constructor(){Re(this,"data",[[0,0,0],[0,0,0],[0,0,0]])}static Zero(){return new lt}static Ident(){const e=new lt;return e.data[0][0]=1,e.data[1][1]=1,e.data[2][2]=1,e}static RotationAround(e,t){return lt.Translate({x:-e.x,y:-e.y}).Multiply(this.Rotation(t)).Multiply(lt.Translate(e))}static Rotation(e){const t=Math.sin(e),n=Math.cos(e);return this.RotationCosSin(n,t)}static RotationCosSin(e,t){const n=lt.Ident();return n.data[0][0]=e,n.data[0][1]=t,n.data[1][0]=-t,n.data[1][1]=e,n}static Translate(e,t){const n=lt.Ident();if(typeof e=="number"&&typeof t=="number")n.data[2][0]=e,n.data[2][1]=t;else if(typeof e!="number"){const r=e;n.data[2][0]=r.x,n.data[2][1]=r.y}else throw new Error(`Unexpected type combination in Matrix.Translate: x: ${typeof e}, y: ${typeof t}`);return n}Get(e,t){return this.data[e][t]}Set(e,t,n){this.data[e][t]=n}Multiply(e){const t=lt.Zero();for(let n=0;n<3;++n)for(let r=0;r<3;++r)for(let s=0;s<3;++s)t.data[n][r]+=this.data[n][s]*e.data[s][r];return t}Transform(e,t={x:0,y:0}){const n=this.Get(0,0)*e.x+this.Get(1,0)*e.y+this.Get(2,0),r=this.Get(0,1)*e.x+this.Get(1,1)*e.y+this.Get(2,1),s=this.Get(0,2)*e.x+this.Get(1,2)*e.y+this.Get(2,2);return t.x=n/s,t.y=r/s,t}}class zr{constructor(e,t,n){Re(this,"normal");Re(this,"normalization");this.a=e,this.b=t,this.c=n;const r=Math.sqrt(e*e+t*t);this.normal={x:e/r,y:t/r},this.normalization=r}static byTwoPoints({x:e,y:t},{x:n,y:r}){return new zr(t-r,n-e,e*r-n*t)}onLine(e){return Math.abs(this.rawDistance(e))<1e-15}sign(e){return Math.sign(this.rawDistance(e))}rawDistance({x:e,y:t}){return this.a*e+this.b*t+this.c}distance(e){const t=this.rawDistance(e);return Math.abs(t)/this.normalization}projection(e){const t=this.rawDistance(e)/this.normalization;return{x:e.x-this.normal.x*t,y:e.y-this.normal.y*t}}}class Qi{constructor(e,t){Re(this,"line");this.p1=e,this.p2=t,this.line=zr.byTwoPoints(e,t)}get left(){return Math.min(this.p1.x,this.p2.x)}get right(){return Math.max(this.p1.x,this.p2.x)}}class In{constructor(e){Re(this,"edges");this.points=e,this.edges=new Array(e.length),this.updateEdges()}updateEdges(){const e=this.points;for(let t=0;t<e.length-1;t++)this.edges[t]=new Qi(e[t],e[t+1]);this.edges[e.length-1]=new Qi(e[e.length-1],e[0])}transform(e){const t=this.points,n=t.length;for(let r=0;r<n;r++)e.Transform(t[r],t[r]);this.updateEdges()}transformCopy(e){return new In(this.points.map(t=>e.Transform(t)))}contains(e){let t=0;const n=this.edges.length;for(let r=0;r<n;r++){const s=this.edges[r];e.x<=s.left||e.x>s.right||(t+=s.line.sign(e))}return t!=0}center(){const e=this.points,t=e.length;let n=0,r=0;for(let s=0;s<t;s++)n+=e[s].x,r+=e[s].y;return{x:n/t,y:r/t}}area(){let e=0;const t=this.points.length-1,n=this.points;for(let r=0;r<t;r++)e+=n[r].x*n[r+1].x-n[r+1].y*n[r].y;return e+=n[t].x*n[0].y-n[0].x*n[t].y,e/2}repair(){this.area()<0&&this.points.reverse()}}class Ns{constructor(e=!1,t){this.interactive=e,this.settings=t}draw(e,t){const n=this.settings.fill[t],r=this.settings.stroke[t];this.makePath(e,t),n&&(e.fillStyle=n,e.fill()),r&&(e.strokeStyle=r,e.stroke())}}class Bs extends Ns{constructor(e=new zt,t=!1,n){super(t,n),this.transform=e}getPolygon(){return this.localPolygon().transformCopy(this.transform.matrix())}makePath(e){Cp(e,this.getPolygon())}contains(e){return this.getPolygon().contains(e)}}class jt extends Bs{constructor(e,t=new zt,n=!1,r){super(t,n,r),this.polygon=e}localPolygon(){return this.polygon}}class es extends Bs{constructor(e,t=new zt,n=!1,r){super(t,n,r),this.localPolygon=e}}function Ht(i,e){const t=i/2,n=e/2;return new In([{x:-t,y:-n},{x:t,y:-n},{x:t,y:n},{x:-t,y:n}])}class zt{constructor(e=0,t=0,n=0,r){this.x=e,this.y=t,this.rotate=n,this.parent=r}matrix(){const e=lt.Rotation(this.rotate).Multiply(lt.Translate(this));return this.parent?e.Multiply(this.parent.matrix()):e}rotation(){const e=this.rotate;return this.parent?e+this.parent.rotation():e}}class gn{constructor(e=()=>0,t=()=>0,n=()=>0,r){this.xSource=e,this.ySource=t,this.rotateSource=n,this.parent=r}get rotate(){return this.rotateSource()}get x(){return this.xSource()}get y(){return this.ySource()}matrix(){const e=lt.Rotation(this.rotate).Multiply(lt.Translate(this));return this.parent?e.Multiply(this.parent.matrix()):e}rotation(){const e=this.rotate;return this.parent?e+this.parent.rotation():e}}function Tp(i,e){const t=e/3,n=t/2,r=[{x:i-n-2*t,y:n},{x:-n,y:n},{x:-n,y:-n},{x:i-n-2*t,y:-n},{x:i-n-3*t,y:-n-t},{x:i-n,y:0},{x:i-n-3*t,y:+n+t}];return new In(r)}function Ip(i,e,t){const n=t/3,r=n/2,s=e/(Math.PI/45)|0,a=e/s,o=[],l=[],u=i-r,f=i+r;for(let m=0;m<s;m++){const d=Math.cos(a*m),p=Math.sin(a*m),_=d*u,b=p*u;o.push({x:_,y:b});const v=d*f,A=p*f;l.push({x:v,y:A})}const c=[{x:-t,y:+r+n},{x:t,y:0},{x:-t,y:-r-n}],h=lt.Rotation(Math.PI/2).Multiply(lt.Translate({x:i,y:0})).Multiply(lt.RotationAround({x:0,y:0},e));return new In([...o,...c.map(m=>h.Transform(m,m)),...l.reverse()])}function Cp(i,e){i.beginPath(),i.moveTo(e.points[0].x,e.points[0].y),e.points.forEach(t=>i.lineTo(t.x,t.y)),i.closePath()}class Fp extends Ns{constructor(e,t,n=!1,r){super(n,r),this.circle=e,this.width=t}makePath(e,t){const n=t=="hover"?this.width:this.width/2,r=this.circle.radius-n/2,s=r+n,{x:a,y:o}=this.circle.center;r<=0||(e.beginPath(),e.arc(a,o,r,0,2*Math.PI,!1),e.moveTo(a+s,o),e.arc(a,o,s,0,2*Math.PI,!0),e.closePath())}contains(e){const t=e.x-this.circle.center.x,n=e.y-this.circle.center.y,r=Math.sqrt(t*t+n*n);return Math.abs(this.circle.radius-r)<this.width/2}}class Rp{constructor(e,t,n,r,s){Re(this,"ctx");Re(this,"sprites");Re(this,"handlers",new Map);Re(this,"selectors",new Map);Re(this,"activeBlockId","");Re(this,"activeContainerType","");Re(this,"draw",pr(()=>{const e=this.ctx.canvas,t=this.cursor.realSize;e.width!==t.width&&(e.width=t.width),e.height!==t.height&&(e.height=t.height),this.ctx.clearRect(0,0,e.width,e.height),this.ctx.save(),this.ctx.scale(1/this.cursor.scale,1/this.cursor.scale),this.sprites.draw(this.ctx),this.ctx.restore()}));Re(this,"effectsHandlers",new Map);Re(this,"effectToSprite",new Map);this.ctx=e.getContext("2d");let a=!1;this.sprites=new Sp(t,o=>{var h,m;const l=this.selectors.get(o);if(l)return{move(){},drop(){s.set(r.value.blocks.find(({id:d})=>l===d))}};const u=(h=this.effectsHandlers.get(o))==null?void 0:h();if(u)return{move:pr((d,p,_)=>{u(d,p,_),a=!0,s.set(s.value),a=!1}),drop(d,p,_){u(d,p,_),a=!0,s.set(s.value),a=!1}};const f=s.value.container;if(!this.activeBlockId||f.type!=="rectangle")return;const c=(m=this.handlers.get(o))==null?void 0:m(f.value);if(c)return{move:pr((d,p,_)=>{f.value=c(d,p,_),a=!0,s.set(s.value),a=!1}),drop(d,p,_){f.value=c(d,p,_),a=!0,s.set(s.value),a=!1}}},()=>this.draw()),n.subscribe(()=>{this.activeBlockId=""}),r.subscribe(()=>{a||this.draw()}),s.subscribe(o=>{if(a||this.draw(),o.id==this.activeBlockId&&o.container.type==this.activeContainerType){const l=new Map(this.effectToSprite);o.effects.forEach(u=>{if(l.has(u)){l.delete(u);return}this.setupEffect(u)});for(const[u,f]of l)f.forEach(c=>this.effectsHandlers.delete(c)),f.forEach(c=>this.sprites.delete(c)),this.effectToSprite.delete(u);return}this.activeBlockId=o.id,this.activeContainerType=o.container.type,this.setup(r.value.blocks,o),o.effects.forEach(l=>this.setupEffect(l))})}get cursor(){return this.sprites.cursor}setupEffect(e){const t=8*this.cursor.scale,n=e.settings;function r(a){return a.type==="bugle"||a.type==="swirl"||a.type==="pinch"}if(!r(n))return;const s={bugle:"#0fff00",pinch:"#ff00f0",swirl:"#0aaaa0"};this.addEffectModifier(new jt(Ht(t*2,t*2),new gn(()=>r(e.settings)?e.settings.center.x:-100,()=>r(e.settings)?e.settings.center.y:-100,()=>Math.PI/4),!0,Nt(s[n.type])),e,()=>(a,o)=>r(e.settings)?(e.settings.center.x=o.x|0,e.settings.center.y=o.y|0,!0):!1),this.addEffectModifier(new Fp(n,t,!0,Nt(s[n.type])),e,()=>(a,o)=>{if(!r(e.settings))return!1;const l=o.x-e.settings.center.x,u=o.y-e.settings.center.y,f=Math.sqrt(l*l+u*u);return e.settings.radius=f|0,!0})}clear(){this.selectors.clear(),this.handlers.clear(),this.sprites.clear()}setup(e,t){const n=this.ctx.canvas,r=this.cursor.realSize;if(n.width!==r.width&&(n.width=r.width),n.height!==r.height&&(n.height=r.height),this.clear(),e.forEach(m=>{m===t||m.container.type!=="rectangle"||this.addSelector(m.id,m.container.value)}),t.container.type!=="rectangle")return;const s=new es(()=>Ht(t.container.value.width,t.container.value.height),new gn(()=>t.container.value.position.x,()=>t.container.value.position.y,()=>t.container.value.rotation),!0,{fill:{},stroke:{default:"#aaaa00 "}}),a=this.sprites.add(s),o=18*this.cursor.scale,l=Tp(o*7,o*1.4),u=new gn(()=>0,()=>0,()=>this.cursor.ctrl?-a.transform.rotation():0,a.transform),f=new jt(l,new zt(0,0,0,u),!0,Nt("#0000ff")),c=new jt(l,new zt(0,0,-Math.PI/2,u),!0,Nt("#ff0000"));this.addModifier(f,ts(f)),this.addModifier(c,ts(c)),this.addModifier(new jt(Ht(o*2,o*2),new zt(0,0,0,a.transform),!0,Nt("#ff00ff")),m=>(d,p)=>{const _=p.x-d.x,b=p.y-d.y,{x:v,y:A}=m.position;return{...m,position:{x:v+_|0,y:A+b|0}}});const h=new jt(Ip(4*o,Math.PI*1.5,o*1.5),new zt(0,0,-Math.PI/4,a.transform),!0,Nt("#00ff00"));this.addModifier(h,Pp),[{dim:"width",dir:{x:1,y:0}},{dim:"width",dir:{x:-1,y:0}},{dim:"height",dir:{x:0,y:1}},{dim:"height",dir:{x:0,y:-1}}].forEach(({dim:m,dir:d})=>{const p=m==="height"?()=>Ht(t.container.value.width-o,o):()=>Ht(o,t.container.value.height-o);this.addModifier(new es(p,new gn(()=>d.x*t.container.value.width/2,()=>d.y*t.container.value.height/2,()=>0,a.transform),!0,Nt("#ff9900")),Np(m,d))}),[{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}].forEach(m=>{this.addModifier(new jt(Ht(o,o),new gn(()=>m.x*t.container.value.width/2,()=>m.y*t.container.value.height/2,()=>0,a.transform),!0,Nt("#ff99ff")),Bp(m))})}addSelector(e,t){const n=this.sprites.add(new jt(Ht(t.width,t.height),new zt(t.position.x,t.position.y,t.rotation),!0,{fill:{hover:"#aaaaaa22",active:"#aaaaaa44"},stroke:{hover:"#aaaaaa99",active:"#aaaaaa"}}));this.selectors.set(n,e)}addModifier(e,t){this.handlers.set(this.sprites.add(e),t)}addEffectModifier(e,t,n){this.effectsHandlers.set(this.sprites.add(e),n),this.effectToSprite.has(t)?this.effectToSprite.get(t).push(e):this.effectToSprite.set(t,[e])}}function Pp(i){const{rotation:e}=i,t=i.position;return(n,r,s)=>{const a=Ji(t,n),o=Ji(t,r),l=Math.atan2(a.y,a.x),u=Math.atan2(o.y,o.x),f=Math.PI/180*1;let c=Math.round((u-l)/f)*f;const h=Math.PI/4;return s.shift&&(c=(c/h|0)*h),{...i,rotation:s.ctrl?c:e+c}}}function Nt(i){return{fill:{default:`${i}44`,hover:`${i}99`,active:`${i}`},stroke:{default:`${i}44`,hover:`${i}99`,active:`${i}`}}}function Np(i,e){return t=>(n,r,s)=>{const a=r.x-n.x,o=r.y-n.y,l=lt.Rotation(t.rotation).Transform(e);let u=a*l.x+o*l.y|0;return s.shift&&(u=(u/10|0)*10),s.ctrl?{...t,position:{x:t.position.x+l.x*u/2,y:t.position.y+l.y*u/2},[i]:t[i]+u}:{...t,[i]:t[i]+2*u}}}function Bp(i){return e=>(t,n,r)=>{const s=n.x-t.x,a=n.y-t.y,o=lt.Rotation(e.rotation).Transform({x:0,y:i.y}),l=lt.Rotation(e.rotation).Transform({x:i.x,y:0});let u=s*o.x+a*o.y|0,f=s*l.x+a*l.y|0;return r.shift&&(u=f=Math.max(u,f)),r.ctrl?{...e,position:{x:e.position.x+o.x*u/2+l.x*f/2,y:e.position.y+o.y*u/2+l.y*f/2},height:e.height+u,width:e.width+f}:{...e,height:e.height+2*u,width:e.width+2*f}}}function ts(i){return e=>(t,n,r)=>{const s=n.x-t.x,a=n.y-t.y,{x:o,y:l}=e.position,u=lt.Rotation(i.transform.rotation()).Transform({x:1,y:0});let f=s*u.x+a*u.y;return r.shift&&(f=(f/10|0)*10),{...e,position:{x:o+u.x*f,y:l+u.y*f}}}}function pr(i){let e=0;return(...t)=>{e||(e=requestAnimationFrame(()=>{e=0,i.apply(void 0,t)}))}}class Ms{constructor(e){Re(this,"i",0);this.prefix=e}generate(){return`${this.prefix}-${this.i++}`}}function wn(i,e){const t=URL.createObjectURL(i);return e(t).finally(()=>URL.revokeObjectURL(t))}function zs(i){return new Promise((e,t)=>{const n=new Image;n.crossOrigin="anonymous",n.onload=function(){return e(n)},n.onerror=function(){return t(new Error(`Can't load image ${i}`))},n.src=i})}function ns(i){return e=>{const t=document.createElement("a");t.download=i,t.href=URL.createObjectURL(e),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(t.href)}}/* @license twgl.js 5.3.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */let Qn=Float32Array;function Dt(i,e,t){const n=new Qn(3);return i&&(n[0]=i),e&&(n[1]=e),t&&(n[2]=t),n}function Mp(i,e,t){return t=t||new Qn(3),t[0]=i[0]-e[0],t[1]=i[1]-e[1],t[2]=i[2]-e[2],t}function rs(i,e,t){t=t||new Qn(3);const n=i[2]*e[0]-i[0]*e[2],r=i[0]*e[1]-i[1]*e[0];return t[0]=i[1]*e[2]-i[2]*e[1],t[1]=n,t[2]=r,t}function _r(i,e){e=e||new Qn(3);const t=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],n=Math.sqrt(t);return n>1e-5?(e[0]=i[0]/n,e[1]=i[1]/n,e[2]=i[2]/n):(e[0]=0,e[1]=0,e[2]=0),e}let Qe=Float32Array;function zp(i){const e=Qe;return Qe=i,e}function Dp(i,e){return e=e||new Qe(16),e[0]=-i[0],e[1]=-i[1],e[2]=-i[2],e[3]=-i[3],e[4]=-i[4],e[5]=-i[5],e[6]=-i[6],e[7]=-i[7],e[8]=-i[8],e[9]=-i[9],e[10]=-i[10],e[11]=-i[11],e[12]=-i[12],e[13]=-i[13],e[14]=-i[14],e[15]=-i[15],e}function Up(){return new Qe(16).fill(0)}function Ds(i,e){return e=e||new Qe(16),e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e}function Us(i){return i=i||new Qe(16),i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Lp(i,e){if(e=e||new Qe(16),e===i){let v;return v=i[1],i[1]=i[4],i[4]=v,v=i[2],i[2]=i[8],i[8]=v,v=i[3],i[3]=i[12],i[12]=v,v=i[6],i[6]=i[9],i[9]=v,v=i[7],i[7]=i[13],i[13]=v,v=i[11],i[11]=i[14],i[14]=v,e}const t=i[0*4+0],n=i[0*4+1],r=i[0*4+2],s=i[0*4+3],a=i[1*4+0],o=i[1*4+1],l=i[1*4+2],u=i[1*4+3],f=i[2*4+0],c=i[2*4+1],h=i[2*4+2],m=i[2*4+3],d=i[3*4+0],p=i[3*4+1],_=i[3*4+2],b=i[3*4+3];return e[0]=t,e[1]=a,e[2]=f,e[3]=d,e[4]=n,e[5]=o,e[6]=c,e[7]=p,e[8]=r,e[9]=l,e[10]=h,e[11]=_,e[12]=s,e[13]=u,e[14]=m,e[15]=b,e}function Ls(i,e){e=e||new Qe(16);const t=i[0*4+0],n=i[0*4+1],r=i[0*4+2],s=i[0*4+3],a=i[1*4+0],o=i[1*4+1],l=i[1*4+2],u=i[1*4+3],f=i[2*4+0],c=i[2*4+1],h=i[2*4+2],m=i[2*4+3],d=i[3*4+0],p=i[3*4+1],_=i[3*4+2],b=i[3*4+3],v=h*b,A=_*m,k=l*b,N=_*u,T=l*m,F=h*u,L=r*b,P=_*s,U=r*m,ae=h*s,I=r*u,C=l*s,$=f*p,Z=d*c,we=a*p,x=d*o,de=a*c,te=f*o,Te=t*p,H=d*n,W=t*c,Y=f*n,ee=t*o,pe=a*n,se=v*o+N*c+T*p-(A*o+k*c+F*p),Se=A*n+L*c+ae*p-(v*n+P*c+U*p),Fe=k*n+P*o+I*p-(N*n+L*o+C*p),X=F*n+U*o+C*c-(T*n+ae*o+I*c),Ne=1/(t*se+a*Se+f*Fe+d*X);return e[0]=Ne*se,e[1]=Ne*Se,e[2]=Ne*Fe,e[3]=Ne*X,e[4]=Ne*(A*a+k*f+F*d-(v*a+N*f+T*d)),e[5]=Ne*(v*t+P*f+U*d-(A*t+L*f+ae*d)),e[6]=Ne*(N*t+L*a+C*d-(k*t+P*a+I*d)),e[7]=Ne*(T*t+ae*a+I*f-(F*t+U*a+C*f)),e[8]=Ne*($*u+x*m+de*b-(Z*u+we*m+te*b)),e[9]=Ne*(Z*s+Te*m+Y*b-($*s+H*m+W*b)),e[10]=Ne*(we*s+H*u+ee*b-(x*s+Te*u+pe*b)),e[11]=Ne*(te*s+W*u+pe*m-(de*s+Y*u+ee*m)),e[12]=Ne*(we*h+te*_+Z*l-(de*_+$*l+x*h)),e[13]=Ne*(W*_+$*r+H*h-(Te*h+Y*_+Z*r)),e[14]=Ne*(Te*l+pe*_+x*r-(ee*_+we*r+H*l)),e[15]=Ne*(ee*h+de*r+Y*l-(W*l+pe*h+te*r)),e}function Op(i,e,t){t=t||new Qe(16);const n=i[0],r=i[1],s=i[2],a=i[3],o=i[4+0],l=i[4+1],u=i[4+2],f=i[4+3],c=i[8+0],h=i[8+1],m=i[8+2],d=i[8+3],p=i[12+0],_=i[12+1],b=i[12+2],v=i[12+3],A=e[0],k=e[1],N=e[2],T=e[3],F=e[4+0],L=e[4+1],P=e[4+2],U=e[4+3],ae=e[8+0],I=e[8+1],C=e[8+2],$=e[8+3],Z=e[12+0],we=e[12+1],x=e[12+2],de=e[12+3];return t[0]=n*A+o*k+c*N+p*T,t[1]=r*A+l*k+h*N+_*T,t[2]=s*A+u*k+m*N+b*T,t[3]=a*A+f*k+d*N+v*T,t[4]=n*F+o*L+c*P+p*U,t[5]=r*F+l*L+h*P+_*U,t[6]=s*F+u*L+m*P+b*U,t[7]=a*F+f*L+d*P+v*U,t[8]=n*ae+o*I+c*C+p*$,t[9]=r*ae+l*I+h*C+_*$,t[10]=s*ae+u*I+m*C+b*$,t[11]=a*ae+f*I+d*C+v*$,t[12]=n*Z+o*we+c*x+p*de,t[13]=r*Z+l*we+h*x+_*de,t[14]=s*Z+u*we+m*x+b*de,t[15]=a*Z+f*we+d*x+v*de,t}function xp(i,e,t){return t=t||Us(),i!==t&&(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11]),t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Gp(i,e){return e=e||Dt(),e[0]=i[12],e[1]=i[13],e[2]=i[14],e}function jp(i,e,t){t=t||Dt();const n=e*4;return t[0]=i[n+0],t[1]=i[n+1],t[2]=i[n+2],t}function Hp(i,e,t,n){n!==i&&(n=Ds(i,n));const r=t*4;return n[r+0]=e[0],n[r+1]=e[1],n[r+2]=e[2],n}function Wp(i,e,t,n,r){r=r||new Qe(16);const s=Math.tan(Math.PI*.5-.5*i),a=1/(t-n);return r[0]=s/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(t+n)*a,r[11]=-1,r[12]=0,r[13]=0,r[14]=t*n*a*2,r[15]=0,r}function Vp(i,e,t,n,r,s,a){return a=a||new Qe(16),a[0]=2/(e-i),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(n-t),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(r-s),a[11]=0,a[12]=(e+i)/(i-e),a[13]=(n+t)/(t-n),a[14]=(s+r)/(r-s),a[15]=1,a}function qp(i,e,t,n,r,s,a){a=a||new Qe(16);const o=e-i,l=n-t,u=r-s;return a[0]=2*r/o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*r/l,a[6]=0,a[7]=0,a[8]=(i+e)/o,a[9]=(n+t)/l,a[10]=s/u,a[11]=-1,a[12]=0,a[13]=0,a[14]=r*s/u,a[15]=0,a}let Bt,Wt,Ct;function Zp(i,e,t,n){return n=n||new Qe(16),Bt=Bt||Dt(),Wt=Wt||Dt(),Ct=Ct||Dt(),_r(Mp(i,e,Ct),Ct),_r(rs(t,Ct,Bt),Bt),_r(rs(Ct,Bt,Wt),Wt),n[0]=Bt[0],n[1]=Bt[1],n[2]=Bt[2],n[3]=0,n[4]=Wt[0],n[5]=Wt[1],n[6]=Wt[2],n[7]=0,n[8]=Ct[0],n[9]=Ct[1],n[10]=Ct[2],n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n}function Xp(i,e){return e=e||new Qe(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function Kp(i,e,t){t=t||new Qe(16);const n=e[0],r=e[1],s=e[2],a=i[0],o=i[1],l=i[2],u=i[3],f=i[1*4+0],c=i[1*4+1],h=i[1*4+2],m=i[1*4+3],d=i[2*4+0],p=i[2*4+1],_=i[2*4+2],b=i[2*4+3],v=i[3*4+0],A=i[3*4+1],k=i[3*4+2],N=i[3*4+3];return i!==t&&(t[0]=a,t[1]=o,t[2]=l,t[3]=u,t[4]=f,t[5]=c,t[6]=h,t[7]=m,t[8]=d,t[9]=p,t[10]=_,t[11]=b),t[12]=a*n+f*r+d*s+v,t[13]=o*n+c*r+p*s+A,t[14]=l*n+h*r+_*s+k,t[15]=u*n+m*r+b*s+N,t}function Yp(i,e){e=e||new Qe(16);const t=Math.cos(i),n=Math.sin(i);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Jp(i,e,t){t=t||new Qe(16);const n=i[4],r=i[5],s=i[6],a=i[7],o=i[8],l=i[9],u=i[10],f=i[11],c=Math.cos(e),h=Math.sin(e);return t[4]=c*n+h*o,t[5]=c*r+h*l,t[6]=c*s+h*u,t[7]=c*a+h*f,t[8]=c*o-h*n,t[9]=c*l-h*r,t[10]=c*u-h*s,t[11]=c*f-h*a,i!==t&&(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t}function Qp(i,e){e=e||new Qe(16);const t=Math.cos(i),n=Math.sin(i);return e[0]=t,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function e0(i,e,t){t=t||new Qe(16);const n=i[0*4+0],r=i[0*4+1],s=i[0*4+2],a=i[0*4+3],o=i[2*4+0],l=i[2*4+1],u=i[2*4+2],f=i[2*4+3],c=Math.cos(e),h=Math.sin(e);return t[0]=c*n-h*o,t[1]=c*r-h*l,t[2]=c*s-h*u,t[3]=c*a-h*f,t[8]=c*o+h*n,t[9]=c*l+h*r,t[10]=c*u+h*s,t[11]=c*f+h*a,i!==t&&(t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t}function t0(i,e){e=e||new Qe(16);const t=Math.cos(i),n=Math.sin(i);return e[0]=t,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function n0(i,e,t){t=t||new Qe(16);const n=i[0*4+0],r=i[0*4+1],s=i[0*4+2],a=i[0*4+3],o=i[1*4+0],l=i[1*4+1],u=i[1*4+2],f=i[1*4+3],c=Math.cos(e),h=Math.sin(e);return t[0]=c*n+h*o,t[1]=c*r+h*l,t[2]=c*s+h*u,t[3]=c*a+h*f,t[4]=c*o-h*n,t[5]=c*l-h*r,t[6]=c*u-h*s,t[7]=c*f-h*a,i!==t&&(t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t}function r0(i,e,t){t=t||new Qe(16);let n=i[0],r=i[1],s=i[2];const a=Math.sqrt(n*n+r*r+s*s);n/=a,r/=a,s/=a;const o=n*n,l=r*r,u=s*s,f=Math.cos(e),c=Math.sin(e),h=1-f;return t[0]=o+(1-o)*f,t[1]=n*r*h+s*c,t[2]=n*s*h-r*c,t[3]=0,t[4]=n*r*h-s*c,t[5]=l+(1-l)*f,t[6]=r*s*h+n*c,t[7]=0,t[8]=n*s*h+r*c,t[9]=r*s*h-n*c,t[10]=u+(1-u)*f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function i0(i,e,t,n){n=n||new Qe(16);let r=e[0],s=e[1],a=e[2];const o=Math.sqrt(r*r+s*s+a*a);r/=o,s/=o,a/=o;const l=r*r,u=s*s,f=a*a,c=Math.cos(t),h=Math.sin(t),m=1-c,d=l+(1-l)*c,p=r*s*m+a*h,_=r*a*m-s*h,b=r*s*m-a*h,v=u+(1-u)*c,A=s*a*m+r*h,k=r*a*m+s*h,N=s*a*m-r*h,T=f+(1-f)*c,F=i[0],L=i[1],P=i[2],U=i[3],ae=i[4],I=i[5],C=i[6],$=i[7],Z=i[8],we=i[9],x=i[10],de=i[11];return n[0]=d*F+p*ae+_*Z,n[1]=d*L+p*I+_*we,n[2]=d*P+p*C+_*x,n[3]=d*U+p*$+_*de,n[4]=b*F+v*ae+A*Z,n[5]=b*L+v*I+A*we,n[6]=b*P+v*C+A*x,n[7]=b*U+v*$+A*de,n[8]=k*F+N*ae+T*Z,n[9]=k*L+N*I+T*we,n[10]=k*P+N*C+T*x,n[11]=k*U+N*$+T*de,i!==n&&(n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15]),n}function s0(i,e){return e=e||new Qe(16),e[0]=i[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=i[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a0(i,e,t){t=t||new Qe(16);const n=e[0],r=e[1],s=e[2];return t[0]=n*i[0*4+0],t[1]=n*i[0*4+1],t[2]=n*i[0*4+2],t[3]=n*i[0*4+3],t[4]=r*i[1*4+0],t[5]=r*i[1*4+1],t[6]=r*i[1*4+2],t[7]=r*i[1*4+3],t[8]=s*i[2*4+0],t[9]=s*i[2*4+1],t[10]=s*i[2*4+2],t[11]=s*i[2*4+3],i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t}function o0(i,e,t){t=t||Dt();const n=e[0],r=e[1],s=e[2],a=n*i[0*4+3]+r*i[1*4+3]+s*i[2*4+3]+i[3*4+3];return t[0]=(n*i[0*4+0]+r*i[1*4+0]+s*i[2*4+0]+i[3*4+0])/a,t[1]=(n*i[0*4+1]+r*i[1*4+1]+s*i[2*4+1]+i[3*4+1])/a,t[2]=(n*i[0*4+2]+r*i[1*4+2]+s*i[2*4+2]+i[3*4+2])/a,t}function l0(i,e,t){t=t||Dt();const n=e[0],r=e[1],s=e[2];return t[0]=n*i[0*4+0]+r*i[1*4+0]+s*i[2*4+0],t[1]=n*i[0*4+1]+r*i[1*4+1]+s*i[2*4+1],t[2]=n*i[0*4+2]+r*i[1*4+2]+s*i[2*4+2],t}function u0(i,e,t){t=t||Dt();const n=Ls(i),r=e[0],s=e[1],a=e[2];return t[0]=r*n[0*4+0]+s*n[0*4+1]+a*n[0*4+2],t[1]=r*n[1*4+0]+s*n[1*4+1]+a*n[1*4+2],t[2]=r*n[2*4+0]+s*n[2*4+1]+a*n[2*4+2],t}var bt=Object.freeze({__proto__:null,axisRotate:i0,axisRotation:r0,copy:Ds,create:Up,frustum:qp,getAxis:jp,getTranslation:Gp,identity:Us,inverse:Ls,lookAt:Zp,multiply:Op,negate:Dp,ortho:Vp,perspective:Wp,rotateX:Jp,rotateY:e0,rotateZ:n0,rotationX:Yp,rotationY:Qp,rotationZ:t0,scale:a0,scaling:s0,setAxis:Hp,setDefaultType:zp,setTranslation:xp,transformDirection:l0,transformNormal:u0,transformPoint:o0,translate:Kp,translation:Xp,transpose:Lp});const Dr=5120,Sn=5121,Ur=5122,Lr=5123,Or=5124,xr=5125,Gr=5126,f0=32819,c0=32820,h0=33635,m0=5131,d0=33640,p0=35899,_0=35902,g0=36269,b0=34042,Os={};{const i=Os;i[Dr]=Int8Array,i[Sn]=Uint8Array,i[Ur]=Int16Array,i[Lr]=Uint16Array,i[Or]=Int32Array,i[xr]=Uint32Array,i[Gr]=Float32Array,i[f0]=Uint16Array,i[c0]=Uint16Array,i[h0]=Uint16Array,i[m0]=Uint16Array,i[d0]=Uint32Array,i[p0]=Uint32Array,i[_0]=Uint32Array,i[g0]=Uint32Array,i[b0]=Uint32Array}function jr(i){if(i instanceof Int8Array)return Dr;if(i instanceof Uint8Array||i instanceof Uint8ClampedArray)return Sn;if(i instanceof Int16Array)return Ur;if(i instanceof Uint16Array)return Lr;if(i instanceof Int32Array)return Or;if(i instanceof Uint32Array)return xr;if(i instanceof Float32Array)return Gr;throw new Error("unsupported typed array type")}function xs(i){if(i===Int8Array)return Dr;if(i===Uint8Array||i===Uint8ClampedArray)return Sn;if(i===Int16Array)return Ur;if(i===Uint16Array)return Lr;if(i===Int32Array)return Or;if(i===Uint32Array)return xr;if(i===Float32Array)return Gr;throw new Error("unsupported typed array type")}function Gs(i){const e=Os[i];if(!e)throw new Error("unknown gl type");return e}const Zn=typeof SharedArrayBuffer<"u"?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};function js(...i){console.error(...i)}const is=new Map;function er(i,e){if(!i||typeof i!="object")return!1;let t=is.get(e);t||(t=new WeakMap,is.set(e,t));let n=t.get(i);if(n===void 0){const r=Object.prototype.toString.call(i);n=r.substring(8,r.length-1)===e,t.set(i,n)}return n}function $0(i,e){return typeof WebGLBuffer<"u"&&er(e,"WebGLBuffer")}function Hs(i,e){return typeof WebGLRenderbuffer<"u"&&er(e,"WebGLRenderbuffer")}function tr(i,e){return typeof WebGLTexture<"u"&&er(e,"WebGLTexture")}function v0(i,e){return typeof WebGLSampler<"u"&&er(e,"WebGLSampler")}const Ws=35044,Xt=34962,w0=34963,y0=34660,E0=5120,k0=5121,A0=5122,S0=5123,T0=5124,I0=5125,Vs=5126,qs={attribPrefix:""};function C0(i,e,t,n,r){i.bindBuffer(e,t),i.bufferData(e,n,r||Ws)}function Zs(i,e,t,n){if($0(i,e))return e;t=t||Xt;const r=i.createBuffer();return C0(i,t,r,e,n),r}function Xs(i){return i==="indices"}function F0(i){return i===Int8Array||i===Uint8Array}function R0(i){return i.length?i:i.data}const P0=/coord|texture/i,N0=/color|colour/i;function B0(i,e){let t;if(P0.test(i)?t=2:N0.test(i)?t=4:t=3,e%t>0)throw new Error(`Can not guess numComponents for attribute '${i}'. Tried ${t} but ${e} values is not evenly divisible by ${t}. You should specify it.`);return t}function M0(i,e,t){return i.numComponents||i.size||B0(e,t||R0(i).length)}function Ks(i,e){if(Zn(i))return i;if(Zn(i.data))return i.data;Array.isArray(i)&&(i={data:i});let t=i.type?Hr(i.type):void 0;return t||(Xs(e)?t=Uint16Array:t=Float32Array),new t(i.data)}function z0(i){return typeof i=="number"?i:i?xs(i):Vs}function Hr(i){return typeof i=="number"?Gs(i):i||Float32Array}function D0(i,e){return{buffer:e.buffer,numValues:2*3*4,type:z0(e.type),arrayType:Hr(e.type)}}function U0(i,e){const t=e.data||e,n=Hr(e.type),r=t*n.BYTES_PER_ELEMENT,s=i.createBuffer();return i.bindBuffer(Xt,s),i.bufferData(Xt,r,e.drawType||Ws),{buffer:s,numValues:t,type:xs(n),arrayType:n}}function L0(i,e,t){const n=Ks(e,t);return{arrayType:n.constructor,buffer:Zs(i,n,void 0,e.drawType),type:jr(n),numValues:0}}function O0(i,e){const t={};return Object.keys(e).forEach(function(n){if(!Xs(n)){const r=e[n],s=r.attrib||r.name||r.attribName||qs.attribPrefix+n;if(r.value){if(!Array.isArray(r.value)&&!Zn(r.value))throw new Error("array.value is not array or typedarray");t[s]={value:r.value}}else{let a;r.buffer&&r.buffer instanceof WebGLBuffer?a=D0:typeof r=="number"||typeof r.data=="number"?a=U0:a=L0;const{buffer:o,type:l,numValues:u,arrayType:f}=a(i,r,n),c=r.normalize!==void 0?r.normalize:F0(f),h=M0(r,n,u);t[s]={buffer:o,numComponents:h,type:l,normalize:c,stride:r.stride||0,offset:r.offset||0,divisor:r.divisor===void 0?void 0:r.divisor,drawType:r.drawType}}}}),i.bindBuffer(Xt,null),t}function x0(i,e){return e===E0||e===k0?1:e===A0||e===S0?2:e===T0||e===I0||e===Vs?4:0}const gr=["position","positions","a_position"];function G0(i,e){let t,n;for(n=0;n<gr.length&&(t=gr[n],!(t in e||(t=qs.attribPrefix+t,t in e)));++n);n===gr.length&&(t=Object.keys(e)[0]);const r=e[t];if(!r.buffer)return 1;i.bindBuffer(Xt,r.buffer);const s=i.getBufferParameter(Xt,y0);i.bindBuffer(Xt,null);const a=x0(i,r.type),o=s/a,l=r.numComponents||r.size,u=o/l;if(u%1!==0)throw new Error(`numComponents ${l} not correct for length ${length}`);return u}function j0(i,e,t){const n=O0(i,e),r=Object.assign({},t||{});r.attribs=Object.assign({},t?t.attribs:{},n);const s=e.indices;if(s){const a=Ks(s,"indices");r.indices=Zs(i,a,w0),r.numElements=a.length,r.elementType=jr(a)}else r.numElements||(r.numElements=G0(i,r.attribs));return r}function Cn(i){return!!i.texStorage2D}const Ys=function(){const i={},e={};function t(n){const r=n.constructor.name;if(!i[r]){for(const s in n)if(typeof n[s]=="number"){const a=e[n[s]];e[n[s]]=a?`${a} | ${s}`:s}i[r]=!0}}return function(r,s){return t(r),e[s]||(typeof s=="number"?`0x${s.toString(16)}`:s)}}(),Ot={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},un=Zn,Js=function(){let i;return function(){return i=i||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),i}}(),ss=6406,At=6407,tt=6408,as=6409,os=6410,bn=6402,ls=34041,Xn=33071,H0=9728,W0=9729,Pt=3553,Rt=34067,Ut=32879,Lt=35866,nr=34069,V0=34070,q0=34071,Z0=34072,X0=34073,K0=34074,Sr=10241,Tr=10240,Kn=10242,Yn=10243,us=32882,Y0=33082,J0=33083,Q0=33084,e1=33085,Wr=3317,Qs=3314,ea=32878,ta=3316,na=3315,ra=32877,t1=37443,n1=37441,r1=37440,i1=33321,s1=36756,a1=33325,o1=33326,l1=33330,u1=33329,f1=33338,c1=33337,h1=33340,m1=33339,d1=33323,p1=36757,_1=33327,g1=33328,b1=33336,$1=33335,v1=33332,w1=33331,y1=33334,E1=33333,k1=32849,A1=35905,S1=36194,T1=36758,I1=35898,C1=35901,F1=34843,R1=34837,P1=36221,N1=36239,B1=36215,M1=36233,z1=36209,D1=36227,U1=32856,L1=35907,O1=36759,x1=32855,G1=32854,j1=32857,H1=34842,W1=34836,V1=36220,q1=36238,Z1=36975,X1=36214,K1=36232,Y1=36226,J1=36208,Q1=33189,e_=33190,t_=36012,n_=36013,r_=35056,Mt=5120,et=5121,Dn=5122,Jt=5123,Un=5124,Vt=5125,ct=5126,fs=32819,cs=32820,hs=33635,vt=5131,$n=36193,br=33640,i_=35899,s_=35902,a_=36269,o_=34042,Ln=33319,Qt=33320,On=6403,en=36244,tn=36248,qt=36249;let $r;function rr(i){if(!$r){const e={};e[ss]={textureFormat:ss,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[et,vt,$n,ct]},e[as]={textureFormat:as,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[et,vt,$n,ct]},e[os]={textureFormat:os,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[et,vt,$n,ct]},e[At]={textureFormat:At,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[et,vt,$n,ct,hs]},e[tt]={textureFormat:tt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[et,vt,$n,ct,fs,cs]},e[bn]={textureFormat:bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Vt,Jt]},e[i1]={textureFormat:On,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[et]},e[s1]={textureFormat:On,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Mt]},e[a1]={textureFormat:On,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[ct,vt]},e[o1]={textureFormat:On,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[ct]},e[l1]={textureFormat:en,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[et]},e[u1]={textureFormat:en,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Mt]},e[v1]={textureFormat:en,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Jt]},e[w1]={textureFormat:en,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Dn]},e[y1]={textureFormat:en,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vt]},e[E1]={textureFormat:en,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Un]},e[d1]={textureFormat:Ln,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[et]},e[p1]={textureFormat:Ln,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Mt]},e[_1]={textureFormat:Ln,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[ct,vt]},e[g1]={textureFormat:Ln,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[ct]},e[b1]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[et]},e[$1]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Mt]},e[f1]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Jt]},e[c1]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Dn]},e[h1]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Vt]},e[m1]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Un]},e[k1]={textureFormat:At,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[et]},e[A1]={textureFormat:At,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[et]},e[S1]={textureFormat:At,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[et,hs]},e[T1]={textureFormat:At,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Mt]},e[I1]={textureFormat:At,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[ct,vt,i_]},e[C1]={textureFormat:At,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[ct,vt,s_]},e[F1]={textureFormat:At,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[ct,vt]},e[R1]={textureFormat:At,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[ct]},e[P1]={textureFormat:tn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[et]},e[N1]={textureFormat:tn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Mt]},e[B1]={textureFormat:tn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Jt]},e[M1]={textureFormat:tn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Dn]},e[z1]={textureFormat:tn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Vt]},e[D1]={textureFormat:tn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Un]},e[U1]={textureFormat:tt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[et]},e[L1]={textureFormat:tt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[et]},e[O1]={textureFormat:tt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Mt]},e[x1]={textureFormat:tt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[et,cs,br]},e[G1]={textureFormat:tt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[et,fs]},e[j1]={textureFormat:tt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[br]},e[H1]={textureFormat:tt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[ct,vt]},e[W1]={textureFormat:tt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[ct]},e[V1]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[et]},e[q1]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Mt]},e[Z1]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[br]},e[X1]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Jt]},e[K1]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Dn]},e[Y1]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Un]},e[J1]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Vt]},e[Q1]={textureFormat:bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Jt,Vt]},e[e_]={textureFormat:bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vt]},e[t_]={textureFormat:bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ct]},e[r_]={textureFormat:ls,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[o_]},e[n_]={textureFormat:ls,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[a_]},Object.keys(e).forEach(function(t){const n=e[t];n.bytesPerElementMap={},n.bytesPerElement.forEach(function(r,s){const a=n.type[s];n.bytesPerElementMap[a]=r})}),$r=e}return $r[i]}function l_(i,e){const t=rr(i);if(!t)throw"unknown internal format";const n=t.bytesPerElementMap[e];if(n===void 0)throw"unknown internal format";return n}function hn(i){const e=rr(i);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function ms(i){return(i&i-1)===0}function u_(i,e,t,n){if(!Cn(i))return ms(e)&&ms(t);const r=rr(n);if(!r)throw"unknown internal format";return r.colorRenderable&&r.textureFilterable}function f_(i){const e=rr(i);if(!e)throw"unknown internal format";return e.textureFilterable}function ia(i,e,t){return un(e)?jr(e):t||et}function xn(i,e,t,n,r){if(r%1!==0)throw"can't guess dimensions";if(!t&&!n){const s=Math.sqrt(r/(e===Rt?6:1));s%1===0?(t=s,n=s):(t=r,n=1)}else if(n){if(!t&&(t=r/n,t%1))throw"can't guess dimensions"}else if(n=r/t,n%1)throw"can't guess dimensions";return{width:t,height:n}}function fn(i,e){e.colorspaceConversion!==void 0&&i.pixelStorei(t1,e.colorspaceConversion),e.premultiplyAlpha!==void 0&&i.pixelStorei(n1,e.premultiplyAlpha),e.flipY!==void 0&&i.pixelStorei(r1,e.flipY)}function sa(i){i.pixelStorei(Wr,4),Cn(i)&&(i.pixelStorei(Qs,0),i.pixelStorei(ea,0),i.pixelStorei(ta,0),i.pixelStorei(na,0),i.pixelStorei(ra,0))}function c_(i,e,t,n){n.minMag&&(t.call(i,e,Sr,n.minMag),t.call(i,e,Tr,n.minMag)),n.min&&t.call(i,e,Sr,n.min),n.mag&&t.call(i,e,Tr,n.mag),n.wrap&&(t.call(i,e,Kn,n.wrap),t.call(i,e,Yn,n.wrap),(e===Ut||v0(i,e))&&t.call(i,e,us,n.wrap)),n.wrapR&&t.call(i,e,us,n.wrapR),n.wrapS&&t.call(i,e,Kn,n.wrapS),n.wrapT&&t.call(i,e,Yn,n.wrapT),n.minLod&&t.call(i,e,Y0,n.minLod),n.maxLod&&t.call(i,e,J0,n.maxLod),n.baseLevel&&t.call(i,e,Q0,n.baseLevel),n.maxLevel&&t.call(i,e,e1,n.maxLevel)}function aa(i,e,t){const n=t.target||Pt;i.bindTexture(n,e),c_(i,n,i.texParameteri,t)}function h_(i){return i=i||Ot.textureColor,un(i)?i:new Uint8Array([i[0]*255,i[1]*255,i[2]*255,i[3]*255])}function Ir(i,e,t,n,r,s){t=t||Ot.textureOptions,s=s||tt;const a=t.target||Pt;if(n=n||t.width,r=r||t.height,i.bindTexture(a,e),u_(i,n,r,s))i.generateMipmap(a);else{const o=f_(s)?W0:H0;i.texParameteri(a,Sr,o),i.texParameteri(a,Tr,o),i.texParameteri(a,Kn,Xn),i.texParameteri(a,Yn,Xn)}}function Tn(i){return i.auto===!0||i.auto===void 0&&i.level===void 0}function Cr(i,e){return e=e||{},e.cubeFaceOrder||[nr,V0,q0,Z0,X0,K0]}function Fr(i,e){const n=Cr(i,e).map(function(r,s){return{face:r,ndx:s}});return n.sort(function(r,s){return r.face-s.face}),n}function Vr(i,e,t,n){n=n||Ot.textureOptions;const r=n.target||Pt,s=n.level||0;let a=t.width,o=t.height;const l=n.internalFormat||n.format||tt,u=hn(l),f=n.format||u.format,c=n.type||u.type;if(fn(i,n),i.bindTexture(r,e),r===Rt){const h=t.width,m=t.height;let d,p;if(h/6===m)d=m,p=[0,0,1,0,2,0,3,0,4,0,5,0];else if(m/6===h)d=h,p=[0,0,0,1,0,2,0,3,0,4,0,5];else if(h/3===m/2)d=h/3,p=[0,0,1,0,2,0,0,1,1,1,2,1];else if(h/2===m/3)d=h/2,p=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(t.src?t.src:t.nodeName);const _=Js();_?(_.canvas.width=d,_.canvas.height=d,a=d,o=d,Fr(i,n).forEach(function(b){const v=p[b.ndx*2+0]*d,A=p[b.ndx*2+1]*d;_.drawImage(t,v,A,d,d,0,0,d,d),i.texImage2D(b.face,s,l,f,c,_.canvas)}),_.canvas.width=1,_.canvas.height=1):typeof createImageBitmap<"u"&&(a=d,o=d,Fr(i,n).forEach(function(b){const v=p[b.ndx*2+0]*d,A=p[b.ndx*2+1]*d;i.texImage2D(b.face,s,l,d,d,0,f,c,null),createImageBitmap(t,v,A,d,d,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(k){fn(i,n),i.bindTexture(r,e),i.texImage2D(b.face,s,l,f,c,k),Tn(n)&&Ir(i,e,n,a,o,l)})}))}else if(r===Ut||r===Lt){const h=Math.min(t.width,t.height),m=Math.max(t.width,t.height),d=m/h;if(d%1!==0)throw"can not compute 3D dimensions of element";const p=t.width===m?1:0,_=t.height===m?1:0;i.pixelStorei(Wr,1),i.pixelStorei(Qs,t.width),i.pixelStorei(ea,0),i.pixelStorei(ra,0),i.texImage3D(r,s,l,h,h,h,0,f,c,null);for(let b=0;b<d;++b){const v=b*h*p,A=b*h*_;i.pixelStorei(ta,v),i.pixelStorei(na,A),i.texSubImage3D(r,s,0,0,b,h,h,1,f,c,t)}sa(i)}else i.texImage2D(r,s,l,f,c,t);Tn(n)&&Ir(i,e,n,a,o,l),aa(i,e,n)}function Fn(){}function m_(i){if(typeof document<"u"){const e=document.createElement("a");return e.href=i,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}else{const e=new URL(location.href).origin;return new URL(i,location.href).origin===e}}function d_(i,e){return e===void 0&&!m_(i)?"anonymous":e}function p_(i,e,t){t=t||Fn;let n;if(e=e!==void 0?e:Ot.crossOrigin,e=d_(i,e),typeof Image<"u"){n=new Image,e!==void 0&&(n.crossOrigin=e);const r=function(){n.removeEventListener("error",s),n.removeEventListener("load",a),n=null},s=function(){const l="couldn't load image: "+i;js(l),t(l,n),r()},a=function(){t(null,n),r()};return n.addEventListener("error",s),n.addEventListener("load",a),n.src=i,n}else if(typeof ImageBitmap<"u"){let r,s;const a=function(){t(r,s)},o={};e&&(o.mode="cors"),fetch(i,o).then(function(l){if(!l.ok)throw l;return l.blob()}).then(function(l){return createImageBitmap(l,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(l){s=l,setTimeout(a)}).catch(function(l){r=l,setTimeout(a)}),n=null}return n}function oa(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap||typeof ImageData<"u"&&i instanceof ImageData||typeof HTMLElement<"u"&&i instanceof HTMLElement}function qr(i,e,t){return oa(i)?(setTimeout(function(){t(null,i)}),i):p_(i,e,t)}function Zr(i,e,t){t=t||Ot.textureOptions;const n=t.target||Pt;if(i.bindTexture(n,e),t.color===!1)return;const r=h_(t.color);if(n===Rt)for(let s=0;s<6;++s)i.texImage2D(nr+s,0,tt,1,1,0,tt,et,r);else n===Ut||n===Lt?i.texImage3D(n,0,tt,1,1,1,0,tt,et,r):i.texImage2D(n,0,tt,1,1,0,tt,et,r)}function __(i,e,t,n){return n=n||Fn,t=t||Ot.textureOptions,Zr(i,e,t),t=Object.assign({},t),qr(t.src,t.crossOrigin,function(s,a){s?n(s,e,a):(Vr(i,e,a,t),n(null,e,a))})}function g_(i,e,t,n){n=n||Fn;const r=t.src;if(r.length!==6)throw"there must be 6 urls for a cubemap";const s=t.level||0,a=t.internalFormat||t.format||tt,o=hn(a),l=t.format||o.format,u=t.type||et,f=t.target||Pt;if(f!==Rt)throw"target must be TEXTURE_CUBE_MAP";Zr(i,e,t),t=Object.assign({},t);let c=6;const h=[],m=Cr(i,t);let d;function p(_){return function(b,v){--c,b?h.push(b):v.width!==v.height?h.push("cubemap face img is not a square: "+v.src):(fn(i,t),i.bindTexture(f,e),c===5?Cr().forEach(function(A){i.texImage2D(A,s,a,l,u,v)}):i.texImage2D(_,s,a,l,u,v),Tn(t)&&i.generateMipmap(f)),c===0&&n(h.length?h:void 0,e,d)}}d=r.map(function(_,b){return qr(_,t.crossOrigin,p(m[b]))})}function b_(i,e,t,n){n=n||Fn;const r=t.src,s=t.internalFormat||t.format||tt,a=hn(s),o=t.format||a.format,l=t.type||et,u=t.target||Lt;if(u!==Ut&&u!==Lt)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Zr(i,e,t),t=Object.assign({},t);let f=r.length;const c=[];let h;const m=t.level||0;let d=t.width,p=t.height;const _=r.length;let b=!0;function v(A){return function(k,N){if(--f,k)c.push(k);else{if(fn(i,t),i.bindTexture(u,e),b){b=!1,d=t.width||N.width,p=t.height||N.height,i.texImage3D(u,m,s,d,p,_,0,o,l,null);for(let T=0;T<_;++T)i.texSubImage3D(u,m,0,0,T,d,p,1,o,l,N)}else{let T=N,F;(N.width!==d||N.height!==p)&&(F=Js(),T=F.canvas,F.canvas.width=d,F.canvas.height=p,F.drawImage(N,0,0,d,p)),i.texSubImage3D(u,m,0,0,A,d,p,1,o,l,T),F&&T===F.canvas&&(F.canvas.width=0,F.canvas.height=0)}Tn(t)&&i.generateMipmap(u)}f===0&&n(c.length?c:void 0,e,h)}}h=r.map(function(A,k){return qr(A,t.crossOrigin,v(k))})}function $_(i,e,t,n){n=n||Ot.textureOptions;const r=n.target||Pt;i.bindTexture(r,e);let s=n.width,a=n.height,o=n.depth;const l=n.level||0,u=n.internalFormat||n.format||tt,f=hn(u),c=n.format||f.format,h=n.type||ia(i,t,f.type);if(un(t))t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));else{const _=Gs(h);t=new _(t)}const m=l_(u,h),d=t.byteLength/m;if(d%1)throw"length wrong size for format: "+Ys(i,c);let p;if(r===Ut||r===Lt)if(!s&&!a&&!o){const _=Math.cbrt(d);if(_%1!==0)throw"can't guess cube size of array of numElements: "+d;s=_,a=_,o=_}else s&&(!a||!o)?(p=xn(i,r,a,o,d/s),a=p.width,o=p.height):a&&(!s||!o)?(p=xn(i,r,s,o,d/a),s=p.width,o=p.height):(p=xn(i,r,s,a,d/o),s=p.width,a=p.height);else p=xn(i,r,s,a,d),s=p.width,a=p.height;if(sa(i),i.pixelStorei(Wr,n.unpackAlignment||1),fn(i,n),r===Rt){const _=m/t.BYTES_PER_ELEMENT,b=d/6*_;Fr(i,n).forEach(v=>{const A=b*v.ndx,k=t.subarray(A,A+b);i.texImage2D(v.face,l,u,s,a,0,c,h,k)})}else r===Ut||r===Lt?i.texImage3D(r,l,u,s,a,o,0,c,h,t):i.texImage2D(r,l,u,s,a,0,c,h,t);return{width:s,height:a,depth:o,type:h}}function v_(i,e,t){const n=t.target||Pt;i.bindTexture(n,e);const r=t.level||0,s=t.internalFormat||t.format||tt,a=hn(s),o=t.format||a.format,l=t.type||a.type;if(fn(i,t),n===Rt)for(let u=0;u<6;++u)i.texImage2D(nr+u,r,s,t.width,t.height,0,o,l,null);else n===Ut||n===Lt?i.texImage3D(n,r,s,t.width,t.height,t.depth,0,o,l,null):i.texImage2D(n,r,s,t.width,t.height,0,o,l,null)}function la(i,e,t){t=t||Fn,e=e||Ot.textureOptions;const n=i.createTexture(),r=e.target||Pt;let s=e.width||1,a=e.height||1;const o=e.internalFormat||tt;i.bindTexture(r,n),r===Rt&&(i.texParameteri(r,Kn,Xn),i.texParameteri(r,Yn,Xn));let l=e.src;if(l)if(typeof l=="function"&&(l=l(i,e)),typeof l=="string")__(i,n,e,t);else if(un(l)||Array.isArray(l)&&(typeof l[0]=="number"||Array.isArray(l[0])||un(l[0]))){const u=$_(i,n,l,e);s=u.width,a=u.height}else Array.isArray(l)&&(typeof l[0]=="string"||oa(l[0]))?r===Rt?g_(i,n,e,t):b_(i,n,e,t):(Vr(i,n,l,e),s=l.width,a=l.height);else v_(i,n,e);return Tn(e)&&Ir(i,n,e,s,a,o),aa(i,n,e),n}function w_(i,e,t,n,r,s){n=n||t.width,r=r||t.height,s=s||t.depth;const a=t.target||Pt;i.bindTexture(a,e);const o=t.level||0,l=t.internalFormat||t.format||tt,u=hn(l),f=t.format||u.format;let c;const h=t.src;if(h&&(un(h)||Array.isArray(h)&&typeof h[0]=="number")?c=t.type||ia(i,h,u.type):c=t.type||u.type,a===Rt)for(let m=0;m<6;++m)i.texImage2D(nr+m,o,l,n,r,0,f,c,null);else a===Ut||a===Lt?i.texImage3D(a,o,l,n,r,s,0,f,c,null):i.texImage2D(a,o,l,n,r,0,f,c,null)}const Xr=js;function y_(i){return typeof document<"u"&&document.getElementById?document.getElementById(i):null}const Jn=33984,ir=34962,E_=34963,k_=35713,A_=35714,S_=35632,T_=35633,I_=35981,ua=35718,C_=35721,F_=35971,R_=35382,P_=35396,N_=35398,B_=35392,M_=35395,sr=5126,fa=35664,ca=35665,ha=35666,Kr=5124,ma=35667,da=35668,pa=35669,_a=35670,ga=35671,ba=35672,$a=35673,va=35674,wa=35675,ya=35676,z_=35678,D_=35680,U_=35679,L_=35682,O_=35685,x_=35686,G_=35687,j_=35688,H_=35689,W_=35690,V_=36289,q_=36292,Z_=36293,Yr=5125,Ea=36294,ka=36295,Aa=36296,X_=36298,K_=36299,Y_=36300,J_=36303,Q_=36306,eg=36307,tg=36308,ng=36311,ar=3553,or=34067,Jr=32879,lr=35866,Le={};function Sa(i,e){return Le[e].bindPoint}function rg(i,e){return function(t){i.uniform1f(e,t)}}function ig(i,e){return function(t){i.uniform1fv(e,t)}}function sg(i,e){return function(t){i.uniform2fv(e,t)}}function ag(i,e){return function(t){i.uniform3fv(e,t)}}function og(i,e){return function(t){i.uniform4fv(e,t)}}function Ta(i,e){return function(t){i.uniform1i(e,t)}}function Ia(i,e){return function(t){i.uniform1iv(e,t)}}function Ca(i,e){return function(t){i.uniform2iv(e,t)}}function Fa(i,e){return function(t){i.uniform3iv(e,t)}}function Ra(i,e){return function(t){i.uniform4iv(e,t)}}function lg(i,e){return function(t){i.uniform1ui(e,t)}}function ug(i,e){return function(t){i.uniform1uiv(e,t)}}function fg(i,e){return function(t){i.uniform2uiv(e,t)}}function cg(i,e){return function(t){i.uniform3uiv(e,t)}}function hg(i,e){return function(t){i.uniform4uiv(e,t)}}function mg(i,e){return function(t){i.uniformMatrix2fv(e,!1,t)}}function dg(i,e){return function(t){i.uniformMatrix3fv(e,!1,t)}}function pg(i,e){return function(t){i.uniformMatrix4fv(e,!1,t)}}function _g(i,e){return function(t){i.uniformMatrix2x3fv(e,!1,t)}}function gg(i,e){return function(t){i.uniformMatrix3x2fv(e,!1,t)}}function bg(i,e){return function(t){i.uniformMatrix2x4fv(e,!1,t)}}function $g(i,e){return function(t){i.uniformMatrix4x2fv(e,!1,t)}}function vg(i,e){return function(t){i.uniformMatrix3x4fv(e,!1,t)}}function wg(i,e){return function(t){i.uniformMatrix4x3fv(e,!1,t)}}function dt(i,e,t,n){const r=Sa(i,e);return Cn(i)?function(s){let a,o;!s||tr(i,s)?(a=s,o=null):(a=s.texture,o=s.sampler),i.uniform1i(n,t),i.activeTexture(Jn+t),i.bindTexture(r,a),i.bindSampler(t,o)}:function(s){i.uniform1i(n,t),i.activeTexture(Jn+t),i.bindTexture(r,s)}}function pt(i,e,t,n,r){const s=Sa(i,e),a=new Int32Array(r);for(let o=0;o<r;++o)a[o]=t+o;return Cn(i)?function(o){i.uniform1iv(n,a),o.forEach(function(l,u){i.activeTexture(Jn+a[u]);let f,c;tr(i,l)?(f=l,c=null):(f=l.texture,c=l.sampler),i.bindSampler(t,c),i.bindTexture(s,f)})}:function(o){i.uniform1iv(n,a),o.forEach(function(l,u){i.activeTexture(Jn+a[u]),i.bindTexture(s,l)})}}Le[sr]={Type:Float32Array,size:4,setter:rg,arraySetter:ig};Le[fa]={Type:Float32Array,size:8,setter:sg,cols:2};Le[ca]={Type:Float32Array,size:12,setter:ag,cols:3};Le[ha]={Type:Float32Array,size:16,setter:og,cols:4};Le[Kr]={Type:Int32Array,size:4,setter:Ta,arraySetter:Ia};Le[ma]={Type:Int32Array,size:8,setter:Ca,cols:2};Le[da]={Type:Int32Array,size:12,setter:Fa,cols:3};Le[pa]={Type:Int32Array,size:16,setter:Ra,cols:4};Le[Yr]={Type:Uint32Array,size:4,setter:lg,arraySetter:ug};Le[Ea]={Type:Uint32Array,size:8,setter:fg,cols:2};Le[ka]={Type:Uint32Array,size:12,setter:cg,cols:3};Le[Aa]={Type:Uint32Array,size:16,setter:hg,cols:4};Le[_a]={Type:Uint32Array,size:4,setter:Ta,arraySetter:Ia};Le[ga]={Type:Uint32Array,size:8,setter:Ca,cols:2};Le[ba]={Type:Uint32Array,size:12,setter:Fa,cols:3};Le[$a]={Type:Uint32Array,size:16,setter:Ra,cols:4};Le[va]={Type:Float32Array,size:32,setter:mg,rows:2,cols:2};Le[wa]={Type:Float32Array,size:48,setter:dg,rows:3,cols:3};Le[ya]={Type:Float32Array,size:64,setter:pg,rows:4,cols:4};Le[O_]={Type:Float32Array,size:32,setter:_g,rows:2,cols:3};Le[x_]={Type:Float32Array,size:32,setter:bg,rows:2,cols:4};Le[G_]={Type:Float32Array,size:48,setter:gg,rows:3,cols:2};Le[j_]={Type:Float32Array,size:48,setter:vg,rows:3,cols:4};Le[H_]={Type:Float32Array,size:64,setter:$g,rows:4,cols:2};Le[W_]={Type:Float32Array,size:64,setter:wg,rows:4,cols:3};Le[z_]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:ar};Le[D_]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:or};Le[U_]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:Jr};Le[L_]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:ar};Le[V_]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:lr};Le[q_]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:lr};Le[Z_]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:or};Le[X_]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:ar};Le[K_]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:Jr};Le[Y_]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:or};Le[J_]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:lr};Le[Q_]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:ar};Le[eg]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:Jr};Le[tg]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:or};Le[ng]={Type:null,size:0,setter:dt,arraySetter:pt,bindPoint:lr};function ur(i,e){return function(t){if(t.value)switch(i.disableVertexAttribArray(e),t.value.length){case 4:i.vertexAttrib4fv(e,t.value);break;case 3:i.vertexAttrib3fv(e,t.value);break;case 2:i.vertexAttrib2fv(e,t.value);break;case 1:i.vertexAttrib1fv(e,t.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else i.bindBuffer(ir,t.buffer),i.enableVertexAttribArray(e),i.vertexAttribPointer(e,t.numComponents||t.size,t.type||sr,t.normalize||!1,t.stride||0,t.offset||0),i.vertexAttribDivisor&&i.vertexAttribDivisor(e,t.divisor||0)}}function xt(i,e){return function(t){if(t.value)if(i.disableVertexAttribArray(e),t.value.length===4)i.vertexAttrib4iv(e,t.value);else throw new Error("The length of an integer constant value must be 4!");else i.bindBuffer(ir,t.buffer),i.enableVertexAttribArray(e),i.vertexAttribIPointer(e,t.numComponents||t.size,t.type||Kr,t.stride||0,t.offset||0),i.vertexAttribDivisor&&i.vertexAttribDivisor(e,t.divisor||0)}}function fr(i,e){return function(t){if(t.value)if(i.disableVertexAttribArray(e),t.value.length===4)i.vertexAttrib4uiv(e,t.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else i.bindBuffer(ir,t.buffer),i.enableVertexAttribArray(e),i.vertexAttribIPointer(e,t.numComponents||t.size,t.type||Yr,t.stride||0,t.offset||0),i.vertexAttribDivisor&&i.vertexAttribDivisor(e,t.divisor||0)}}function Qr(i,e,t){const n=t.size,r=t.count;return function(s){i.bindBuffer(ir,s.buffer);const a=s.size||s.numComponents||n,o=a/r,l=s.type||sr,f=Le[l].size*a,c=s.normalize||!1,h=s.offset||0,m=f/r;for(let d=0;d<r;++d)i.enableVertexAttribArray(e+d),i.vertexAttribPointer(e+d,o,l,c,f,h+m*d),i.vertexAttribDivisor&&i.vertexAttribDivisor(e+d,s.divisor||0)}}const at={};at[sr]={size:4,setter:ur};at[fa]={size:8,setter:ur};at[ca]={size:12,setter:ur};at[ha]={size:16,setter:ur};at[Kr]={size:4,setter:xt};at[ma]={size:8,setter:xt};at[da]={size:12,setter:xt};at[pa]={size:16,setter:xt};at[Yr]={size:4,setter:fr};at[Ea]={size:8,setter:fr};at[ka]={size:12,setter:fr};at[Aa]={size:16,setter:fr};at[_a]={size:4,setter:xt};at[ga]={size:8,setter:xt};at[ba]={size:12,setter:xt};at[$a]={size:16,setter:xt};at[va]={size:4,setter:Qr,count:2};at[wa]={size:9,setter:Qr,count:3};at[ya]={size:16,setter:Qr,count:4};const yg=/ERROR:\s*\d+:(\d+)/gi;function Eg(i,e="",t=0){const n=[...e.matchAll(yg)],r=new Map(n.map((s,a)=>{const o=parseInt(s[1]),l=n[a+1],u=l?l.index:e.length,f=e.substring(s.index,u);return[o-1,f]}));return i.split(`
`).map((s,a)=>{const o=r.get(a);return`${a+1+t}: ${s}${o?`

^^^ ${o}`:""}`}).join(`
`)}const ds=/^[ \t]*\n/;function Pa(i){let e=0;return ds.test(i)&&(e=1,i=i.replace(ds,"")),{lineOffset:e,shaderSource:i}}function kg(i,e,t,n){if(n=n||Xr,!i.getShaderParameter(t,k_)){const s=i.getShaderInfoLog(t),{lineOffset:a,shaderSource:o}=Pa(i.getShaderSource(t)),l=`${Eg(o,s,a)}
Error compiling ${Ys(i,e)}: ${s}`;return n(l),l}return""}function Na(i,e,t){let n,r,s;if(typeof e=="function"&&(t=e,e=void 0),typeof i=="function")t=i,i=void 0;else if(i&&!Array.isArray(i)){const u=i;t=u.errorCallback,i=u.attribLocations,n=u.transformFeedbackVaryings,r=u.transformFeedbackMode,s=u.callback}const a=t||Xr,o=[],l={errorCallback(u,...f){o.push(u),a(u,...f)},transformFeedbackVaryings:n,transformFeedbackMode:r,callback:s,errors:o};{let u={};Array.isArray(i)?i.forEach(function(f,c){u[f]=e?e[c]:c}):u=i||{},l.attribLocations=u}return l}const Ag=["VERTEX_SHADER","FRAGMENT_SHADER"];function Sg(i,e){if(e.indexOf("frag")>=0)return S_;if(e.indexOf("vert")>=0)return T_}const Tg=(i=0)=>new Promise(e=>setTimeout(e,i));function Ig(i,e,t){const n=i.createProgram(),{attribLocations:r,transformFeedbackVaryings:s,transformFeedbackMode:a}=Na(t);for(let o=0;o<e.length;++o){let l=e[o];if(typeof l=="string"){const u=y_(l),f=u?u.text:l;let c=i[Ag[o]];u&&u.type&&(c=Sg(i,u.type)||c),l=i.createShader(c),i.shaderSource(l,Pa(f).shaderSource),i.compileShader(l),i.attachShader(n,l)}}Object.entries(r).forEach(([o,l])=>i.bindAttribLocation(n,l,o));{let o=s;o&&(o.attribs&&(o=o.attribs),Array.isArray(o)||(o=Object.keys(o)),i.transformFeedbackVaryings(n,o,a||I_))}return i.linkProgram(n),n}async function Cg(i,e){const t=i.getExtension("KHR_parallel_shader_compile"),n=t?(s,a)=>s.getProgramParameter(a,t.COMPLETION_STATUS_KHR):()=>!0;let r=0;do await Tg(r),r=1e3/60;while(!n(i,e))}async function Fg(i,e){for(const t of Object.values(e))await Cg(i,t)}function Rg(i,e,t){if(t=t||Xr,!i.getProgramParameter(e,A_)){const r=i.getProgramInfoLog(e);t(`Error in program linking: ${r}`);const a=i.getAttachedShaders(e).map(o=>kg(i,i.getShaderParameter(o,i.SHADER_TYPE),o,t));return`${r}
${a.filter(o=>o).join(`
`)}`}}function Ba(i){const e=i.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const Pg=/(\.|\[|]|\w+)/g,Ng=i=>i>="0"&&i<="9";function Bg(i,e,t,n){const r=i.split(Pg).filter(o=>o!=="");let s=0,a="";for(;;){const o=r[s++];a+=o;const l=Ng(o[0]),u=l?parseInt(o):o;if(l&&(a+=r[s++]),s===r.length){t[u]=e;break}else{const c=r[s++],h=c==="[",m=t[u]||(h?[]:{});t[u]=m,t=m,n[a]=n[a]||function(d){return function(p){Ma(d,p)}}(m),a+=c}}}function Mg(i,e){let t=0;function n(o,l,u){const f=l.name.endsWith("[0]"),c=l.type,h=Le[c];if(!h)throw new Error(`unknown type: 0x${c.toString(16)}`);let m;if(h.bindPoint){const d=t;t+=l.size,f?m=h.arraySetter(i,c,d,u,l.size):m=h.setter(i,c,d,u,l.size)}else h.arraySetter&&f?m=h.arraySetter(i,u):m=h.setter(i,u);return m.location=u,m}const r={},s={},a=i.getProgramParameter(e,ua);for(let o=0;o<a;++o){const l=i.getActiveUniform(e,o);if(Ba(l))continue;let u=l.name;u.endsWith("[0]")&&(u=u.substr(0,u.length-3));const f=i.getUniformLocation(e,l.name);if(f){const c=n(e,l,f);r[u]=c,Bg(u,c,s,r)}}return r}function zg(i,e){const t={},n=i.getProgramParameter(e,F_);for(let r=0;r<n;++r){const s=i.getTransformFeedbackVarying(e,r);t[s.name]={index:r,type:s.type,size:s.size}}return t}function Dg(i,e){const t=i.getProgramParameter(e,ua),n=[],r=[];for(let o=0;o<t;++o){r.push(o),n.push({});const l=i.getActiveUniform(e,o);n[o].name=l.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(o){const l=o[0],u=o[1];i.getActiveUniforms(e,r,i[l]).forEach(function(f,c){n[c][u]=f})});const s={},a=i.getProgramParameter(e,R_);for(let o=0;o<a;++o){const l=i.getActiveUniformBlockName(e,o),u={index:i.getUniformBlockIndex(e,l),usedByVertexShader:i.getActiveUniformBlockParameter(e,o,P_),usedByFragmentShader:i.getActiveUniformBlockParameter(e,o,N_),size:i.getActiveUniformBlockParameter(e,o,B_),uniformIndices:i.getActiveUniformBlockParameter(e,o,M_)};u.used=u.usedByVertexShader||u.usedByFragmentShader,s[l]=u}return{blockSpecs:s,uniformData:n}}function Ma(i,e){for(const t in e){const n=i[t];typeof n=="function"?n(e[t]):Ma(i[t],e[t])}}function nn(i,...e){const t=i.uniformSetters||i,n=e.length;for(let r=0;r<n;++r){const s=e[r];if(Array.isArray(s)){const a=s.length;for(let o=0;o<a;++o)nn(t,s[o])}else for(const a in s){const o=t[a];o&&o(s[a])}}}function Ug(i,e){const t={},n=i.getProgramParameter(e,C_);for(let r=0;r<n;++r){const s=i.getActiveAttrib(e,r);if(Ba(s))continue;const a=i.getAttribLocation(e,s.name),o=at[s.type],l=o.setter(i,a,o);l.location=a,t[s.name]=l}return t}function Lg(i,e){for(const t in e){const n=i[t];n&&n(e[t])}}function vr(i,e,t){t.vertexArrayObject?i.bindVertexArray(t.vertexArrayObject):(Lg(e.attribSetters||e,t.attribs),t.indices&&i.bindBuffer(E_,t.indices))}function Og(i,e){const t=Mg(i,e),n=Ug(i,e),r={program:e,uniformSetters:t,attribSetters:n};return Cn(i)&&(r.uniformBlockSpec=Dg(i,e),r.transformFeedbackInfo=zg(i,e)),r}function ps(i,e,t,n,r){for(const[s,a]of Object.entries(e)){const o={...r},l=t[s];Array.isArray(l)||Object.assign(o,l);const u=Rg(i,a,o.errorCallback);if(u){for(const f of Object.values(e)){const c=i.getAttachedShaders(f);i.deleteProgram(f);for(const h of c)n.has(h)||i.deleteShader(h)}return u}}}function xg(i,e,t={}){const n=new Set,r=Object.fromEntries(Object.entries(e).map(([a,o])=>{const l={...t},u=Array.isArray(o)?o:o.shaders;return Array.isArray(o)||Object.assign(l,o),u.forEach(n.add,n),[a,Ig(i,u,l)]}));if(t.callback){Fg(i,r).then(()=>{const a=ps(i,r,e,n,t);t.callback(a,a?void 0:r)});return}return ps(i,r,e,n,t)?void 0:r}function Gg(i,e,t){t=Na(t);function n(a,o){return Object.fromEntries(Object.entries(o).map(([l,u])=>[l,Og(a,u)]))}const r=t.callback;r&&(t.callback=(a,o)=>{r(a,a?void 0:n(i,o))});const s=xg(i,e,t);if(!(r||!s))return n(i,s)}const jg=36160,Zt=36161,Hg=3553,Wg=5121,Vg=6402,qg=6408,Zg=33190,Xg=36012,Kg=35056,Yg=36013,Jg=32854,Qg=32855,e2=36194,za=33189,Da=6401,Ua=36168,ei=34041,Rr=36064,cr=36096,La=36128,ti=33306,Pr=33071,Nr=9729,Oa=[{format:qg,type:Wg,min:Nr,wrap:Pr},{format:ei}],yt={};yt[ei]=ti;yt[Da]=La;yt[Ua]=La;yt[Vg]=cr;yt[za]=cr;yt[Zg]=cr;yt[Xg]=cr;yt[Kg]=ti;yt[Yg]=ti;function t2(i,e){return yt[i]||yt[e]}const Gt={};Gt[Jg]=!0;Gt[Qg]=!0;Gt[e2]=!0;Gt[ei]=!0;Gt[za]=!0;Gt[Da]=!0;Gt[Ua]=!0;function n2(i){return Gt[i]}const r2=32;function i2(i){return i>=Rr&&i<Rr+r2}function s2(i,e,t,n){const r=jg,s=i.createFramebuffer();i.bindFramebuffer(r,s),t=t||i.drawingBufferWidth,n=n||i.drawingBufferHeight,e=e||Oa;const a=[],o={framebuffer:s,attachments:[],width:t,height:n};return e.forEach(function(l,u){let f=l.attachment;const c=l.samples,h=l.format;let m=l.attachmentPoint||t2(h,l.internalFormat);if(m||(m=Rr+u),i2(m)&&a.push(m),!f)if(c!==void 0||n2(h))f=i.createRenderbuffer(),i.bindRenderbuffer(Zt,f),c>1?i.renderbufferStorageMultisample(Zt,c,h,t,n):i.renderbufferStorage(Zt,h,t,n);else{const d=Object.assign({},l);d.width=t,d.height=n,d.auto===void 0&&(d.auto=!1,d.min=d.min||d.minMag||Nr,d.mag=d.mag||d.minMag||Nr,d.wrapS=d.wrapS||d.wrap||Pr,d.wrapT=d.wrapT||d.wrap||Pr),f=la(i,d)}if(Hs(i,f))i.framebufferRenderbuffer(r,m,Zt,f);else if(tr(i,f))l.layer!==void 0?i.framebufferTextureLayer(r,m,f,l.level||0,l.layer):i.framebufferTexture2D(r,m,l.target||Hg,f,l.level||0);else throw new Error("unknown attachment type");o.attachments.push(f)}),i.drawBuffers&&i.drawBuffers(a),o}function a2(i,e,t,n,r){n=n||i.drawingBufferWidth,r=r||i.drawingBufferHeight,e.width=n,e.height=r,t=t||Oa,t.forEach(function(s,a){const o=e.attachments[a],l=s.format,u=s.samples;if(u!==void 0||Hs(i,o))i.bindRenderbuffer(Zt,o),u>1?i.renderbufferStorageMultisample(Zt,u,l,n,r):i.renderbufferStorage(Zt,l,n,r);else if(tr(i,o))w_(i,o,s,n,r);else throw new Error("unknown attachment type")})}class o2{constructor(e,t,n,r){this.id=e,this.original=t,this.texture=n,this.meta=r}get width(){return this.original.width}get height(){return this.original.height}}class l2{constructor(e,t=new Ms("textures")){Re(this,"textures",new Map);this.gl=e,this.idGenerator=t}addImage(e,t){let n=t==null?void 0:t.id;if(n&&this.textures.has(n))throw new Error(`Texture with id ${n} already exists`);if(!n){for(let a=0;a<this.textures.size+5&&(n=this.idGenerator.generate(),!!this.textures.has(n));a++)n=void 0;if(!n)throw new Error("Textures overflow!")}const r=la(this.gl,{src:e}),s=new o2(n,e,r,t.meta);return this.textures.set(n,s),s}downloadImage(e,t){return zs(e).then(n=>this.addImage(n,t))}delete(e){const t=this.textures.get(e);if(!t)throw new Error(`Texture with id ${e} already deleted`);return this.gl.deleteTexture(t.texture),this.textures.delete(e),t.original}get(e){const t=this.textures.get(e);if(!t)throw new Error(`Texture with id ${e} not found`);return t}has(e){return this.textures.has(e)}clear(){this.textures.forEach(e=>this.gl.deleteTexture(e.texture)),this.textures.clear()}}const u2=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D layer;
uniform float brightness;
uniform float contrast;

in vec2 texCoord;
out vec4 FragColor;

#define PI 3.1415926

void main() {
    vec4 color = texture(layer, texCoord);
    color.rgb += brightness - 0.5;
    if(contrast > 0.0)
        color.rgb /= (1.0 - contrast);
    else
        color.rgb *= (1.0 + contrast);
    color.rgb += 0.5;

    FragColor = color;
}
`,f2={fragment:u2,uniforms(i){return{brightness:i.brightness,contrast:i.contrast}}},c2=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D layer;
uniform vec2 resolution;
uniform float radius;
uniform float strength;
uniform vec2 center;

in vec2 texCoord;
out vec4 FragColor;

#define PI 3.1415926

void main() {
    vec2 coord = gl_FragCoord.xy;
    vec2 center = vec2(center.x, resolution.y - center.y);
    coord -= center;
    float distance = length(coord);
    float percent = distance / radius;
    coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
    coord += center;
    FragColor = texture(layer, coord / resolution);
}
`,h2={fragment:c2,uniforms(i){return{center:[i.center.x,i.center.y],radius:i.radius,strength:i.strength}}},m2=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D layer;
in vec2 texCoord;
out vec4 FragColor;

#define PI 3.1415926

void main() {
    vec4 color = texture(layer, texCoord);
    float value = 0.2126 * color.r + 0.7152 * color.g + 0.0722 * color.b;
    FragColor = vec4(value, value, value, color.a);
}
`,d2=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D layer;
uniform vec2 resolution;
uniform float radius;
uniform float minAlpha;
uniform float maxAlpha;

in vec2 texCoord;
out vec4 FragColor;

#define PI 3.1415926

float rand(vec2 co, float step) {
    return fract(cos(dot(co * step, vec2(15.2851, 18.435))) * 74687.84583);
}

void main() {
    // texCoord 0..1
    float sx = (rand(texCoord, 1.));
    float sy = (rand(texCoord, 2.));
    vec2 shift = vec2(sx, sy) * 2. - vec2(1);
    shift *= vec2(radius / resolution);
    vec4 origin = texture(layer, texCoord);
    origin += texture(layer, texCoord + shift);
    origin /= 2.;
    float rnd = rand(texCoord, 3.);
    FragColor = vec4(origin.rgb, origin.a * clamp(rnd, minAlpha, maxAlpha));
}
`,p2={fragment:d2,uniforms(i){return{radius:i.radius,minAlpha:i.minAlpha,maxAlpha:i.maxAlpha}}},_2=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D layer;
uniform vec2 resolution;
uniform float radius;
uniform float strength;
uniform vec2 center;

in vec2 texCoord;
out vec4 FragColor;

#define PI 3.1415926

void main() {
    vec2 coord = gl_FragCoord.xy;
    vec2 center = vec2(center.x, resolution.y - center.y);
    coord -= center;
    float distance = length(coord);
    float percent = distance / radius;
    if(percent <= 1.0)
        coord *= mix(1.0, pow(percent, 1.0 - strength * 0.75) * radius / distance, 1.0 - percent);
    coord += center;
    FragColor = texture(layer, coord / resolution);
}
`,g2={fragment:_2,uniforms(i){return{center:[i.center.x,i.center.y],radius:i.radius,strength:i.strength}}},b2=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D layer;
uniform vec2 resolution;
uniform float radius;
uniform float angle;
uniform vec2 center;

in vec2 texCoord;
out vec4 FragColor;

#define PI 3.1415926

void main() {
    vec2 coord = gl_FragCoord.xy;
    vec2 center = vec2(center.x, resolution.y - center.y);
    coord -= center;
    float distance = length(coord);
    if(distance < radius) {
        float percent = (radius - distance) / radius;
        float theta = percent * percent * angle;
        float s = sin(theta);
        float c = cos(theta);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }
    coord += center;
    FragColor = texture(layer, coord / resolution);
}
`,$2={fragment:b2,uniforms(i){return{center:[i.center.x,i.center.y],radius:i.radius,angle:i.angle/180*Math.PI}}},v2=`#version 300 es

precision mediump float;
precision mediump int;

uniform sampler2D layer;
uniform float temperature;
uniform float strength;

in vec2 texCoord;
out vec4 FragColor;

const float LuminancePreservationFactor = 1.0;

// Source: https://www.shadertoy.com/view/4sc3D7 
// Copyright (C) 2014 by Benjamin 'BeRo' Rosseaux
// http://creativecommons.org/publicdomain/zero/1.0/
// Valid from 1000 to 40000 K (and additionally 0 for pure full white)
vec3 colorTemperatureToRGB(const in float temperature) {
  // Values from: http://blenderartists.org/forum/showthread.php?270332-OSL-Goodness&p=2268693&viewfull=1#post2268693   
    mat3 m = (temperature <= 6500.0) ? mat3(vec3(0.0, -2902.1955373783176, -8257.7997278925690), vec3(0.0, 1669.5803561666639, 2575.2827530017594), vec3(1.0, 1.3302673723350029, 1.8993753891711275)) : mat3(vec3(1745.0425298314172, 1216.6168361476490, -8257.7997278925690), vec3(-2666.3474220535695, -2173.1012343082230, 2575.2827530017594), vec3(0.55995389139931482, 0.70381203140554553, 1.8993753891711275));
    return mix(clamp(vec3(m[0] / (vec3(clamp(temperature, 1000.0, 40000.0)) + m[1]) + m[2]), vec3(0.0), vec3(1.0)), vec3(1.0), smoothstep(1000.0, 0.0, temperature));
}

void main() {
    vec4 inColor = texture(layer, texCoord);
    vec3 outColor = mix(inColor.rgb, inColor.rgb * colorTemperatureToRGB(temperature), strength);
    outColor *= mix(1.0, dot(inColor.rgb, vec3(0.2126, 0.7152, 0.0722)) / max(dot(outColor, vec3(0.2126, 0.7152, 0.0722)), 1e-5), LuminancePreservationFactor);
    FragColor = vec4(outColor, inColor.a);
}`,w2={fragment:v2,uniforms(i){return{temperature:i.temperature,strength:i.strength}}};function y2(){return{noise:p2,bugle:h2,pinch:g2,swirl:$2,grayscale:{fragment:m2,uniforms(){return{}}},brightness_contrast:f2,temperature:w2}}const _s=`#version 300 es
precision highp  float;
precision highp  int;

vec2[6] v;
vec2[6] t;

out vec2 texCoord;
void main() {
    v[0] = vec2(-1, -1);
    v[1] = vec2(1, -1);
    v[2] = vec2(1, 1);
    v[3] = vec2(1, 1);
    v[4] = vec2(-1, 1);
    v[5] = vec2(-1, -1);
    int i = gl_VertexID;
    gl_Position = vec4(v[i], 0, 1);
    t[0] = vec2(0, 0);
    t[1] = vec2(1, 0);
    t[2] = vec2(1, 1);
    t[3] = vec2(1, 1);
    t[4] = vec2(0, 1);
    t[5] = vec2(0, 0);
    texCoord = vec2(t[i].x, t[i].y);
}`,E2=`#version 300 es
precision highp float;
precision highp int;

uniform sampler2D stencilSampler;
uniform vec3 color;
uniform float alpha;
uniform float blur;
uniform vec2 resolution;
uniform bool dim;

in vec2 texCoord;
out vec4 FragColor;

#define PI 3.1415926

void main() {
    if(blur <= 0.) {
        vec4 origin = texture(stencilSampler, texCoord);
        FragColor = vec4(color, alpha * origin.a);
        return;
    }

    float sum = 0.0;
    float r = blur * 0.5;
    float scaleX = 1. / resolution.x;
    float scaleY = 1. / resolution.y;
    float from = -2.0 * r;
    float to = 2.0 * r;
    float C1 = 2. * r * r;
    float C2 = sqrt(C1 * PI);
    float channel = float(dim);
    for(float delta = from; delta <= to; delta++) {
        float x = (1. - channel) * delta;
        float y = channel * delta;
        vec2 shift = vec2(x * scaleX, y * scaleY);
        vec4 origin = texture(stencilSampler, texCoord + shift);
        float g = exp(-(x * x + y * y) / C1) / C2;
        sum += origin.a * g;
    }
    FragColor = vec4(color, alpha * sum);
}`,k2=`#version 300 es
precision highp float;
precision highp int;

uniform sampler2D textureSampler;

in vec2 texCoord;
out vec4 FragColor;

void main() {
    FragColor = texture(textureSampler, vec2(texCoord.x, texCoord.y));
}`,Gn=`float channelAlpha(int currentChannel, int channels, vec4 o);

float fillAlpha(vec4 o) {
    return o.g * o.a;
}

float strokeFullAlpha(vec4 o) {
    float a = (1. - fillAlpha(o));
    if(a == 0.0)
        return o.a * o.r;
    return o.a * o.r / a;
}

float strokeSimpleAlpha(vec4 o) {
    return o.r * o.a;
}

#define STENCIL_CHANNEL_STROKE 1
#define STENCIL_CHANNEL_FILL 2

float channelAlpha(int currentChannel, int channels, vec4 o) {
    if(currentChannel == STENCIL_CHANNEL_FILL)
        return fillAlpha(o);
    if((channels & STENCIL_CHANNEL_FILL) != 0)
        return strokeFullAlpha(o);
    return strokeSimpleAlpha(o);
}

void main();`,gs=`#version 300 es
precision highp  float;
precision highp  int;

in vec3 position;
in vec2 textureCoordinate;

uniform mat4 transform;
uniform mat4 camera;

out vec2 texCoord;
void main() {
    gl_Position = camera * transform * vec4(position, 1);

    texCoord = textureCoordinate;
}`,bs=`#version 300 es
precision highp  float;
precision highp  int;

uniform sampler2D stencilSampler;
uniform float alpha;
uniform int channel;

in vec2 texCoord;
out vec4 FragColor;

float channelAlpha(int channel, vec4 o);

void main() {
    vec4 origin = texture(stencilSampler, texCoord);
    FragColor = vec4(texCoord, 0, channelAlpha(channel, origin) * alpha);
}
`;function rn(i){const e=parseInt(i.slice(1),16);return[(e>>2*8)/255,(e>>8&255)/255,(e&255)/255]}class A2{constructor(e,t=[{format:e.RGBA}]){Re(this,"freeBuffers",[]);Re(this,"usedBuffers",new Set);this.gl=e,this.options=t}get(e,t){const n=this.freeBuffers.pop();if(n)return(n.height!==t||n.width!==e)&&a2(this.gl,n,this.options,e,t),this.usedBuffers.add(n),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,n.framebuffer),this.gl.clear(this.gl.COLOR_BUFFER_BIT),n;const r=s2(this.gl,this.options,e,t);return this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.usedBuffers.add(r),console.log(`Создан новый буфер, всего: ${this.usedBuffers.size}`),r}free(e){this.usedBuffers.delete(e)||console.trace("FrameBuffersPull: free not used buffer!"),this.freeBuffers.push(e)}clear(){this.freeBuffers.forEach(e=>{this.gl.deleteFramebuffer(e.framebuffer),e.attachments.forEach(t=>{this.gl.isTexture(t)?this.gl.deleteTexture(t):this.gl.deleteRenderbuffer(t)})}),console.log("FREEEE"),this.freeBuffers=[],this.usedBuffers.size&&console.trace(`FrameBuffersPull: call clear with ${this.usedBuffers.size} buffers in use!`)}}class S2{constructor(e,t,n,r){Re(this,"shaders");Re(this,"buffersPull");Re(this,"shadowProgram");Re(this,"imageProgram");Re(this,"rectangleBuffer");Re(this,"_canvasRenderBuffer",{framebuffer:null,width:0,height:0});this.gl=e,this.textures=t,e.clearColor(0,0,0,0),e.enable(e.BLEND),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);const s=Object.entries(n).map(([o,{vertex:l,fragment:u}])=>[o,[l||gs,(u||bs)+Gn]]).concat(Object.entries(r).map(([o,{vertex:l,fragment:u}])=>[o,[l||_s,(u||bs)+Gn]]),[["__shadow__",[_s,E2+Gn]],["__image__",[gs,k2+Gn]]]),a=Gg(e,Object.fromEntries(s));this.shaders=Object.fromEntries(Object.entries({...n,...r}).map(([o,l])=>[o,{uniforms:(u,f,c)=>l.uniforms(u,f,c),info:a[o]}])),this.shadowProgram=a.__shadow__,this.imageProgram=a.__image__,this.rectangleBuffer=j0(e,{position:[[-.5,-.5,0],[.5,-.5,0],[.5,.5,0],[.5,.5,0],[-.5,.5,0],[-.5,-.5,0]].flat(),textureCoordinate:[[0,0],[1,0],[1,1],[1,1],[0,1],[0,0]].flat()}),this.buffersPull=new A2(this.gl)}get canvasRenderBuffer(){return this._canvasRenderBuffer}get size(){return{width:this.gl.canvas.width,height:this.gl.canvas.height}}clear(){this.buffersPull.clear()}resize(e,t){this.canvasRenderBuffer.width==e&&this.canvasRenderBuffer.height==t||(this.gl.canvas.width=this._canvasRenderBuffer.width=e,this.gl.canvas.height=this._canvasRenderBuffer.height=t,this.gl.viewport(0,0,e,t))}drawImage(e){this.gl.useProgram(this.imageProgram.program),this.imageProgram.uniformSetters.textureSampler(e),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}drawShadow(e,t,n,r,s,a,o){const l=this.gl,u=this.buffersPull.get(o.width,o.height);this.drawStencilLayer(e,t,n,{...r,position:{x:r.position.x+a.offset.x,y:r.position.y+a.offset.y}},s,u,!1);const f={color:rn(a.color),alpha:1,resolution:[this.size.width,this.size.height],blur:Math.min(a.blur,3600)};l.useProgram(this.shadowProgram.program);const c=this.buffersPull.get(o.width,o.height);l.bindFramebuffer(l.FRAMEBUFFER,c.framebuffer),l.clear(l.COLOR_BUFFER_BIT),nn(this.shadowProgram,{...f,stencilSampler:u.attachments[0],dim:0}),l.drawArrays(l.TRIANGLES,0,6),l.bindFramebuffer(l.FRAMEBUFFER,o.framebuffer),nn(this.shadowProgram,{...f,stencilSampler:c.attachments[0],dim:1}),l.drawArrays(l.TRIANGLES,0,6),this.buffersPull.free(u),this.buffersPull.free(c)}drawStencilLayer(e,t,n,r,s,a=this.canvasRenderBuffer,o=!0){const l=this.gl;if(s.settings.type=="disabled")return;o&&s.shadow&&this.drawShadow(e,t,n,r,s,s.shadow,a);const u=this.shaders[s.settings.type],f={camera:bt.ortho(0,this.size.width,this.size.height,0,-100,100),transform:bt.scale(bt.rotateZ(bt.translation([r.position.x,r.position.y,0]),r.rotation),[r.width,r.height,1]),stencilSampler:e,channel:t,channels:n,alpha:s.alpha,...u.uniforms(s.settings,r,this)};l.useProgram(u.info.program),nn(u.info,f),vr(l,u.info,this.rectangleBuffer),l.bindFramebuffer(l.FRAMEBUFFER,a.framebuffer),l.drawArrays(l.TRIANGLES,0,6)}drawModifications(e,t,n,r,s){const a=this.gl;a.disable(a.BLEND);const o=this.buffersPull.get(r.width,r.height),l=s?n:this.buffersPull.get(r.width,r.height);let u=n,f=o;for(let c=0;c<e.length;c++){const h=c===e.length-1?r:f,m=e[c],d=this.shaders[m.settings.type],p={layer:u.attachments[0],resolution:[this.size.width,this.size.height],...d.uniforms(m.settings,t,this)};a.bindFramebuffer(a.FRAMEBUFFER,h.framebuffer),h!==r?a.clear(a.COLOR_BUFFER_BIT):a.enable(a.BLEND),a.useProgram(d.info.program),nn(d.info,p),vr(a,d.info,this.rectangleBuffer),a.drawArrays(a.TRIANGLES,0,6),h!==r&&(f=u,u=h)}this.buffersPull.free(o),s||this.buffersPull.free(l)}drawRectImage(e,t,n){const r=this.gl,s=this.imageProgram,a={camera:bt.ortho(0,this.size.width,this.size.height,0,-100,100),transform:bt.scale(bt.rotateZ(bt.translation([t.position.x,t.position.y,0]),t.rotation),[t.width,t.height,1]),textureSampler:e};r.useProgram(s.program),nn(s,a),vr(r,s,this.rectangleBuffer),r.bindFramebuffer(r.FRAMEBUFFER,n.framebuffer),r.drawArrays(r.TRIANGLES,0,6)}}class T2{constructor(e,t,n=document.createElement("canvas").getContext("2d")){Re(this,"stencilTexture");Re(this,"ctx");if(this.gl=e,this.textManager=t,!n)throw new Error("TextStencilService require not null ctx: CanvasRenderingContext2D.");this.ctx=n;const r=e.createTexture();if(!r)throw new Error("Failed to create WebGL texture in TextStencilService.");this.stencilTexture=r}getTextStencil(e,t,n,r){const s=Math.ceil(Math.abs(n)),a=Math.ceil(Math.abs(r)),o=this.textManager.drawTextInfo(e,t,s,a),l=this.ctx.canvas;l.height!=a&&(l.height=a),l.width!=s&&(l.width=s),this.ctx.clearRect(0,0,s,a),this.draw(this.ctx,o);const u=this.gl;return Vr(u,this.stencilTexture,l,{wrap:u.CLAMP_TO_EDGE,min:u.LINEAR}),{stencil:this.stencilTexture,info:o}}draw(e,t,n=!1){e.lineJoin="round",e.miterLimit=2,e.textAlign=t.align,e.textBaseline=t.baseline,e.lineWidth=t.lineWidth,e.font=Kt(t.font,t.fontSize),e.strokeStyle="#ff0000",e.fillStyle="#00ff00";const r=t.lines;for(let s=0;s<r.length;s++){const a=r[s];e.strokeText(a.text,a.x,a.y)}for(let s=0;s<r.length;s++){const a=r[s];e.fillText(a.text,a.x,a.y)}if(n){e.lineWidth=3,e.strokeStyle="#aaaaaa",e.strokeRect(0,0,e.canvas.width,e.canvas.height),e.beginPath(),e.moveTo(e.canvas.width/2,0),e.lineTo(e.canvas.width/2,e.canvas.height),e.stroke(),e.beginPath(),e.moveTo(0,e.canvas.height/2),e.lineTo(e.canvas.width,e.canvas.height/2),e.stroke(),e.strokeStyle="#ffffff",e.lineWidth=1;for(let s=0;s<r.length;s++){const a=r[s],o=a.y,l=a.x,u=e.measureText(a.text);console.debug(a),console.debug(u),e.beginPath(),e.moveTo(0,o),e.lineTo(e.canvas.width,o),e.strokeStyle="#ff0000",e.stroke(),e.beginPath(),e.moveTo(l,o-u.actualBoundingBoxAscent),e.lineTo(l,o+u.actualBoundingBoxDescent),e.strokeStyle="#00ff00",e.stroke(),e.strokeStyle="#0000ff",e.strokeRect(l-u.actualBoundingBoxLeft,o-u.actualBoundingBoxAscent,u.actualBoundingBoxLeft+u.actualBoundingBoxRight,u.actualBoundingBoxAscent+u.actualBoundingBoxDescent)}}}}const I2=`#version 300 es
precision highp float;
precision highp int;

uniform sampler2D stencilSampler;
uniform vec3 color;
uniform float alpha;
uniform int channel;
uniform int channels;

in vec2 texCoord;
out vec4 FragColor;

float channelAlpha(int currentChannel, int channels, vec4 o);

void main() {
    vec2 tcoords = texCoord;
    vec4 origin = texture(stencilSampler, tcoords);
    float originAlpha = channelAlpha(channel, channels, origin);
    FragColor = vec4(color, originAlpha * alpha);
}
`,C2={fragment:I2,uniforms(i){return{color:rn(i.value)}}},F2=`#version 300 es
precision mediump float;
precision mediump int;

uniform sampler2D stencilSampler;
uniform vec3 colors[4];
uniform float alpha;
uniform int channel;
uniform int channels;

in vec2 texCoord;
out vec4 FragColor;

float channelAlpha(int currentChannel, int channels, vec4 o);

void main() {
    vec4 origin = texture(stencilSampler, texCoord);
    vec3 color = (1.0 - texCoord.x) * colors[0];
    color += (texCoord.x) * colors[1];
    color += (1.0 - texCoord.y) * colors[2];
    color += (texCoord.y) * colors[3];
    FragColor = vec4(color, channelAlpha(channel, channels, origin) * alpha);
}
`,R2={fragment:F2,uniforms(i){return{colors:[rn(i.color1),rn(i.color2),rn(i.color3),rn(i.color4)].flat()}}},P2=`#version 300 es
precision highp float;
precision highp int;

uniform sampler2D stencilSampler;
uniform sampler2D patternSampler;
uniform float alpha;
uniform int channel;
uniform int channels;
uniform mat4 patternTransform;

in vec2 texCoord;
out vec4 FragColor;

float channelAlpha(int currentChannel, int channels, vec4 o);

void main() {
    vec4 origin = texture(stencilSampler, texCoord);
    vec4 patternCoord = patternTransform * vec4(texCoord, 0, 1);
    FragColor = texture(patternSampler, patternCoord.xy / patternCoord.w);
    FragColor.a *= channelAlpha(channel, channels, origin) * alpha;
}
`;function N2(i){return{fragment:P2,uniforms(e,t,n){const r=n.textures.get(i.getTexture(e.name)),s=e.scale=="font"?bt.identity():bt.scaling([t.width/(r.width*e.scale.x),t.height/(r.height*e.scale.y),1]);return{patternSampler:r.texture,patternTransform:bt.multiply(bt.rotateZ(bt.translation([e.shift.x/r.width,e.shift.y/r.height,0]),e.rotate/180*Math.PI),s)}}}}function B2(i){return{color:C2,pattern:N2(i),gradient4:R2}}class M2{constructor(e,t,n){Re(this,"textService");Re(this,"graphics");this.gl=e,this.textures=t,this.textService=new T2(e,n),this.graphics=new S2(e,t,B2(wt),y2())}clear(){this.graphics.clear()}drawFrame(e){this.graphics.resize(e.width,e.height);const t=this.graphics.buffersPull.get(e.width,e.height),n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,null),n.clear(n.COLOR_BUFFER_BIT),e.blocks.forEach(r=>{this.drawBlock(e,r,t)}),this.graphics.buffersPull.free(t)}drawBlock(e,t,n){const{graphics:r,textures:s}=this,a=this.blockSize(e,t),{container:o,content:l}=t;let u=r.canvasRenderBuffer;t.effects.length&&(u=n,this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,n.framebuffer),this.gl.clear(this.gl.COLOR_BUFFER_BIT));let f;switch(l.type){case"image":{const c=s.get(l.value.id);switch(o.type){case"global":{const h=r.size;r.drawRectImage(c.texture,f={...a,position:{x:h.width/2,y:h.height/2},rotation:0},u);break}case"rectangle":{r.drawRectImage(c.texture,f=o.value,u);break}}break}case"text":{const{text:c,style:h}=l.value,m=this.textService.getTextStencil(c,h,a.width,a.height);f=this.textRectangle(e,t,a,h.baseline,m.info);const d=h.stroke.settings.type!=="disabled",p=h.fill.settings.type!=="disabled",_=+d*1|+p*2;d&&r.drawStencilLayer(m.stencil,1,_,f,h.stroke,u),p&&r.drawStencilLayer(m.stencil,2,_,f,h.fill,u);break}}t.effects.length!==0&&r.drawModifications(t.effects,f,n,r.canvasRenderBuffer,!0)}blockSize(e,t){const n=t.container,r=t.content;if(n.type=="rectangle")return n.value;if(r.type=="text"){const s=r.value.text.split(`
`),a=s.length,o=Math.max(...s.map(l=>l.length));return{width:e.width*n.value.maxWidth,height:e.height*Math.max(n.value.minHeight,Math.min(n.value.maxHeight,a*(.175+Math.max(-.05,.03*(2.5-o/10)))))}}return{width:e.width*n.value.maxWidth,height:e.height*n.value.maxHeight}}textRectangle(e,t,n,r,s){const a=t.container;if(a.type=="rectangle")return a.value;const o=2/9,l=n.height/2+s.fontSize*o,u=r=="top"?l:r=="middle"?e.height/2:e.height-l;return{...n,rotation:0,position:{x:e.width/2,y:u}}}}function $s(i,e){if(!e)return 1;if(i===e)return 0;const[t,n,r]=i.split(".").map(l=>Number(l)),[s,a,o]=e.split(".").map(l=>Number(l));return t<s?-1:t>s?1:n<a?-1:n>a?1:r<o?-1:r>o?1:0}const En=class{static fromFile(e){return new ln().loadAsync(e).then(n=>{const r=n.file("index.json");return r?r.async("string").then(s=>{const a=JSON.parse(s,(l,u)=>(l==="container"&&u.type==="global"&&(u.value.minHeight=.1),u));if($s(this.FormatVersion,a.formatVersion)==-1)throw new Hn(`application version ${this.FormatVersion} lower than file version ${a.formatVersion}`);let o=Promise.all([Promise.all(a.resources.images.map(l=>{const u=n.file(this.imageFilepath(l));if(!u)throw new Error(`Not found image with id ${l}`);return u.async("blob").then(f=>({id:l,blob:f}))})),Promise.all((a.resources.patterns||[]).map(l=>{const u=n.file(this.patternFilepath(l));if(!u)throw new Error(`Not found pattern with id ${l}`);return u.async("blob").then(f=>({name:l,blob:f}))}))]).then(([l,u])=>({meme:a.meme,resources:{images:l,patterns:u}}));return $s(a.formatVersion,"0.2.2")===-1&&(o=o.then(this.fromV0_2_1ToV0_2_2)),o}):En.zeroVersion(n).then(En.fromV0_2_0ToV0_2_1).then(En.fromV0_2_1ToV0_2_2)})}static fromV0_2_0ToV0_2_1(e){return{...e,resources:{...e.resources,patterns:[]}}}static fromV0_2_1ToV0_2_2(e){return{...e,meme:{frames:e.meme.frames.map(t=>({...t,blocks:t.blocks.map(n=>({...n,effects:[]}))}))}}}static toFile(e){const t=new ln;e.resources.images.forEach(({id:r,blob:s})=>{t.file(this.imageFilepath(r),s,{binary:!0})}),e.resources.patterns.forEach(({name:r,blob:s})=>{t.file(this.patternFilepath(r),s,{binary:!0})});const n={meme:e.meme,formatVersion:this.FormatVersion,editorVersion:this.EditorVersion,resources:{images:e.resources.images.map(r=>r.id),patterns:e.resources.patterns.map(r=>r.name)}};return t.file("index.json",JSON.stringify(n)),t.generateAsync({type:"blob"})}static imageFilepath(e){return`resources/images/${e}.png`}static patternFilepath(e){return`resources/patterns/${e}.png`}static zeroVersion(e){const t=e.file("text.json");if(!t)throw new Hn("Unknown format");const n=t.comment;return t.async("string").then(r=>{const s=JSON.parse(r),a=e.file(/.*\.png/),o=new Array(a.length);return Promise.all(a.map(l=>l.async("blob").then(u=>{const f=+l.name.substring(0,l.name.length-4);return this.imageSizes(u).then(({width:c,height:h})=>{const m={id:`old-frame-${f}`,blocks:[{id:`old-frame-${f}-background`,container:{type:"global",value:{maxHeight:1,maxWidth:1,minHeight:1}},content:{type:"image",value:{id:l.name}}}],height:h,width:c};o[f]=m}).then(()=>({id:l.name,blob:u}))}))).then(l=>{for(let u=0;u<s.length;u++){const f=s[u],c=o[u];if(n)switch(n){case"v0.0.3":c.blocks.push(...f.textContent.map((h,m)=>{const d=h.box,p=Ft.mergePartials(Ft.DefaultStyle(),h.style);return{id:`old-frame-${u}-block-${m}`,container:h.main?{type:"global",value:{maxHeight:.4,maxWidth:.96,minHeight:.1}}:{type:"rectangle",value:{height:d.height,width:d.width,position:{x:d.x,y:d.y},rotation:0}},content:{type:"text",value:{text:h.text,style:wr(p,h.main)}}}}));break;case"v0.0.4":c.blocks.push(...f.textContent.map((h,m)=>{const d=h.box,p=Ft.mergePartials(Ft.DefaultStyle(),h.style);return{id:`old-frame-${u}-block-${m}`,container:h.main?{type:"global",value:{maxHeight:.4,minHeight:.1,maxWidth:.96}}:{type:"rectangle",value:{height:d._height,width:d._width,position:{x:d.transform.x,y:d.transform.y},rotation:d.transform.rotate}},content:{type:"text",value:{text:h.text,style:wr(p,h.main)}}}}));break;default:throw new Hn(`Unexpected legacy version ${n}`)}else{const h=typeof f=="string"?f:f.text,m=typeof f=="string"?Ft.DefaultStyle():f.textContent.style,d={text:h,style:wr(Ft.mergePartials(Ft.DefaultStyle(),m),!0)};c.blocks.push({id:`old-frame-${u}-block-0`,container:{type:"global",value:{maxHeight:.4,maxWidth:.96,minHeight:.1}},content:{type:"text",value:d}})}}return{meme:{frames:o},resources:{images:l}}})})}static imageSizes(e){return wn(e,zs)}};let sn=En;Re(sn,"FormatVersion","0.2.2"),Re(sn,"EditorVersion","v0.2.4");class Hn extends Error{constructor(e,t){super(`Unsupported version: ${e}`,{cause:t})}}function wr(i,e){var n;const t=(n=i.shadow)!=null&&n.enabled?{blur:i.shadow.blur,color:i.shadow.color,offset:i.shadow.offset}:void 0;return{align:"center",baseline:e?"bottom":"middle",case:i.case,experimental:{},fill:{alpha:1,shadow:t,settings:vs(i.fill)},stroke:{alpha:1,shadow:t,settings:vs(i.stroke)},lineSpacing:i.experimental.lineWidthCoefficient*(i.experimental.lineSpacingCoefficient-.5),strokeWidth:i.experimental.lineWidthCoefficient*100,font:i.font}}function vs(i){switch(i.type){case"color":return{type:"color",value:i.name};case"pattern":return{type:"pattern",name:i.name,rotate:i.patternSettings.rotate,scale:i.patternSettings.scale,shift:i.patternSettings.shift};case"none":return{type:"disabled"};default:throw new Hn(`Failed convert old brush ${JSON.stringify(i)} to material settings`)}}var Ft;(i=>{function e(){return{case:"UPPER",fill:{name:"#ffffff",type:"color",patternSettings:{rotate:0,scale:{x:1,y:1},shift:{x:0,y:0}}},stroke:{name:"#000000",type:"color",patternSettings:{rotate:0,scale:{x:1,y:1},shift:{x:0,y:0}}},name:"custom",font:{bold:!1,family:"Impact",italic:!1,smallCaps:!1},shadow:{enabled:!1,color:"#000000",blur:10,offset:{x:0,y:0}},experimental:{lineSpacingCoefficient:.5,lineWidthCoefficient:.1385,interpolationPoint:100}}}i.DefaultStyle=e;function t(r){return r!==null&&typeof r=="object"}function n(r,s){for(const a in r){const o=s[a],l=r[a];t(l)&&(!o||t(o))?s[a]=n(l,o||{}):o===void 0&&(s[a]=l)}return s}i.mergePartials=n})(Ft||(Ft={}));function z2(i,e){switch(e){case"As is":return i;case"UPPER":return i.toUpperCase();case"lower":return i.toLowerCase()}throw new Error(`Unsupported text case type: ${e}`)}class D2{constructor(e=document.createElement("canvas").getContext("2d")){this.ctx=e}set baseline(e){this.ctx.textBaseline=e}get baseline(){return this.ctx.textBaseline}set align(e){this.ctx.textAlign=e}get align(){return this.ctx.textAlign}measureText(e,t,n){this.ctx.font=Kt(t,n);const r=this.ctx.measureText(e);return{advancedWidth:r.width,width:r.actualBoundingBoxLeft+r.actualBoundingBoxRight,height:r.actualBoundingBoxAscent+r.actualBoundingBoxDescent,boundingBox:{top:r.actualBoundingBoxAscent,bottom:r.actualBoundingBoxDescent,left:r.actualBoundingBoxLeft,right:r.actualBoundingBoxRight}}}}const ni=class{constructor(e,t=new D2){Re(this,"heightMeasuresCache",new Map);this.statistics=e,this.measurer=t,t.baseline="bottom"}drawTextInfo(e,t,n,r){const s=z2(e,t.case).split(`
`);return this.drawLinesInfo(s,t.font,t.stroke.settings.type=="disabled"?0:t.strokeWidth/100,t.align,t.baseline,t.lineSpacing,n,r)}fontSize(e,t,n,r,s,a,o=100){if(e<2||t<2)return Math.min(e,t);const l=n.map(b=>{const v=this.measurer.measureText(b,r,o);return{line:b,width:v.width}}).reduce((b,v)=>v.width>b.width?v:b).line,u=s*o,h=(this.measurer.measureText(l,r,o).width+u)/o,m=e/h,d=n.length,p=t/(d+a*(d-1))/(1+s),_=vh(p,this.statistics.get(r));return Math.min(_,m)}measureReference(e,t){const n=Kt(e,t),r=this.heightMeasuresCache.get(n);if(r)return r;const s=this.measurer.measureText(ni.MAX_HEIGHT_TEXT_EXAMPLE,e,t);return this.heightMeasuresCache.set(n,s),s}linesHeight(e,t,n){return e*(t+n*(t-1))}drawLinesInfo(e,t,n,r,s,a,o,l){const u=this.fontSize(o-2,l-2,e,t,n,a),f=n*u,c=f/2,h=r=="left"?c:r=="right"?o-c:o/2|0,m=this.measureReference(t,u),d=m.height+f/2,p=d*(1+a),_=this.linesHeight(d,e.length,a)+f/2,b=s=="top"?0:s=="middle"?(l-_)/2|0:l-_,v=d+b-m.boundingBox.bottom,A=new Array;this.measurer.align=r;for(let k=0;k<e.length;k++){const N=e[k],T=this.measurer.measureText(N,t,u).boundingBox,F=v+k*p;let L=h;switch(r){case"center":L+=(T.left-T.right)/2;break;case"left":L+=T.left;break;case"right":L-=T.right;break}A.push({text:N,x:L,y:F})}return{lines:A,font:t,fontSize:u,lineWidth:f,stringHeight:d,totalHeight:_,baseline:"bottom",align:r}}};let Wn=ni;Re(Wn,"MAX_HEIGHT_TEXT_EXAMPLE","AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZzАаБбВвГгДдЕеЁёЖжЗзИиЙйКкЛлМмНнОоПпРрСсТтУуФфХхЦцЧчШшЩщЪъЫыЬьЭэЮюЯя");function U2(i){const e=new Set(Object.keys(i));return["empty","await"].every(t=>e.has(t))}function L2(i){return Object.values(i).every(U2)}class O2{constructor(e,t,n,r,s){Re(this,"textures");Re(this,"drawer");Re(this,"meme",{frames:[]});Re(this,"activeFrame");Re(this,"activeBlock");Re(this,"inUpdate",{meme:!1,frame:!1,block:!1});Re(this,"gl");Re(this,"backgroundTasks",new Map);Re(this,"placeholdersTextures",new Array);Re(this,"usedImages",new Map);Re(this,"blockIdGenerator",new Ms("v.0.2.0-"+Date.now().toString()+"-"));Re(this,"setBackground",e=>{const t=new FileReader,n=new Promise((r,s)=>{t.addEventListener("load",()=>r(t.result)),t.addEventListener("error",()=>s(t.error))});t.readAsDataURL(e),this.runTask("Меняем фон",n.then(r=>this.textures.downloadImage(r,{meta:{source:"user",type:"image"}}).then(s=>{this.removeImageUsage(this.activeFrame.blocks[0]),this.activeFrame.blocks[0].content={type:"image",value:{id:s.id}},this.activeFrame.width=s.width,this.activeFrame.height=s.height,this.addImageUsage(this.activeFrame.blocks[0]),this.frameUpdated()})))});Re(this,"drawPreviewAsync",G2(e=>{this.drawer.drawFrame(e),this.drawPreview(e)},250));Re(this,"zipCanvas",document.createElement("canvas"));Re(this,"zipCtx",this.zipCanvas.getContext("2d"));this.stores=e;const a=t.getContext("webgl2",{premultipliedAlpha:!1});if(!a)throw new Error("Failed to create WebGL2 context!");this.gl=a,this.textures=new l2(a);const o=kh();this.drawer=new M2(a,this.textures,new Wn(o.store)),this.runTask("Загрузка ресурсов",Promise.all(n.map(({name:u,url:f})=>this.textures.downloadImage(f,{id:u,wrap:a.REPEAT,meta:{source:"default",type:"pattern"}}).then(c=>[u,c]))).then(u=>u.map(([f,c])=>({name:f,textureId:c.id}))).then(u=>wt.addPattern(...u))),this.runTask("Загрузка шрифтов",Sh()),this.runTask("Загрузка метрик шрифтов",o.then),this.runTask("Загрузка плейсхолдеров",Promise.all(Object.entries(r).map(([u,{empty:f}])=>Promise.all(f.map(({name:c,url:h})=>this.textures.downloadImage(h,{id:`placeholder-${u}-${c}`,meta:{source:"default",type:"image"}}))).then(c=>[u,c]))).then(Object.fromEntries).then(u=>this.placeholdersTextures=u[s]??u.default).then(()=>this.deleteFrame(this.activeFrame)).then(()=>this.draw(this.activeFrame,!0)));const l=x2(()=>this.draw());e.meme.subscribe(u=>{this.inUpdate.meme||(this.meme=u)}),e.frame.subscribe(u=>{l(),!this.inUpdate.frame&&(this.activeFrame=u)}),e.block.subscribe(u=>{l(),!this.inUpdate.block&&(this.activeBlock=u)})}get busy(){return this.backgroundTasks.size!=0}get currentTask(){return this.busy?this.backgroundTasks.values().next().value:""}runTask(e,t){return this.backgroundTasks.set(t,e),this.stores.busy.set(this.currentTask),t.catch(n=>{throw this.stores.error.set(n),n}),t.finally(()=>{this.backgroundTasks.delete(t),this.stores.busy.set(this.currentTask)}),t}addImageUsage(e){if(e.content.type!="image")return;const t=e.content.value.id;if(this.textures.get(t).meta.source=="default")return;let r=this.usedImages.get(t);r||this.usedImages.set(t,r=new Set),r.add(e)}removeImageUsage(e){if(e.content.type!="image")return;const t=e.content.value.id;if(this.textures.get(t).meta.source=="default")return;const r=this.usedImages.get(t);r&&(r.delete(e),r.size==0&&this.textures.delete(t))}memeUpdated(){this.inUpdate.meme=!0,this.stores.meme.set(this.meme),this.inUpdate.meme=!1}frameUpdated(){this.inUpdate.frame=!0,this.stores.frame.set(this.activeFrame),this.inUpdate.frame=!1}blockUpdated(){this.inUpdate.block=!0,this.stores.block.set(this.activeBlock),this.inUpdate.block=!1}shiftBlock(e,t){const n=this.activeFrame.blocks,r=n.indexOf(e);let s=-1;const a=n.length;for(let o=r+t;o>0&&o<a;o+=t)if(n[o].content.type=="text"){s=o;break}s!=-1&&(n[r]=n[s],n[s]=e,this.frameUpdated())}shiftFrame(e,t){const n=this.meme.frames,r=n.indexOf(e),s=r+t;s<0||s>=n.length||(n[r]=n[s],n[s]=e,this.memeUpdated())}addBlock(e=this.activeBlock){e.content.type!=="text"&&(e=this.activeFrame.blocks.find(n=>n.content.type==="text")),e=an(e),e.id=this.blockIdGenerator.generate(),e.content.type==="text"&&(e.content.value.text="Текст",e.container.type==="global"&&(e.content.value.style.baseline="middle",e.content.value.style.align="center"));const t=this.activeFrame;e.container={type:"rectangle",value:{width:t.width*.5|0,height:t.height*.5|0,position:{x:t.width*.5|0,y:t.height*.5|0},rotation:0}},this.activeFrame.blocks.push(e),this.frameUpdated(),this.activeBlock=e,this.blockUpdated()}newFrame(e){var n,r;const t={...an(((r=(n=this.activeBlock)==null?void 0:n.content)==null?void 0:r.type)==="text"?this.activeBlock.content.value.style:Rs),baseline:"bottom"};return{id:this.blockIdGenerator.generate(),blocks:[{id:this.blockIdGenerator.generate(),container:{type:"global",value:{maxHeight:1,maxWidth:1,minHeight:1}},content:{type:"image",value:{id:e.id}},effects:[]},{id:this.blockIdGenerator.generate(),container:{type:"global",value:{maxWidth:.96,maxHeight:.4,minHeight:0}},content:{type:"text",value:{text:"",style:t}},effects:[]}],height:e.height,width:e.width}}copyFrame(e){const t=an(e);return t.id=this.blockIdGenerator.generate(),e.blocks.forEach(n=>n.id=this.blockIdGenerator.generate()),t}addFrame(e){const t=e?this.copyFrame(e):this.newFrame(this.placeholdersTextures[Math.floor(Math.random()*this.placeholdersTextures.length)]);return this.meme.frames.push(t),this.activeFrame=t,t.blocks.forEach(n=>this.addImageUsage(n)),this.memeUpdated(),this.frameUpdated(),t}deleteBlock(e){if(e.id==this.activeBlock.id){const t=this.activeFrame.blocks.find(n=>n.id!=e.id&&n.content.type==="text");t?(this.activeBlock=t,this.blockUpdated()):this.addBlock()}this.removeImageUsage(e),this.activeFrame.blocks.splice(this.activeFrame.blocks.indexOf(e),1),this.frameUpdated()}deleteFrame(e){if(e.id==this.activeFrame.id){const t=this.meme.frames.find(n=>n.id!=e.id);t?(this.activeFrame=t,this.frameUpdated()):this.addFrame()}this.meme.frames.splice(this.meme.frames.indexOf(e),1),e.blocks.forEach(t=>this.removeImageUsage(t)),this.memeUpdated()}copyFrameToClipboard(){return this.runTask("Копируем",this.frameBlob(this.activeFrame).then(e=>j2(e)))}frameBlob(e){return this.drawer.drawFrame(e),yr(this.gl.canvas)}drawPreview(e){var t,n;(n=(t=this.stores.previews.value)[e.id])==null||n.call(t,this.gl.canvas)}draw(e=this.activeFrame,t=!1){this.busy&&!t||(this.drawer.drawFrame(e),t?this.drawPreview(e):this.drawPreviewAsync(e))}renderMeme(){return this.runTask("Пакуем мем",Promise.all(this.meme.frames.map(e=>this.frameBlob(e))).then(e=>{if(this.drawer.drawFrame(this.activeFrame),e.length==1)return{ext:"png",blob:e[0]};const t=new ln,n=e.length.toString().length;return e.forEach((r,s)=>{t.file(`${(s+1).toString().padStart(n,"0")}.png`,r,{binary:!0})}),t.generateAsync({type:"blob"}).then(r=>({ext:"zip",blob:r}))}))}getImagesList(e=this.meme){return Array.from(new Set(e.frames.flatMap(t=>t.blocks.map(n=>n.content).map(n=>n.type=="image"?this.textures.get(n.value.id):"").filter(n=>n&&n.meta.source=="user"&&n.meta.type=="image"))))}getPatternsList(e=this.meme){return Array.from(new Set(e.frames.flatMap(t=>t.blocks.map(n=>n.content).flatMap(n=>{if(n.type!="text")return[];const r=[],s=n.value.style;return s.fill.settings.type=="pattern"&&r.push(s.fill.settings.name),s.stroke.settings.type=="pattern"&&r.push(s.stroke.settings.name),r}).filter(n=>n)))).map(t=>({name:t,texture:this.textures.get(wt.getTexture(t))})).filter(({texture:t})=>t.meta.source=="user")}exportMeme(){const e=this.getImagesList(),t=this.getPatternsList();return this.runTask("Пакуем мем",Promise.all([Promise.all(e.map(n=>(this.zipCanvas.width=n.width,this.zipCanvas.height=n.height,this.zipCtx.drawImage(n.original,0,0),yr(this.zipCanvas).then(r=>({id:n.id,blob:r}))))),Promise.all(t.map(({name:n,texture:r})=>(this.zipCanvas.width=r.width,this.zipCanvas.height=r.height,this.zipCtx.drawImage(r.original,0,0),yr(this.zipCanvas).then(s=>({name:n,blob:s})))))]).then(([n,r])=>sn.toFile({meme:this.meme,resources:{images:n,patterns:r}})))}openMeme(e){return this.runTask("Распаковываем мем",sn.fromFile(e).then(t=>(this.getImagesList().forEach(n=>this.textures.delete(n.id)),this.usedImages.clear(),Promise.all(t.resources.images.map(({id:n,blob:r})=>wn(r,s=>this.textures.downloadImage(s,{id:n,meta:{source:"user",type:"image"}}))).concat(t.resources.patterns.map(({name:n,blob:r})=>wn(r,s=>(wt.has(n)&&(this.textures.delete(wt.getTexture(n)),wt.delete(n)),this.textures.downloadImage(s,{meta:{source:"user",type:"pattern"}}).then(a=>wt.addPattern({name:n,textureId:a.id}))))))).then(()=>(this.meme=t.meme,this.meme.frames.flatMap(n=>n.blocks).forEach(n=>this.addImageUsage(n)),this.activeFrame=this.meme.frames[0],this.memeUpdated(),this.frameUpdated(),Er())).then(()=>{this.meme.frames.forEach(n=>this.draw(n,!0)),this.draw()}))))}framesFromImages(e){return this.runTask("Загружаем картинки",Promise.all(e.map(t=>wn(t,n=>this.textures.downloadImage(n,{meta:{source:"user",type:"image"}})))).then(t=>t.map(n=>this.addFrame(this.newFrame(n)))).then(t=>Er().then(()=>t)).then(t=>{t.forEach(n=>this.draw(n,!0))}))}addPattern(e,t){return this.runTask("Добавляем паттерн",wn(t,n=>this.textures.downloadImage(n,{meta:{source:"user",type:"pattern"}})).then(n=>{const r={name:e,textureId:n.id};return wt.addPattern(r),r})).then(()=>this.draw(this.activeFrame))}clear(){wt.clear(),this.textures.clear(),this.usedImages.clear(),this.drawer.clear()}}function x2(i){let e=0;return(...t)=>{e||(e=requestAnimationFrame(()=>{e=0,i.apply(void 0,t)}))}}function G2(i,e){let t=0;return(...n)=>{t&&clearTimeout(t),t=setTimeout(()=>{t=0,i.apply(void 0,n)},e)}}function yr(i){return new Promise((e,t)=>i.toBlob(n=>{if(!n){t(new Error("Failed to get blob from canvas"));return}e(n)}))}class xa extends Error{constructor(e,t){super(e),this.blob=t}}function j2(i){return window.ClipboardItem?window.navigator.clipboard.write([new ClipboardItem({[i.type]:i})]):Promise.reject(new xa("Ваш браузер не поддерживает копирование изображений из скриптов.",i))}function H2(i){let e,t;return{c(){e=J("article"),t=ue(i[7]),this.h()},l(n){e=Q(n,"ARTICLE",{class:!0});var r=ie(e);t=fe(r,i[7]),r.forEach(E),this.h()},h(){G(e,"class","svelte-1ow4yee")},m(n,r){O(n,e,r),V(e,t)},p(n,r){r[0]&128&&ut(t,n[7])},d(n){n&&E(e)}}}function W2(i){let e,t,n,r;return{c(){e=J("article"),t=ue("Произошла ошибка: "),n=ue(i[5]),r=ue("."),this.h()},l(s){e=Q(s,"ARTICLE",{class:!0});var a=ie(e);t=fe(a,"Произошла ошибка: "),n=fe(a,i[5]),r=fe(a,"."),a.forEach(E),this.h()},h(){G(e,"class","svelte-1ow4yee")},m(s,a){O(s,e,a),V(e,t),V(e,n),V(e,r)},p(s,a){a[0]&32&&ut(n,s[5])},d(s){s&&E(e)}}}function V2(i){let e;return{c(){e=ue("У нас проблемы")},l(t){e=fe(t,"У нас проблемы")},m(t,n){O(t,e,n)},d(t){t&&E(e)}}}function q2(i){let e,t,n,r,s,a,o,l,u,f,c,h,m,d,p;e=new on({props:{open:i[7]!=="",closable:!1,$$slots:{default:[H2]},$$scope:{ctx:i}}}),n=new on({props:{open:i[5]!==void 0,$$slots:{title:[V2],default:[W2]},$$scope:{ctx:i}}});function _(P){i[22](P)}let b={};i[4]!==void 0&&(b.fallbackBlob=i[4]),s=new ff({props:b}),ge.push(()=>$e(s,"fallbackBlob",_));function v(P){i[23](P)}function A(P){i[24](P)}function k(P){i[25](P)}function N(P){i[26](P)}function T(P){i[27](P)}function F(P){i[28](P)}let L={version:"v0.2.4",memeExampleURL:i[0]};return i[8]!==void 0&&(L.meme=i[8]),i[9]!==void 0&&(L.frame=i[9]),i[10]!==void 0&&(L.block=i[10]),i[3]!==void 0&&(L.canvasUI=i[3]),i[2]!==void 0&&(L.canvasWebgl=i[2]),i[11]!==void 0&&(L.previews=i[11]),l=new $p({props:L}),ge.push(()=>$e(l,"meme",v)),ge.push(()=>$e(l,"frame",A)),ge.push(()=>$e(l,"block",k)),ge.push(()=>$e(l,"canvasUI",N)),ge.push(()=>$e(l,"canvasWebgl",T)),ge.push(()=>$e(l,"previews",F)),l.$on("openMeme",i[29]),l.$on("saveMeme",i[30]),l.$on("renderMeme",i[31]),l.$on("changeBackground",i[32]),l.$on("frameToClipboard",i[18]),l.$on("createBlock",i[33]),l.$on("shiftBlock",i[34]),l.$on("deleteBlock",i[35]),l.$on("createFrame",i[36]),l.$on("shiftFrame",i[37]),l.$on("deleteFrame",i[38]),l.$on("framesFromImages",i[39]),l.$on("addPattern",i[40]),{c(){B(e.$$.fragment),t=oe(),B(n.$$.fragment),r=oe(),B(s.$$.fragment),o=oe(),B(l.$$.fragment)},l(P){M(e.$$.fragment,P),t=le(P),M(n.$$.fragment,P),r=le(P),M(s.$$.fragment,P),o=le(P),M(l.$$.fragment,P)},m(P,U){z(e,P,U),O(P,t,U),z(n,P,U),O(P,r,U),z(s,P,U),O(P,o,U),z(l,P,U),p=!0},p(P,U){const ae={};U[0]&128&&(ae.open=P[7]!==""),U[0]&128|U[1]&8192&&(ae.$$scope={dirty:U,ctx:P}),e.$set(ae);const I={};U[0]&32&&(I.open=P[5]!==void 0),U[0]&32|U[1]&8192&&(I.$$scope={dirty:U,ctx:P}),n.$set(I);const C={};!a&&U[0]&16&&(a=!0,C.fallbackBlob=P[4],ve(()=>a=!1)),s.$set(C);const $={};U[0]&1&&($.memeExampleURL=P[0]),!u&&U[0]&256&&(u=!0,$.meme=P[8],ve(()=>u=!1)),!f&&U[0]&512&&(f=!0,$.frame=P[9],ve(()=>f=!1)),!c&&U[0]&1024&&(c=!0,$.block=P[10],ve(()=>c=!1)),!h&&U[0]&8&&(h=!0,$.canvasUI=P[3],ve(()=>h=!1)),!m&&U[0]&4&&(m=!0,$.canvasWebgl=P[2],ve(()=>m=!1)),!d&&U[0]&2048&&(d=!0,$.previews=P[11],ve(()=>d=!1)),l.$set($)},i(P){p||(w(e.$$.fragment,P),w(n.$$.fragment,P),w(s.$$.fragment,P),w(l.$$.fragment,P),p=!0)},o(P){y(e.$$.fragment,P),y(n.$$.fragment,P),y(s.$$.fragment,P),y(l.$$.fragment,P),p=!1},d(P){D(e,P),P&&E(t),D(n,P),P&&E(r),D(s,P),P&&E(o),D(l,P)}}}function Z2(i){let e,t,n;function r(a){i[41](a)}let s={$$slots:{default:[q2]},$$scope:{ctx:i}};return i[6]!==void 0&&(s.theme=i[6]),e=new yp({props:s}),ge.push(()=>$e(e,"theme",r)),{c(){B(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,o){z(e,a,o),n=!0},p(a,o){const l={};o[0]&4031|o[1]&8192&&(l.$$scope={dirty:o,ctx:a}),!t&&o[0]&64&&(t=!0,l.theme=a[6],ve(()=>t=!1)),e.$set(l)},i(a){n||(w(e.$$.fragment,a),n=!0)},o(a){y(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function X2(i,e,t){let n,r,s,a,o,l,u;St(i,Yi,ne=>t(6,r=ne));let{patternUrls:f}=e,{placeholdersUrls:c}=e,{memeURL:h=null}=e,{memeExampleURL:m}=e;const d=new Nn({frames:[{height:300,width:600,id:"loading-placeholder",blocks:[{id:"loading-block-placeholder",container:{type:"global",value:{maxHeight:.9,maxWidth:.9,minHeight:0}},content:{type:"text",value:{text:"Loading...",style:Rs}},effects:[]}]}]});St(i,d,ne=>t(8,a=ne));const p=new Nn(d.value.frames[0]);St(i,p,ne=>t(9,o=ne));const _=new Nn(p.value.blocks.find(ne=>ne.content.type=="text"));St(i,_,ne=>t(10,l=ne));let b=p.value.id;d.subscribe(()=>{b=""}),p.subscribe(ne=>{b!=ne.id&&(b=ne.id,_.set(ne.blocks.find(xe=>xe.content.type=="text")))});let v,A,k,N=new Nn({});St(i,N,ne=>t(11,u=ne));let T=An("Собираем интерфейс...");St(i,T,ne=>t(7,s=ne));let F=An(void 0);St(i,F,ne=>t(5,n=ne));let L="default";cn(()=>{try{L=new URL(location.href).searchParams.get("skin")??L,t(1,v=new O2({block:_,frame:p,meme:d,busy:T,previews:N,error:F},A,f,c,L)),new Rp(k,A,d,p,_),h&&Er().then(()=>fetch(h)).then(ne=>ne.blob()).then(ne=>v.openMeme(ne))}catch(ne){Ya(F,n=ne,n)}return()=>v.clear()});let P=null;function U(){v&&v.copyFrameToClipboard().catch(ne=>{if(ne instanceof xa)t(4,P=ne.blob);else throw ne})}function ae(ne){P=ne,t(4,P)}function I(ne){a=ne,d.set(a)}function C(ne){o=ne,p.set(o)}function $(ne){l=ne,_.set(l)}function Z(ne){k=ne,t(3,k)}function we(ne){A=ne,t(2,A)}function x(ne){u=ne,N.set(u)}const de=ne=>v==null?void 0:v.openMeme(ne.detail.file),te=()=>{var ne;return(ne=v==null?void 0:v.exportMeme())==null?void 0:ne.then(ns("meme.meme"))},Te=()=>{var ne;return(ne=v==null?void 0:v.renderMeme())==null?void 0:ne.then(({ext:xe,blob:ot})=>ns(`meme.${xe}`)(ot))},H=ne=>v==null?void 0:v.setBackground(ne.detail.file),W=ne=>{var xe;return v==null?void 0:v.addBlock((xe=ne.detail)==null?void 0:xe.origin)},Y=ne=>v==null?void 0:v.shiftBlock(ne.detail.block,ne.detail.shift),ee=ne=>v==null?void 0:v.deleteBlock(ne.detail.block),pe=ne=>{var xe;return v==null?void 0:v.addFrame((xe=ne.detail)==null?void 0:xe.origin)},se=ne=>v==null?void 0:v.shiftFrame(ne.detail.frame,ne.detail.shift),Se=ne=>v==null?void 0:v.deleteFrame(ne.detail.frame),Fe=ne=>v==null?void 0:v.framesFromImages(ne.detail.files),X=ne=>v==null?void 0:v.addPattern(ne.detail.name,ne.detail.image);function Ne(ne){r=ne,Yi.set(r)}return i.$$set=ne=>{"patternUrls"in ne&&t(19,f=ne.patternUrls),"placeholdersUrls"in ne&&t(20,c=ne.placeholdersUrls),"memeURL"in ne&&t(21,h=ne.memeURL),"memeExampleURL"in ne&&t(0,m=ne.memeExampleURL)},[m,v,A,k,P,n,r,s,a,o,l,u,d,p,_,N,T,F,U,f,c,h,ae,I,C,$,Z,we,x,de,te,Te,H,W,Y,ee,pe,se,Se,Fe,X,Ne]}class K2 extends ke{constructor(e){super(),Ae(this,e,X2,Z2,Ee,{patternUrls:19,placeholdersUrls:20,memeURL:21,memeExampleURL:0},null,[-1,-1])}}const Y2=""+new URL("../assets/docs.382a62e4.meme",import.meta.url).href,J2=""+new URL("../assets/checkered.07b41575.webp",import.meta.url).href,Q2=""+new URL("../assets/debug.ca573084.webp",import.meta.url).href,eb=""+new URL("../assets/fire.f2d0e917.webp",import.meta.url).href,tb=""+new URL("../assets/glitter-gold.b5c4520e.webp",import.meta.url).href,nb=""+new URL("../assets/rainbow.3197970b.webp",import.meta.url).href,rb=""+new URL("../assets/stars.049cd9a5.webp",import.meta.url).href,ib=""+new URL("../assets/1.fc1781c3.webp",import.meta.url).href,sb=""+new URL("../assets/1.474db116.webp",import.meta.url).href,ab=""+new URL("../assets/2.4b45e6c9.webp",import.meta.url).href,ob=""+new URL("../assets/3.c55e7f6b.webp",import.meta.url).href,lb=""+new URL("../assets/4.730aa954.webp",import.meta.url).href,ub=""+new URL("../assets/5.dff970cb.webp",import.meta.url).href,fb=""+new URL("../assets/6.3c784f8d.webp",import.meta.url).href,cb=""+new URL("../assets/7.8ab2f8dc.webp",import.meta.url).href,hb=""+new URL("../assets/1.949784d4.webp",import.meta.url).href,mb=""+new URL("../assets/1.11d6ce27.webp",import.meta.url).href,db=""+new URL("../assets/2.97d5dc7d.webp",import.meta.url).href,pb=""+new URL("../assets/3.e8249041.webp",import.meta.url).href,_b=""+new URL("../assets/4.94ed153e.webp",import.meta.url).href,gb=""+new URL("../assets/5.843b6f84.webp",import.meta.url).href,bb=""+new URL("../assets/6.056d0cf4.webp",import.meta.url).href,$b=""+new URL("../assets/7.6fc2d0f6.webp",import.meta.url).href;function vb([i,e]){const t=i.split("/");let n=t[t.length-1];return n=n.slice(0,n.lastIndexOf(".")),{name:n,url:e}}function wb(i){return Object.entries(i).map(vb)}const yb=wb(Object.assign({"/src/lib/resources/patterns/checkered.png":J2,"/src/lib/resources/patterns/debug.png":Q2,"/src/lib/resources/patterns/fire.png":eb,"/src/lib/resources/patterns/glitter-gold.jpg":tb,"/src/lib/resources/patterns/rainbow.png":nb,"/src/lib/resources/patterns/stars.png":rb})),Br=Object.entries(Object.assign({"/src/lib/resources/placeholders/default/await/1.png":ib,"/src/lib/resources/placeholders/default/empty/1.png":sb,"/src/lib/resources/placeholders/default/empty/2.png":ab,"/src/lib/resources/placeholders/default/empty/3.png":ob,"/src/lib/resources/placeholders/default/empty/4.png":lb,"/src/lib/resources/placeholders/default/empty/5.png":ub,"/src/lib/resources/placeholders/default/empty/6.png":fb,"/src/lib/resources/placeholders/default/empty/7.png":cb,"/src/lib/resources/placeholders/inside/await/1.png":hb,"/src/lib/resources/placeholders/inside/empty/1.png":mb,"/src/lib/resources/placeholders/inside/empty/2.png":db,"/src/lib/resources/placeholders/inside/empty/3.png":pb,"/src/lib/resources/placeholders/inside/empty/4.png":_b,"/src/lib/resources/placeholders/inside/empty/5.png":gb,"/src/lib/resources/placeholders/inside/empty/6.png":bb,"/src/lib/resources/placeholders/inside/empty/7.png":$b})).map(([i,e])=>{const t=/placeholders\//.exec(i);if(!t)throw Error(`Not found prefix 'placeholder' in '${i}''`);const n=t.index+t[0].length,r=i.substring(n),[s,a,o]=r.split("/"),l=o.slice(0,o.lastIndexOf("."));return{skin:s,category:a,name:l,url:e}}).reduce((i,e)=>(i[e.skin]=i[e.skin]??{},i[e.skin][e.category]=i[e.skin][e.category]??[],i[e.skin][e.category].push(e),i),{});if(!L2(Br))throw Error(`Incorrect configuration: this is not skins map: ${JSON.stringify(Br)}`);const ws={patternUrls:yb,placeholdersUrls:Br};function Eb(i){let e,t;return e=new K2({props:{patternUrls:ws.patternUrls,placeholdersUrls:ws.placeholdersUrls,memeExampleURL:Y2}}),{c(){B(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){z(e,n,r),t=!0},p:nt,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}class Tb extends ke{constructor(e){super(),Ae(this,e,null,Eb,Ee,{})}}export{Tb as default};
